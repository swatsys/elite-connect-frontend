(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function za(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Sr={},Tr={};Tr.byteLength=K0;Tr.toByteArray=Y0;Tr.fromByteArray=Q0;var Xe=[],Ne=[],q0=typeof Uint8Array<"u"?Uint8Array:Array,as="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Dt=0,W0=as.length;Dt<W0;++Dt)Xe[Dt]=as[Dt],Ne[as.charCodeAt(Dt)]=Dt;Ne[45]=62;Ne[95]=63;function Ua(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");n===-1&&(n=t);var r=n===t?0:4-n%4;return[n,r]}function K0(e){var t=Ua(e),n=t[0],r=t[1];return(n+r)*3/4-r}function Z0(e,t,n){return(t+n)*3/4-n}function Y0(e){var t,n=Ua(e),r=n[0],s=n[1],o=new q0(Z0(e,r,s)),i=0,a=s>0?r-4:r,c;for(c=0;c<a;c+=4)t=Ne[e.charCodeAt(c)]<<18|Ne[e.charCodeAt(c+1)]<<12|Ne[e.charCodeAt(c+2)]<<6|Ne[e.charCodeAt(c+3)],o[i++]=t>>16&255,o[i++]=t>>8&255,o[i++]=t&255;return s===2&&(t=Ne[e.charCodeAt(c)]<<2|Ne[e.charCodeAt(c+1)]>>4,o[i++]=t&255),s===1&&(t=Ne[e.charCodeAt(c)]<<10|Ne[e.charCodeAt(c+1)]<<4|Ne[e.charCodeAt(c+2)]>>2,o[i++]=t>>8&255,o[i++]=t&255),o}function J0(e){return Xe[e>>18&63]+Xe[e>>12&63]+Xe[e>>6&63]+Xe[e&63]}function X0(e,t,n){for(var r,s=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(e[o+2]&255),s.push(J0(r));return s.join("")}function Q0(e){for(var t,n=e.length,r=n%3,s=[],o=16383,i=0,a=n-r;i<a;i+=o)s.push(X0(e,i,i+o>a?a:i+o));return r===1?(t=e[n-1],s.push(Xe[t>>2]+Xe[t<<4&63]+"==")):r===2&&(t=(e[n-2]<<8)+e[n-1],s.push(Xe[t>>10]+Xe[t>>4&63]+Xe[t<<2&63]+"=")),s.join("")}var go={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */go.read=function(e,t,n,r,s){var o,i,a=s*8-r-1,c=(1<<a)-1,l=c>>1,d=-7,h=n?s-1:0,b=n?-1:1,m=e[t+h];for(h+=b,o=m&(1<<-d)-1,m>>=-d,d+=a;d>0;o=o*256+e[t+h],h+=b,d-=8);for(i=o&(1<<-d)-1,o>>=-d,d+=r;d>0;i=i*256+e[t+h],h+=b,d-=8);if(o===0)o=1-l;else{if(o===c)return i?NaN:(m?-1:1)*(1/0);i=i+Math.pow(2,r),o=o-l}return(m?-1:1)*i*Math.pow(2,o-r)};go.write=function(e,t,n,r,s,o){var i,a,c,l=o*8-s-1,d=(1<<l)-1,h=d>>1,b=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,m=r?0:o-1,g=r?1:-1,w=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,i=d):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),i+h>=1?t+=b/c:t+=b*Math.pow(2,1-h),t*c>=2&&(i++,c/=2),i+h>=d?(a=0,i=d):i+h>=1?(a=(t*c-1)*Math.pow(2,s),i=i+h):(a=t*Math.pow(2,h-1)*Math.pow(2,s),i=0));s>=8;e[n+m]=a&255,m+=g,a/=256,s-=8);for(i=i<<s|a,l+=s;l>0;e[n+m]=i&255,m+=g,i/=256,l-=8);e[n+m-g]|=w*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(e){const t=Tr,n=go,r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=a,e.SlowBuffer=T,e.INSPECT_MAX_BYTES=50;const s=2147483647;e.kMaxLength=s,a.TYPED_ARRAY_SUPPORT=o(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function o(){try{const p=new Uint8Array(1),u={foo:function(){return 42}};return Object.setPrototypeOf(u,Uint8Array.prototype),Object.setPrototypeOf(p,u),p.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function i(p){if(p>s)throw new RangeError('The value "'+p+'" is invalid for option "size"');const u=new Uint8Array(p);return Object.setPrototypeOf(u,a.prototype),u}function a(p,u,f){if(typeof p=="number"){if(typeof u=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return h(p)}return c(p,u,f)}a.poolSize=8192;function c(p,u,f){if(typeof p=="string")return b(p,u);if(ArrayBuffer.isView(p))return g(p);if(p==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p);if(Ze(p,ArrayBuffer)||p&&Ze(p.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ze(p,SharedArrayBuffer)||p&&Ze(p.buffer,SharedArrayBuffer)))return w(p,u,f);if(typeof p=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const y=p.valueOf&&p.valueOf();if(y!=null&&y!==p)return a.from(y,u,f);const x=B(p);if(x)return x;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof p[Symbol.toPrimitive]=="function")return a.from(p[Symbol.toPrimitive]("string"),u,f);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof p)}a.from=function(p,u,f){return c(p,u,f)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function l(p){if(typeof p!="number")throw new TypeError('"size" argument must be of type number');if(p<0)throw new RangeError('The value "'+p+'" is invalid for option "size"')}function d(p,u,f){return l(p),p<=0?i(p):u!==void 0?typeof f=="string"?i(p).fill(u,f):i(p).fill(u):i(p)}a.alloc=function(p,u,f){return d(p,u,f)};function h(p){return l(p),i(p<0?0:I(p)|0)}a.allocUnsafe=function(p){return h(p)},a.allocUnsafeSlow=function(p){return h(p)};function b(p,u){if((typeof u!="string"||u==="")&&(u="utf8"),!a.isEncoding(u))throw new TypeError("Unknown encoding: "+u);const f=P(p,u)|0;let y=i(f);const x=y.write(p,u);return x!==f&&(y=y.slice(0,x)),y}function m(p){const u=p.length<0?0:I(p.length)|0,f=i(u);for(let y=0;y<u;y+=1)f[y]=p[y]&255;return f}function g(p){if(Ze(p,Uint8Array)){const u=new Uint8Array(p);return w(u.buffer,u.byteOffset,u.byteLength)}return m(p)}function w(p,u,f){if(u<0||p.byteLength<u)throw new RangeError('"offset" is outside of buffer bounds');if(p.byteLength<u+(f||0))throw new RangeError('"length" is outside of buffer bounds');let y;return u===void 0&&f===void 0?y=new Uint8Array(p):f===void 0?y=new Uint8Array(p,u):y=new Uint8Array(p,u,f),Object.setPrototypeOf(y,a.prototype),y}function B(p){if(a.isBuffer(p)){const u=I(p.length)|0,f=i(u);return f.length===0||p.copy(f,0,0,u),f}if(p.length!==void 0)return typeof p.length!="number"||is(p.length)?i(0):m(p);if(p.type==="Buffer"&&Array.isArray(p.data))return m(p.data)}function I(p){if(p>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return p|0}function T(p){return+p!=p&&(p=0),a.alloc(+p)}a.isBuffer=function(u){return u!=null&&u._isBuffer===!0&&u!==a.prototype},a.compare=function(u,f){if(Ze(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),Ze(f,Uint8Array)&&(f=a.from(f,f.offset,f.byteLength)),!a.isBuffer(u)||!a.isBuffer(f))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(u===f)return 0;let y=u.length,x=f.length;for(let E=0,$=Math.min(y,x);E<$;++E)if(u[E]!==f[E]){y=u[E],x=f[E];break}return y<x?-1:x<y?1:0},a.isEncoding=function(u){switch(String(u).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(u,f){if(!Array.isArray(u))throw new TypeError('"list" argument must be an Array of Buffers');if(u.length===0)return a.alloc(0);let y;if(f===void 0)for(f=0,y=0;y<u.length;++y)f+=u[y].length;const x=a.allocUnsafe(f);let E=0;for(y=0;y<u.length;++y){let $=u[y];if(Ze($,Uint8Array))E+$.length>x.length?(a.isBuffer($)||($=a.from($)),$.copy(x,E)):Uint8Array.prototype.set.call(x,$,E);else if(a.isBuffer($))$.copy(x,E);else throw new TypeError('"list" argument must be an Array of Buffers');E+=$.length}return x};function P(p,u){if(a.isBuffer(p))return p.length;if(ArrayBuffer.isView(p)||Ze(p,ArrayBuffer))return p.byteLength;if(typeof p!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof p);const f=p.length,y=arguments.length>2&&arguments[2]===!0;if(!y&&f===0)return 0;let x=!1;for(;;)switch(u){case"ascii":case"latin1":case"binary":return f;case"utf8":case"utf-8":return os(p).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return f*2;case"hex":return f>>>1;case"base64":return Ai(p).length;default:if(x)return y?-1:os(p).length;u=(""+u).toLowerCase(),x=!0}}a.byteLength=P;function v(p,u,f){let y=!1;if((u===void 0||u<0)&&(u=0),u>this.length||((f===void 0||f>this.length)&&(f=this.length),f<=0)||(f>>>=0,u>>>=0,f<=u))return"";for(p||(p="utf8");;)switch(p){case"hex":return j(this,u,f);case"utf8":case"utf-8":return X(this,u,f);case"ascii":return G(this,u,f);case"latin1":case"binary":return k(this,u,f);case"base64":return z(this,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return V(this,u,f);default:if(y)throw new TypeError("Unknown encoding: "+p);p=(p+"").toLowerCase(),y=!0}}a.prototype._isBuffer=!0;function A(p,u,f){const y=p[u];p[u]=p[f],p[f]=y}a.prototype.swap16=function(){const u=this.length;if(u%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let f=0;f<u;f+=2)A(this,f,f+1);return this},a.prototype.swap32=function(){const u=this.length;if(u%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let f=0;f<u;f+=4)A(this,f,f+3),A(this,f+1,f+2);return this},a.prototype.swap64=function(){const u=this.length;if(u%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let f=0;f<u;f+=8)A(this,f,f+7),A(this,f+1,f+6),A(this,f+2,f+5),A(this,f+3,f+4);return this},a.prototype.toString=function(){const u=this.length;return u===0?"":arguments.length===0?X(this,0,u):v.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(u){if(!a.isBuffer(u))throw new TypeError("Argument must be a Buffer");return this===u?!0:a.compare(this,u)===0},a.prototype.inspect=function(){let u="";const f=e.INSPECT_MAX_BYTES;return u=this.toString("hex",0,f).replace(/(.{2})/g,"$1 ").trim(),this.length>f&&(u+=" ... "),"<Buffer "+u+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(u,f,y,x,E){if(Ze(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(u))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof u);if(f===void 0&&(f=0),y===void 0&&(y=u?u.length:0),x===void 0&&(x=0),E===void 0&&(E=this.length),f<0||y>u.length||x<0||E>this.length)throw new RangeError("out of range index");if(x>=E&&f>=y)return 0;if(x>=E)return-1;if(f>=y)return 1;if(f>>>=0,y>>>=0,x>>>=0,E>>>=0,this===u)return 0;let $=E-x,Y=y-f;const se=Math.min($,Y),te=this.slice(x,E),oe=u.slice(f,y);for(let Q=0;Q<se;++Q)if(te[Q]!==oe[Q]){$=te[Q],Y=oe[Q];break}return $<Y?-1:Y<$?1:0};function R(p,u,f,y,x){if(p.length===0)return-1;if(typeof f=="string"?(y=f,f=0):f>2147483647?f=2147483647:f<-2147483648&&(f=-2147483648),f=+f,is(f)&&(f=x?0:p.length-1),f<0&&(f=p.length+f),f>=p.length){if(x)return-1;f=p.length-1}else if(f<0)if(x)f=0;else return-1;if(typeof u=="string"&&(u=a.from(u,y)),a.isBuffer(u))return u.length===0?-1:C(p,u,f,y,x);if(typeof u=="number")return u=u&255,typeof Uint8Array.prototype.indexOf=="function"?x?Uint8Array.prototype.indexOf.call(p,u,f):Uint8Array.prototype.lastIndexOf.call(p,u,f):C(p,[u],f,y,x);throw new TypeError("val must be string, number or Buffer")}function C(p,u,f,y,x){let E=1,$=p.length,Y=u.length;if(y!==void 0&&(y=String(y).toLowerCase(),y==="ucs2"||y==="ucs-2"||y==="utf16le"||y==="utf-16le")){if(p.length<2||u.length<2)return-1;E=2,$/=2,Y/=2,f/=2}function se(oe,Q){return E===1?oe[Q]:oe.readUInt16BE(Q*E)}let te;if(x){let oe=-1;for(te=f;te<$;te++)if(se(p,te)===se(u,oe===-1?0:te-oe)){if(oe===-1&&(oe=te),te-oe+1===Y)return oe*E}else oe!==-1&&(te-=te-oe),oe=-1}else for(f+Y>$&&(f=$-Y),te=f;te>=0;te--){let oe=!0;for(let Q=0;Q<Y;Q++)if(se(p,te+Q)!==se(u,Q)){oe=!1;break}if(oe)return te}return-1}a.prototype.includes=function(u,f,y){return this.indexOf(u,f,y)!==-1},a.prototype.indexOf=function(u,f,y){return R(this,u,f,y,!0)},a.prototype.lastIndexOf=function(u,f,y){return R(this,u,f,y,!1)};function O(p,u,f,y){f=Number(f)||0;const x=p.length-f;y?(y=Number(y),y>x&&(y=x)):y=x;const E=u.length;y>E/2&&(y=E/2);let $;for($=0;$<y;++$){const Y=parseInt(u.substr($*2,2),16);if(is(Y))return $;p[f+$]=Y}return $}function U(p,u,f,y){return lr(os(u,p.length-f),p,f,y)}function H(p,u,f,y){return lr(D0(u),p,f,y)}function M(p,u,f,y){return lr(Ai(u),p,f,y)}function L(p,u,f,y){return lr(H0(u,p.length-f),p,f,y)}a.prototype.write=function(u,f,y,x){if(f===void 0)x="utf8",y=this.length,f=0;else if(y===void 0&&typeof f=="string")x=f,y=this.length,f=0;else if(isFinite(f))f=f>>>0,isFinite(y)?(y=y>>>0,x===void 0&&(x="utf8")):(x=y,y=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const E=this.length-f;if((y===void 0||y>E)&&(y=E),u.length>0&&(y<0||f<0)||f>this.length)throw new RangeError("Attempt to write outside buffer bounds");x||(x="utf8");let $=!1;for(;;)switch(x){case"hex":return O(this,u,f,y);case"utf8":case"utf-8":return U(this,u,f,y);case"ascii":case"latin1":case"binary":return H(this,u,f,y);case"base64":return M(this,u,f,y);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,u,f,y);default:if($)throw new TypeError("Unknown encoding: "+x);x=(""+x).toLowerCase(),$=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function z(p,u,f){return u===0&&f===p.length?t.fromByteArray(p):t.fromByteArray(p.slice(u,f))}function X(p,u,f){f=Math.min(p.length,f);const y=[];let x=u;for(;x<f;){const E=p[x];let $=null,Y=E>239?4:E>223?3:E>191?2:1;if(x+Y<=f){let se,te,oe,Q;switch(Y){case 1:E<128&&($=E);break;case 2:se=p[x+1],(se&192)===128&&(Q=(E&31)<<6|se&63,Q>127&&($=Q));break;case 3:se=p[x+1],te=p[x+2],(se&192)===128&&(te&192)===128&&(Q=(E&15)<<12|(se&63)<<6|te&63,Q>2047&&(Q<55296||Q>57343)&&($=Q));break;case 4:se=p[x+1],te=p[x+2],oe=p[x+3],(se&192)===128&&(te&192)===128&&(oe&192)===128&&(Q=(E&15)<<18|(se&63)<<12|(te&63)<<6|oe&63,Q>65535&&Q<1114112&&($=Q))}}$===null?($=65533,Y=1):$>65535&&($-=65536,y.push($>>>10&1023|55296),$=56320|$&1023),y.push($),x+=Y}return F(y)}const N=4096;function F(p){const u=p.length;if(u<=N)return String.fromCharCode.apply(String,p);let f="",y=0;for(;y<u;)f+=String.fromCharCode.apply(String,p.slice(y,y+=N));return f}function G(p,u,f){let y="";f=Math.min(p.length,f);for(let x=u;x<f;++x)y+=String.fromCharCode(p[x]&127);return y}function k(p,u,f){let y="";f=Math.min(p.length,f);for(let x=u;x<f;++x)y+=String.fromCharCode(p[x]);return y}function j(p,u,f){const y=p.length;(!u||u<0)&&(u=0),(!f||f<0||f>y)&&(f=y);let x="";for(let E=u;E<f;++E)x+=G0[p[E]];return x}function V(p,u,f){const y=p.slice(u,f);let x="";for(let E=0;E<y.length-1;E+=2)x+=String.fromCharCode(y[E]+y[E+1]*256);return x}a.prototype.slice=function(u,f){const y=this.length;u=~~u,f=f===void 0?y:~~f,u<0?(u+=y,u<0&&(u=0)):u>y&&(u=y),f<0?(f+=y,f<0&&(f=0)):f>y&&(f=y),f<u&&(f=u);const x=this.subarray(u,f);return Object.setPrototypeOf(x,a.prototype),x};function q(p,u,f){if(p%1!==0||p<0)throw new RangeError("offset is not uint");if(p+u>f)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(u,f,y){u=u>>>0,f=f>>>0,y||q(u,f,this.length);let x=this[u],E=1,$=0;for(;++$<f&&(E*=256);)x+=this[u+$]*E;return x},a.prototype.readUintBE=a.prototype.readUIntBE=function(u,f,y){u=u>>>0,f=f>>>0,y||q(u,f,this.length);let x=this[u+--f],E=1;for(;f>0&&(E*=256);)x+=this[u+--f]*E;return x},a.prototype.readUint8=a.prototype.readUInt8=function(u,f){return u=u>>>0,f||q(u,1,this.length),this[u]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(u,f){return u=u>>>0,f||q(u,2,this.length),this[u]|this[u+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(u,f){return u=u>>>0,f||q(u,2,this.length),this[u]<<8|this[u+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(u,f){return u=u>>>0,f||q(u,4,this.length),(this[u]|this[u+1]<<8|this[u+2]<<16)+this[u+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(u,f){return u=u>>>0,f||q(u,4,this.length),this[u]*16777216+(this[u+1]<<16|this[u+2]<<8|this[u+3])},a.prototype.readBigUInt64LE=wt(function(u){u=u>>>0,ve(u,"offset");const f=this[u],y=this[u+7];(f===void 0||y===void 0)&&Me(u,this.length-8);const x=f+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24,E=this[++u]+this[++u]*2**8+this[++u]*2**16+y*2**24;return BigInt(x)+(BigInt(E)<<BigInt(32))}),a.prototype.readBigUInt64BE=wt(function(u){u=u>>>0,ve(u,"offset");const f=this[u],y=this[u+7];(f===void 0||y===void 0)&&Me(u,this.length-8);const x=f*2**24+this[++u]*2**16+this[++u]*2**8+this[++u],E=this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+y;return(BigInt(x)<<BigInt(32))+BigInt(E)}),a.prototype.readIntLE=function(u,f,y){u=u>>>0,f=f>>>0,y||q(u,f,this.length);let x=this[u],E=1,$=0;for(;++$<f&&(E*=256);)x+=this[u+$]*E;return E*=128,x>=E&&(x-=Math.pow(2,8*f)),x},a.prototype.readIntBE=function(u,f,y){u=u>>>0,f=f>>>0,y||q(u,f,this.length);let x=f,E=1,$=this[u+--x];for(;x>0&&(E*=256);)$+=this[u+--x]*E;return E*=128,$>=E&&($-=Math.pow(2,8*f)),$},a.prototype.readInt8=function(u,f){return u=u>>>0,f||q(u,1,this.length),this[u]&128?(255-this[u]+1)*-1:this[u]},a.prototype.readInt16LE=function(u,f){u=u>>>0,f||q(u,2,this.length);const y=this[u]|this[u+1]<<8;return y&32768?y|4294901760:y},a.prototype.readInt16BE=function(u,f){u=u>>>0,f||q(u,2,this.length);const y=this[u+1]|this[u]<<8;return y&32768?y|4294901760:y},a.prototype.readInt32LE=function(u,f){return u=u>>>0,f||q(u,4,this.length),this[u]|this[u+1]<<8|this[u+2]<<16|this[u+3]<<24},a.prototype.readInt32BE=function(u,f){return u=u>>>0,f||q(u,4,this.length),this[u]<<24|this[u+1]<<16|this[u+2]<<8|this[u+3]},a.prototype.readBigInt64LE=wt(function(u){u=u>>>0,ve(u,"offset");const f=this[u],y=this[u+7];(f===void 0||y===void 0)&&Me(u,this.length-8);const x=this[u+4]+this[u+5]*2**8+this[u+6]*2**16+(y<<24);return(BigInt(x)<<BigInt(32))+BigInt(f+this[++u]*2**8+this[++u]*2**16+this[++u]*2**24)}),a.prototype.readBigInt64BE=wt(function(u){u=u>>>0,ve(u,"offset");const f=this[u],y=this[u+7];(f===void 0||y===void 0)&&Me(u,this.length-8);const x=(f<<24)+this[++u]*2**16+this[++u]*2**8+this[++u];return(BigInt(x)<<BigInt(32))+BigInt(this[++u]*2**24+this[++u]*2**16+this[++u]*2**8+y)}),a.prototype.readFloatLE=function(u,f){return u=u>>>0,f||q(u,4,this.length),n.read(this,u,!0,23,4)},a.prototype.readFloatBE=function(u,f){return u=u>>>0,f||q(u,4,this.length),n.read(this,u,!1,23,4)},a.prototype.readDoubleLE=function(u,f){return u=u>>>0,f||q(u,8,this.length),n.read(this,u,!0,52,8)},a.prototype.readDoubleBE=function(u,f){return u=u>>>0,f||q(u,8,this.length),n.read(this,u,!1,52,8)};function J(p,u,f,y,x,E){if(!a.isBuffer(p))throw new TypeError('"buffer" argument must be a Buffer instance');if(u>x||u<E)throw new RangeError('"value" argument is out of bounds');if(f+y>p.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(u,f,y,x){if(u=+u,f=f>>>0,y=y>>>0,!x){const Y=Math.pow(2,8*y)-1;J(this,u,f,y,Y,0)}let E=1,$=0;for(this[f]=u&255;++$<y&&(E*=256);)this[f+$]=u/E&255;return f+y},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(u,f,y,x){if(u=+u,f=f>>>0,y=y>>>0,!x){const Y=Math.pow(2,8*y)-1;J(this,u,f,y,Y,0)}let E=y-1,$=1;for(this[f+E]=u&255;--E>=0&&($*=256);)this[f+E]=u/$&255;return f+y},a.prototype.writeUint8=a.prototype.writeUInt8=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,1,255,0),this[f]=u&255,f+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,2,65535,0),this[f]=u&255,this[f+1]=u>>>8,f+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,2,65535,0),this[f]=u>>>8,this[f+1]=u&255,f+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,4,4294967295,0),this[f+3]=u>>>24,this[f+2]=u>>>16,this[f+1]=u>>>8,this[f]=u&255,f+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,4,4294967295,0),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=u&255,f+4};function ue(p,u,f,y,x){yt(u,y,x,p,f,7);let E=Number(u&BigInt(4294967295));p[f++]=E,E=E>>8,p[f++]=E,E=E>>8,p[f++]=E,E=E>>8,p[f++]=E;let $=Number(u>>BigInt(32)&BigInt(4294967295));return p[f++]=$,$=$>>8,p[f++]=$,$=$>>8,p[f++]=$,$=$>>8,p[f++]=$,f}function ae(p,u,f,y,x){yt(u,y,x,p,f,7);let E=Number(u&BigInt(4294967295));p[f+7]=E,E=E>>8,p[f+6]=E,E=E>>8,p[f+5]=E,E=E>>8,p[f+4]=E;let $=Number(u>>BigInt(32)&BigInt(4294967295));return p[f+3]=$,$=$>>8,p[f+2]=$,$=$>>8,p[f+1]=$,$=$>>8,p[f]=$,f+8}a.prototype.writeBigUInt64LE=wt(function(u,f=0){return ue(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=wt(function(u,f=0){return ae(this,u,f,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(u,f,y,x){if(u=+u,f=f>>>0,!x){const se=Math.pow(2,8*y-1);J(this,u,f,y,se-1,-se)}let E=0,$=1,Y=0;for(this[f]=u&255;++E<y&&($*=256);)u<0&&Y===0&&this[f+E-1]!==0&&(Y=1),this[f+E]=(u/$>>0)-Y&255;return f+y},a.prototype.writeIntBE=function(u,f,y,x){if(u=+u,f=f>>>0,!x){const se=Math.pow(2,8*y-1);J(this,u,f,y,se-1,-se)}let E=y-1,$=1,Y=0;for(this[f+E]=u&255;--E>=0&&($*=256);)u<0&&Y===0&&this[f+E+1]!==0&&(Y=1),this[f+E]=(u/$>>0)-Y&255;return f+y},a.prototype.writeInt8=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,1,127,-128),u<0&&(u=255+u+1),this[f]=u&255,f+1},a.prototype.writeInt16LE=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,2,32767,-32768),this[f]=u&255,this[f+1]=u>>>8,f+2},a.prototype.writeInt16BE=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,2,32767,-32768),this[f]=u>>>8,this[f+1]=u&255,f+2},a.prototype.writeInt32LE=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,4,2147483647,-2147483648),this[f]=u&255,this[f+1]=u>>>8,this[f+2]=u>>>16,this[f+3]=u>>>24,f+4},a.prototype.writeInt32BE=function(u,f,y){return u=+u,f=f>>>0,y||J(this,u,f,4,2147483647,-2147483648),u<0&&(u=4294967295+u+1),this[f]=u>>>24,this[f+1]=u>>>16,this[f+2]=u>>>8,this[f+3]=u&255,f+4},a.prototype.writeBigInt64LE=wt(function(u,f=0){return ue(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=wt(function(u,f=0){return ae(this,u,f,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function re(p,u,f,y,x,E){if(f+y>p.length)throw new RangeError("Index out of range");if(f<0)throw new RangeError("Index out of range")}function fe(p,u,f,y,x){return u=+u,f=f>>>0,x||re(p,u,f,4),n.write(p,u,f,y,23,4),f+4}a.prototype.writeFloatLE=function(u,f,y){return fe(this,u,f,!0,y)},a.prototype.writeFloatBE=function(u,f,y){return fe(this,u,f,!1,y)};function Fe(p,u,f,y,x){return u=+u,f=f>>>0,x||re(p,u,f,8),n.write(p,u,f,y,52,8),f+8}a.prototype.writeDoubleLE=function(u,f,y){return Fe(this,u,f,!0,y)},a.prototype.writeDoubleBE=function(u,f,y){return Fe(this,u,f,!1,y)},a.prototype.copy=function(u,f,y,x){if(!a.isBuffer(u))throw new TypeError("argument should be a Buffer");if(y||(y=0),!x&&x!==0&&(x=this.length),f>=u.length&&(f=u.length),f||(f=0),x>0&&x<y&&(x=y),x===y||u.length===0||this.length===0)return 0;if(f<0)throw new RangeError("targetStart out of bounds");if(y<0||y>=this.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("sourceEnd out of bounds");x>this.length&&(x=this.length),u.length-f<x-y&&(x=u.length-f+y);const E=x-y;return this===u&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(f,y,x):Uint8Array.prototype.set.call(u,this.subarray(y,x),f),E},a.prototype.fill=function(u,f,y,x){if(typeof u=="string"){if(typeof f=="string"?(x=f,f=0,y=this.length):typeof y=="string"&&(x=y,y=this.length),x!==void 0&&typeof x!="string")throw new TypeError("encoding must be a string");if(typeof x=="string"&&!a.isEncoding(x))throw new TypeError("Unknown encoding: "+x);if(u.length===1){const $=u.charCodeAt(0);(x==="utf8"&&$<128||x==="latin1")&&(u=$)}}else typeof u=="number"?u=u&255:typeof u=="boolean"&&(u=Number(u));if(f<0||this.length<f||this.length<y)throw new RangeError("Out of range index");if(y<=f)return this;f=f>>>0,y=y===void 0?this.length:y>>>0,u||(u=0);let E;if(typeof u=="number")for(E=f;E<y;++E)this[E]=u;else{const $=a.isBuffer(u)?u:a.from(u,x),Y=$.length;if(Y===0)throw new TypeError('The value "'+u+'" is invalid for argument "value"');for(E=0;E<y-f;++E)this[E+f]=$[E%Y]}return this};const Ke={};function _e(p,u,f){Ke[p]=class extends f{constructor(){super(),Object.defineProperty(this,"message",{value:u.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${p}]`,this.stack,delete this.name}get code(){return p}set code(x){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:x,writable:!0})}toString(){return`${this.name} [${p}]: ${this.message}`}}}_e("ERR_BUFFER_OUT_OF_BOUNDS",function(p){return p?`${p} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),_e("ERR_INVALID_ARG_TYPE",function(p,u){return`The "${p}" argument must be of type number. Received type ${typeof u}`},TypeError),_e("ERR_OUT_OF_RANGE",function(p,u,f){let y=`The value of "${p}" is out of range.`,x=f;return Number.isInteger(f)&&Math.abs(f)>2**32?x=ot(String(f)):typeof f=="bigint"&&(x=String(f),(f>BigInt(2)**BigInt(32)||f<-(BigInt(2)**BigInt(32)))&&(x=ot(x)),x+="n"),y+=` It must be ${u}. Received ${x}`,y},RangeError);function ot(p){let u="",f=p.length;const y=p[0]==="-"?1:0;for(;f>=y+4;f-=3)u=`_${p.slice(f-3,f)}${u}`;return`${p.slice(0,f)}${u}`}function mn(p,u,f){ve(u,"offset"),(p[u]===void 0||p[u+f]===void 0)&&Me(u,p.length-(f+1))}function yt(p,u,f,y,x,E){if(p>f||p<u){const $=typeof u=="bigint"?"n":"";let Y;throw u===0||u===BigInt(0)?Y=`>= 0${$} and < 2${$} ** ${(E+1)*8}${$}`:Y=`>= -(2${$} ** ${(E+1)*8-1}${$}) and < 2 ** ${(E+1)*8-1}${$}`,new Ke.ERR_OUT_OF_RANGE("value",Y,p)}mn(y,x,E)}function ve(p,u){if(typeof p!="number")throw new Ke.ERR_INVALID_ARG_TYPE(u,"number",p)}function Me(p,u,f){throw Math.floor(p)!==p?(ve(p,f),new Ke.ERR_OUT_OF_RANGE("offset","an integer",p)):u<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${u}`,p)}const Bt=/[^+/0-9A-Za-z-_]/g;function gt(p){if(p=p.split("=")[0],p=p.trim().replace(Bt,""),p.length<2)return"";for(;p.length%4!==0;)p=p+"=";return p}function os(p,u){u=u||1/0;let f;const y=p.length;let x=null;const E=[];for(let $=0;$<y;++$){if(f=p.charCodeAt($),f>55295&&f<57344){if(!x){if(f>56319){(u-=3)>-1&&E.push(239,191,189);continue}else if($+1===y){(u-=3)>-1&&E.push(239,191,189);continue}x=f;continue}if(f<56320){(u-=3)>-1&&E.push(239,191,189),x=f;continue}f=(x-55296<<10|f-56320)+65536}else x&&(u-=3)>-1&&E.push(239,191,189);if(x=null,f<128){if((u-=1)<0)break;E.push(f)}else if(f<2048){if((u-=2)<0)break;E.push(f>>6|192,f&63|128)}else if(f<65536){if((u-=3)<0)break;E.push(f>>12|224,f>>6&63|128,f&63|128)}else if(f<1114112){if((u-=4)<0)break;E.push(f>>18|240,f>>12&63|128,f>>6&63|128,f&63|128)}else throw new Error("Invalid code point")}return E}function D0(p){const u=[];for(let f=0;f<p.length;++f)u.push(p.charCodeAt(f)&255);return u}function H0(p,u){let f,y,x;const E=[];for(let $=0;$<p.length&&!((u-=2)<0);++$)f=p.charCodeAt($),y=f>>8,x=f%256,E.push(x),E.push(y);return E}function Ai(p){return t.toByteArray(gt(p))}function lr(p,u,f,y){let x;for(x=0;x<y&&!(x+f>=u.length||x>=p.length);++x)u[x+f]=p[x];return x}function Ze(p,u){return p instanceof u||p!=null&&p.constructor!=null&&p.constructor.name!=null&&p.constructor.name===u.name}function is(p){return p!==p}const G0=function(){const p="0123456789abcdef",u=new Array(256);for(let f=0;f<16;++f){const y=f*16;for(let x=0;x<16;++x)u[y+x]=p[f]+p[x]}return u}();function wt(p){return typeof BigInt>"u"?V0:p}function V0(){throw new Error("BigInt not supported")}})(Sr);const ef="0.1.1";function tf(){return ef}let xe=class Rs extends Error{constructor(t,n={}){const r=(()=>{var c;if(n.cause instanceof Rs){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Rs&&n.cause.docsPath||n.docsPath,i=`https://oxlib.sh${s??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${i}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${tf()}`}),this.cause=n.cause,this.details=r,this.docs=i,this.docsPath=s,this.shortMessage=t}walk(t){return La(this,t)}};function La(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?La(e.cause,t):t?null:e}const Ht=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nf(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Pn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function kt(e,...t){if(!nf(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function rf(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Pn(e.outputLen),Pn(e.blockLen)}function rn(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ja(e,t){kt(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function sf(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function sn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function cs(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Ye(e,t){return e<<32-t|e>>>t}const of=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function af(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function cf(e){for(let t=0;t<e.length;t++)e[t]=af(e[t]);return e}const Bi=of?e=>e:cf;function uf(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Cr(e){return typeof e=="string"&&(e=uf(e)),kt(e),e}function ff(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];kt(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}class wo{}function Da(e){const t=r=>e().update(Cr(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function lf(e=32){if(Ht&&typeof Ht.getRandomValues=="function")return Ht.getRandomValues(new Uint8Array(e));if(Ht&&typeof Ht.randomBytes=="function")return Uint8Array.from(Ht.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function df(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),i=Number(n>>s&o),a=Number(n&o),c=r?4:0,l=r?0:4;e.setUint32(t+c,i,r),e.setUint32(t+l,a,r)}function hf(e,t,n){return e&t^~e&n}function pf(e,t,n){return e&t^e&n^t&n}class bf extends wo{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=cs(this.buffer)}update(t){rn(this),t=Cr(t),kt(t);const{view:n,buffer:r,blockLen:s}=this,o=t.length;for(let i=0;i<o;){const a=Math.min(s-this.pos,o-i);if(a===s){const c=cs(t);for(;s<=o-i;i+=s)this.process(c,i);continue}r.set(t.subarray(i,i+a),this.pos),this.pos+=a,i+=a,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){rn(this),ja(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:i}=this;n[i++]=128,sn(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(r,0),i=0);for(let h=i;h<s;h++)n[h]=0;df(r,s-8,BigInt(this.length*8),o),this.process(r,0);const a=cs(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,d[h],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:i,pos:a}=this;return t.destroyed=i,t.finished=o,t.length=s,t.pos=a,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const xt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),dr=BigInt(2**32-1),$i=BigInt(32);function mf(e,t=!1){return t?{h:Number(e&dr),l:Number(e>>$i&dr)}:{h:Number(e>>$i&dr)|0,l:Number(e&dr)|0}}function yf(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:i,l:a}=mf(e[o],t);[r[o],s[o]]=[i,a]}return[r,s]}const gf=(e,t,n)=>e<<n|t>>>32-n,wf=(e,t,n)=>t<<n|e>>>32-n,xf=(e,t,n)=>t<<n-32|e>>>64-n,vf=(e,t,n)=>e<<n-32|t>>>64-n,Ef=BigInt(0),yn=BigInt(1),If=BigInt(2),Pf=BigInt(7),Af=BigInt(256),Bf=BigInt(113),Ha=[],Ga=[],Va=[];for(let e=0,t=yn,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Ha.push(2*(5*r+n)),Ga.push((e+1)*(e+2)/2%64);let s=Ef;for(let o=0;o<7;o++)t=(t<<yn^(t>>Pf)*Bf)%Af,t&If&&(s^=yn<<(yn<<BigInt(o))-yn);Va.push(s)}const qa=yf(Va,!0),$f=qa[0],Sf=qa[1],Si=(e,t,n)=>n>32?xf(e,t,n):gf(e,t,n),Ti=(e,t,n)=>n>32?vf(e,t,n):wf(e,t,n);function Tf(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let i=0;i<10;i++)n[i]=e[i]^e[i+10]^e[i+20]^e[i+30]^e[i+40];for(let i=0;i<10;i+=2){const a=(i+8)%10,c=(i+2)%10,l=n[c],d=n[c+1],h=Si(l,d,1)^n[a],b=Ti(l,d,1)^n[a+1];for(let m=0;m<50;m+=10)e[i+m]^=h,e[i+m+1]^=b}let s=e[2],o=e[3];for(let i=0;i<24;i++){const a=Ga[i],c=Si(s,o,a),l=Ti(s,o,a),d=Ha[i];s=e[d],o=e[d+1],e[d]=c,e[d+1]=l}for(let i=0;i<50;i+=10){for(let a=0;a<10;a++)n[a]=e[i+a];for(let a=0;a<10;a++)e[i+a]^=~n[(a+2)%10]&n[(a+4)%10]}e[0]^=$f[r],e[1]^=Sf[r]}sn(n)}class xo extends wo{constructor(t,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,Pn(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=sf(this.state)}clone(){return this._cloneInto()}keccak(){Bi(this.state32),Tf(this.state32,this.rounds),Bi(this.state32),this.posOut=0,this.pos=0}update(t){rn(this),t=Cr(t),kt(t);const{blockLen:n,state:r}=this,s=t.length;for(let o=0;o<s;){const i=Math.min(n-this.pos,s-o);for(let a=0;a<i;a++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,n&128&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){rn(this,!1),kt(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const i=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Pn(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(ja(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,sn(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:i}=this;return t||(t=new xo(n,r,s,i,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=i,t.destroyed=this.destroyed,t}}const Cf=(e,t,n)=>Da(()=>new xo(t,e,n)),vo=Cf(1,136,256/8),Rf=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),vt=new Uint32Array(64);class kf extends bf{constructor(t=32){super(64,t,8,!1),this.A=xt[0]|0,this.B=xt[1]|0,this.C=xt[2]|0,this.D=xt[3]|0,this.E=xt[4]|0,this.F=xt[5]|0,this.G=xt[6]|0,this.H=xt[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:i,G:a,H:c}=this;return[t,n,r,s,o,i,a,c]}set(t,n,r,s,o,i,a,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=a|0,this.H=c|0}process(t,n){for(let h=0;h<16;h++,n+=4)vt[h]=t.getUint32(n,!1);for(let h=16;h<64;h++){const b=vt[h-15],m=vt[h-2],g=Ye(b,7)^Ye(b,18)^b>>>3,w=Ye(m,17)^Ye(m,19)^m>>>10;vt[h]=w+vt[h-7]+g+vt[h-16]|0}let{A:r,B:s,C:o,D:i,E:a,F:c,G:l,H:d}=this;for(let h=0;h<64;h++){const b=Ye(a,6)^Ye(a,11)^Ye(a,25),m=d+b+hf(a,c,l)+Rf[h]+vt[h]|0,w=(Ye(r,2)^Ye(r,13)^Ye(r,22))+pf(r,s,o)|0;d=l,l=c,c=a,a=i+m|0,i=o,o=s,s=r,r=m+w|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,d=d+this.H|0,this.set(r,s,o,i,a,c,l,d)}roundClean(){sn(vt)}destroy(){this.set(0,0,0,0,0,0,0,0),sn(this.buffer)}}const Wa=Da(()=>new kf),Nf=Wa,Of="#__bigint";function Eo(e,t,n){return JSON.stringify(e,(r,s)=>typeof t=="function"?t(r,s):typeof s=="bigint"?s.toString()+Of:s,n)}Eo.parseError=e=>e;function Ff(e,t){if(ks(e)>t)throw new Hf({givenSize:ks(e),maxSize:t})}const it={zero:48,nine:57,A:65,F:70,a:97,f:102};function Ci(e){if(e>=it.zero&&e<=it.nine)return e-it.zero;if(e>=it.A&&e<=it.F)return e-(it.A-10);if(e>=it.a&&e<=it.f)return e-(it.a-10)}function _f(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new Gf({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let o=0;o<r;o++){const i=n==="right";s[i?o:r-o-1]=e[i?o:e.length-o-1]}return s}function Io(e,t){if(Er(e)>t)throw new Lf({givenSize:Er(e),maxSize:t})}function Ka(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new jf({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Mf=new TextEncoder,zf=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Za(e,t={}){const{strict:n=!1}=t;if(!e)throw new Ri(e);if(typeof e!="string")throw new Ri(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new ki(e);if(!e.startsWith("0x"))throw new ki(e)}Za.parseError=e=>e;function Po(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}Po.parseError=e=>e;function Ya(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Io(n,t.size),An(n,t.size)):n}Ya.parseError=e=>e;function Ao(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=zf[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Io(r,t.size),Rr(r,t.size)):r}Ao.parseError=e=>e;function Ja(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const l=typeof e=="bigint"?"n":"";throw new Uf({max:o?`${o}${l}`:void 0,min:`${i}${l}`,signed:n,size:r,value:`${e}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?An(c,r):c}Ja.parseError=e=>e;function Xa(e,t={}){return Ao(Mf.encode(e),t)}Xa.parseError=e=>e;function An(e,t){return Ka(e,{dir:"left",size:t})}An.parseError=e=>e;function Rr(e,t){return Ka(e,{dir:"right",size:t})}Rr.parseError=e=>e;function Er(e){return Math.ceil((e.length-2)/2)}Er.parseError=e=>e;function Qa(e,t={}){const{strict:n=!1}=t;try{return Za(e,{strict:n}),!0}catch{return!1}}Qa.parseError=e=>e;let Uf=class extends xe{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}},Ri=class extends xe{constructor(t){super(`Value \`${typeof t=="object"?Eo(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}},ki=class extends xe{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}},Lf=class extends xe{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},jf=class extends xe{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}};const Df=new TextEncoder;function ec(e){if(!(e instanceof Uint8Array)){if(!e)throw new hr(e);if(typeof e!="object")throw new hr(e);if(!("BYTES_PER_ELEMENT"in e))throw new hr(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new hr(e)}}ec.parseError=e=>e;function tc(e){return e instanceof Uint8Array?e:typeof e=="string"?rc(e):nc(e)}tc.parseError=e=>e;function nc(e){return e instanceof Uint8Array?e:new Uint8Array(e)}nc.parseError=e=>e;function rc(e,t={}){const{size:n}=t;let r=e;n&&(Io(e,n),r=Rr(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,i=new Uint8Array(o);for(let a=0,c=0;a<o;a++){const l=Ci(s.charCodeAt(c++)),d=Ci(s.charCodeAt(c++));if(l===void 0||d===void 0)throw new xe(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);i[a]=l*16+d}return i}rc.parseError=e=>e;function sc(e,t={}){const{size:n}=t,r=Df.encode(e);return typeof n=="number"?(Ff(r,n),oc(r,n)):r}sc.parseError=e=>e;function oc(e,t){return _f(e,{dir:"right",size:t})}oc.parseError=e=>e;function ks(e){return e.length}ks.parseError=e=>e;function ic(e){try{return ec(e),!0}catch{return!1}}ic.parseError=e=>e;class hr extends xe{constructor(t){super(`Value \`${typeof t=="object"?Eo(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}let Hf=class extends xe{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Gf=class extends xe{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};function Bo(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=vo(tc(e));return n==="Bytes"?r:Ao(r)}Bo.parseError=e=>e;let Vf=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const qf={checksum:new Vf(8192)},us=qf.checksum,Wf=/^0x[a-fA-F0-9]{40}$/;function $o(e,t={}){const{strict:n=!0}=t;if(!Wf.test(e))throw new Ni({address:e,cause:new Kf});if(n){if(e.toLowerCase()===e)return;if(ac(e)!==e)throw new Ni({address:e,cause:new Zf})}}$o.parseError=e=>e;function ac(e){if(us.has(e))return us.get(e);$o(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=Bo(sc(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const s=`0x${r.join("")}`;return us.set(e,s),s}ac.parseError=e=>e;let Ni=class extends xe{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}},Kf=class extends xe{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}},Zf=class extends xe{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}};const Yf=/^(.*)\[([0-9]*)\]$/,Jf=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Xf=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Bn(e,t){if(e.length!==t.length)throw new el({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(Bn.encode(s,o))}return Po(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const c=r;return $o(c),An(c.toLowerCase(),s?32:0)}if(n==="string")return Xa(r);if(n==="bytes")return r;if(n==="bool")return An(Ya(r),s?32:1);const o=n.match(Xf);if(o){const[c,l,d="256"]=o,h=Number.parseInt(d)/8;return Ja(r,{size:s?32:h,signed:l==="int"})}const i=n.match(Jf);if(i){const[c,l]=i;if(Number.parseInt(l)!==(r.length-2)/2)throw new Qf({expectedSize:Number.parseInt(l),value:r});return Rr(r,s?32:0)}const a=n.match(Yf);if(a&&Array.isArray(r)){const[c,l]=a,d=[];for(let h=0;h<r.length;h++)d.push(t(l,r[h],!0));return d.length===0?"0x":Po(...d)}throw new tl(n)}e.encode=t})(Bn||(Bn={}));Bn.parseError=e=>e;let Qf=class extends xe{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${Er(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}},el=class extends xe{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}},tl=class extends xe{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}};class cc extends wo{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,rf(t);const r=Cr(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=t.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),sn(o)}update(t){return rn(this),this.iHash.update(t),this}digestInto(t){rn(this),kt(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:i,outputLen:a}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=i,t.outputLen=a,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const uc=(e,t,n)=>new cc(e,t).update(n).digest();uc.create=(e,t)=>new cc(e,t);function nl(e){return ic(e)||Qa(e)?So(e):sl(e)}function rl(e){const[t,n]=e.reduce(([r,s],[o,i])=>(r.push(o),s.push(i),[r,s]),[[],[]]);return So(Bn(t,n))}function sl(e){const t=Sr.Buffer.from(e);return So(t)}function So(e){const t=BigInt(Bo(e,{as:"Hex"}))>>8n,n=t.toString(16);return{hash:t,digest:`0x${n.padStart(64,"0")}`}}var fc=e=>!e||typeof e=="string"?nl(e??""):rl(e.types.map((t,n)=>[t,e.values[n]])),lc=e=>e?typeof e=="string"?e:e.types.map((t,n)=>`${t}(${e.values[n]})`).join(","):"";const ol={},Oi=e=>{let t;const n=new Set,r=(d,h)=>{const b=typeof d=="function"?d(t):d;if(!Object.is(b,t)){const m=t;t=h??(typeof b!="object"||b===null)?b:Object.assign({},t,b),n.forEach(g=>g(t,m))}},s=()=>t,c={setState:r,getState:s,getInitialState:()=>l,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(ol?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},l=t=e(r,s,c);return c},il=e=>e?Oi(e):Oi;var dc={exports:{}},K={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var To=Symbol.for("react.transitional.element"),al=Symbol.for("react.portal"),cl=Symbol.for("react.fragment"),ul=Symbol.for("react.strict_mode"),fl=Symbol.for("react.profiler"),ll=Symbol.for("react.consumer"),dl=Symbol.for("react.context"),hl=Symbol.for("react.forward_ref"),pl=Symbol.for("react.suspense"),bl=Symbol.for("react.memo"),hc=Symbol.for("react.lazy"),ml=Symbol.for("react.activity"),Fi=Symbol.iterator;function yl(e){return e===null||typeof e!="object"?null:(e=Fi&&e[Fi]||e["@@iterator"],typeof e=="function"?e:null)}var pc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bc=Object.assign,mc={};function fn(e,t,n){this.props=e,this.context=t,this.refs=mc,this.updater=n||pc}fn.prototype.isReactComponent={};fn.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};fn.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yc(){}yc.prototype=fn.prototype;function Co(e,t,n){this.props=e,this.context=t,this.refs=mc,this.updater=n||pc}var Ro=Co.prototype=new yc;Ro.constructor=Co;bc(Ro,fn.prototype);Ro.isPureReactComponent=!0;var _i=Array.isArray;function Ns(){}var ee={H:null,A:null,T:null,S:null},gc=Object.prototype.hasOwnProperty;function ko(e,t,n){var r=n.ref;return{$$typeof:To,type:e,key:t,ref:r!==void 0?r:null,props:n}}function gl(e,t){return ko(e.type,t,e.props)}function No(e){return typeof e=="object"&&e!==null&&e.$$typeof===To}function wl(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Mi=/\/+/g;function fs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?wl(""+e.key):t.toString(36)}function xl(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(Ns,Ns):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Wt(e,t,n,r,s){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(o){case"bigint":case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case To:case al:i=!0;break;case hc:return i=e._init,Wt(i(e._payload),t,n,r,s)}}if(i)return s=s(e),i=r===""?"."+fs(e,0):r,_i(s)?(n="",i!=null&&(n=i.replace(Mi,"$&/")+"/"),Wt(s,t,n,"",function(l){return l})):s!=null&&(No(s)&&(s=gl(s,n+(s.key==null||e&&e.key===s.key?"":(""+s.key).replace(Mi,"$&/")+"/")+i)),t.push(s)),1;i=0;var a=r===""?".":r+":";if(_i(e))for(var c=0;c<e.length;c++)r=e[c],o=a+fs(r,c),i+=Wt(r,t,n,o,s);else if(c=yl(e),typeof c=="function")for(e=c.call(e),c=0;!(r=e.next()).done;)r=r.value,o=a+fs(r,c++),i+=Wt(r,t,n,o,s);else if(o==="object"){if(typeof e.then=="function")return Wt(xl(e),t,n,r,s);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return i}function pr(e,t,n){if(e==null)return e;var r=[],s=0;return Wt(e,r,"","",function(o){return t.call(n,o,s++)}),r}function vl(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var zi=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},El={map:pr,forEach:function(e,t,n){pr(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return pr(e,function(){t++}),t},toArray:function(e){return pr(e,function(t){return t})||[]},only:function(e){if(!No(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};K.Activity=ml;K.Children=El;K.Component=fn;K.Fragment=cl;K.Profiler=fl;K.PureComponent=Co;K.StrictMode=ul;K.Suspense=pl;K.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ee;K.__COMPILER_RUNTIME={__proto__:null,c:function(e){return ee.H.useMemoCache(e)}};K.cache=function(e){return function(){return e.apply(null,arguments)}};K.cacheSignal=function(){return null};K.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var r=bc({},e.props),s=e.key;if(t!=null)for(o in t.key!==void 0&&(s=""+t.key),t)!gc.call(t,o)||o==="key"||o==="__self"||o==="__source"||o==="ref"&&t.ref===void 0||(r[o]=t[o]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var i=Array(o),a=0;a<o;a++)i[a]=arguments[a+2];r.children=i}return ko(e.type,s,r)};K.createContext=function(e){return e={$$typeof:dl,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:ll,_context:e},e};K.createElement=function(e,t,n){var r,s={},o=null;if(t!=null)for(r in t.key!==void 0&&(o=""+t.key),t)gc.call(t,r)&&r!=="key"&&r!=="__self"&&r!=="__source"&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var a=Array(i),c=0;c<i;c++)a[c]=arguments[c+2];s.children=a}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return ko(e,o,s)};K.createRef=function(){return{current:null}};K.forwardRef=function(e){return{$$typeof:hl,render:e}};K.isValidElement=No;K.lazy=function(e){return{$$typeof:hc,_payload:{_status:-1,_result:e},_init:vl}};K.memo=function(e,t){return{$$typeof:bl,type:e,compare:t===void 0?null:t}};K.startTransition=function(e){var t=ee.T,n={};ee.T=n;try{var r=e(),s=ee.S;s!==null&&s(n,r),typeof r=="object"&&r!==null&&typeof r.then=="function"&&r.then(Ns,zi)}catch(o){zi(o)}finally{t!==null&&n.types!==null&&(t.types=n.types),ee.T=t}};K.unstable_useCacheRefresh=function(){return ee.H.useCacheRefresh()};K.use=function(e){return ee.H.use(e)};K.useActionState=function(e,t,n){return ee.H.useActionState(e,t,n)};K.useCallback=function(e,t){return ee.H.useCallback(e,t)};K.useContext=function(e){return ee.H.useContext(e)};K.useDebugValue=function(){};K.useDeferredValue=function(e,t){return ee.H.useDeferredValue(e,t)};K.useEffect=function(e,t){return ee.H.useEffect(e,t)};K.useEffectEvent=function(e){return ee.H.useEffectEvent(e)};K.useId=function(){return ee.H.useId()};K.useImperativeHandle=function(e,t,n){return ee.H.useImperativeHandle(e,t,n)};K.useInsertionEffect=function(e,t){return ee.H.useInsertionEffect(e,t)};K.useLayoutEffect=function(e,t){return ee.H.useLayoutEffect(e,t)};K.useMemo=function(e,t){return ee.H.useMemo(e,t)};K.useOptimistic=function(e,t){return ee.H.useOptimistic(e,t)};K.useReducer=function(e,t,n){return ee.H.useReducer(e,t,n)};K.useRef=function(e){return ee.H.useRef(e)};K.useState=function(e){return ee.H.useState(e)};K.useSyncExternalStore=function(e,t,n){return ee.H.useSyncExternalStore(e,t,n)};K.useTransition=function(){return ee.H.useTransition()};K.version="19.2.0";dc.exports=K;var Oo=dc.exports;const Il=za(Oo);var wc={exports:{}},xc={},vc={exports:{}},Ec={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var on=Oo;function Pl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Al=typeof Object.is=="function"?Object.is:Pl,Bl=on.useState,$l=on.useEffect,Sl=on.useLayoutEffect,Tl=on.useDebugValue;function Cl(e,t){var n=t(),r=Bl({inst:{value:n,getSnapshot:t}}),s=r[0].inst,o=r[1];return Sl(function(){s.value=n,s.getSnapshot=t,ls(s)&&o({inst:s})},[e,n,t]),$l(function(){return ls(s)&&o({inst:s}),e(function(){ls(s)&&o({inst:s})})},[e]),Tl(n),n}function ls(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Al(e,n)}catch{return!0}}function Rl(e,t){return t()}var kl=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Rl:Cl;Ec.useSyncExternalStore=on.useSyncExternalStore!==void 0?on.useSyncExternalStore:kl;vc.exports=Ec;var Nl=vc.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kr=Oo,Ol=Nl;function Fl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _l=typeof Object.is=="function"?Object.is:Fl,Ml=Ol.useSyncExternalStore,zl=kr.useRef,Ul=kr.useEffect,Ll=kr.useMemo,jl=kr.useDebugValue;xc.useSyncExternalStoreWithSelector=function(e,t,n,r,s){var o=zl(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=Ll(function(){function c(m){if(!l){if(l=!0,d=m,m=r(m),s!==void 0&&i.hasValue){var g=i.value;if(s(g,m))return h=g}return h=m}if(g=h,_l(d,m))return g;var w=r(m);return s!==void 0&&s(g,w)?(d=m,g):(d=m,h=w)}var l=!1,d,h,b=n===void 0?null:n;return[function(){return c(t())},b===null?void 0:function(){return c(b())}]},[t,n,r,s]);var a=Ml(e,o[0],o[1]);return Ul(function(){i.hasValue=!0,i.value=a},[a]),jl(a),a};wc.exports=xc;var Dl=wc.exports;const Hl=za(Dl),Ic={},{useDebugValue:Gl}=Il,{useSyncExternalStoreWithSelector:Vl}=Hl;let Ui=!1;const ql=e=>e;function Wl(e,t=ql,n){(Ic?"production":void 0)!=="production"&&n&&!Ui&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Ui=!0);const r=Vl(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Gl(r),r}const Li=e=>{(Ic?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?il(e):e,n=(r,s)=>Wl(t,r,s);return Object.assign(n,t),n},Kl=e=>e?Li(e):Li;var Zl=typeof window<"u"&&typeof window.document<"u";typeof process<"u"&&process.versions!=null&&process.versions.node!=null;typeof window<"u"&&window.name==="nodejs"||typeof navigator<"u"&&"userAgent"in navigator&&typeof navigator.userAgent=="string"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u";var ke=(e=>(e.ConnectionFailed="connection_failed",e.VerificationRejected="verification_rejected",e.MaxVerificationsReached="max_verifications_reached",e.CredentialUnavailable="credential_unavailable",e.MalformedRequest="malformed_request",e.InvalidNetwork="invalid_network",e.InclusionProofFailed="inclusion_proof_failed",e.InclusionProofPending="inclusion_proof_pending",e.UnexpectedResponse="unexpected_response",e.FailedByHostApp="failed_by_host_app",e.GenericError="generic_error",e))(ke||{}),er=(e=>(e.Orb="orb",e.SecureDocument="secure_document",e.Document="document",e.Device="device",e))(er||{});function Yl(e,t){try{new URL(e)}catch{return{valid:!1,errors:["Failed to parse Bridge URL."]}}const n=new URL(e),r=[];return t&&["localhost","127.0.0.1"].includes(n.hostname)?(console.log("Using staging app_id with localhost bridge_url. Skipping validation."),{valid:!0}):(n.protocol!=="https:"&&r.push("Bridge URL must use HTTPS."),n.port&&r.push("Bridge URL must use the default port (443)."),n.pathname!=="/"&&r.push("Bridge URL must not have a path."),n.search&&r.push("Bridge URL must not have query parameters."),n.hash&&r.push("Bridge URL must not have a fragment."),!n.hostname.endsWith(".worldcoin.org")&&!n.hostname.endsWith(".toolsforhumanity.com")&&console.warn("Bridge URL should be a subdomain of worldcoin.org or toolsforhumanity.com. The user's identity wallet may refuse to connect. This is a temporary measure and may be removed in the future."),r.length?{valid:!1,errors:r}:{valid:!0})}var Jl=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Xl=()=>Zl,Ql=()=>{if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;throw new Error("Unable to locate global object")},br=()=>{const e=Ql();if(typeof e.crypto<"u")return e.crypto;throw new Error("Crypto API not available. For React Native, ensure polyfills are set up properly.")},ji="orb",Xt=e=>Sr.Buffer.from(e).toString("base64"),Fo=e=>Sr.Buffer.from(e,"base64"),ed=e=>{switch(e){case"device":return["orb","device"];case"document":return["document","secure_document","orb"];case"secure_document":return["secure_document","orb"];case"orb":return["orb"];default:throw new Error(`Unknown verification level: ${e}`)}},td=e=>{switch(e){case"orb":return"orb";case"secure_document":return"secure_document";case"document":return"document";case"device":return"device";default:throw new Error(`Unknown credential_type: ${e}`)}},nd=class{constructor(){this.encoder=new TextEncoder,this.decoder=new TextDecoder}async generateKey(){return{iv:window.crypto.getRandomValues(new Uint8Array(12)),key:await window.crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}}async exportKey(e){return Xt(await window.crypto.subtle.exportKey("raw",e))}async encryptRequest(e,t,n){return{iv:Xt(t),payload:Xt(await window.crypto.subtle.encrypt({name:"AES-GCM",iv:t},e,this.encoder.encode(n)))}}async decryptResponse(e,t,n){return this.decoder.decode(await window.crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,Fo(n)))}},rd=class{constructor(){this.encoder=new TextEncoder,this.decoder=new TextDecoder}async generateKey(){const e=br();return{iv:e.getRandomValues(new Uint8Array(12)),key:await e.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}}async exportKey(e){const t=br();return Xt(await t.subtle.exportKey("raw",e))}async encryptRequest(e,t,n){const r=br();return{iv:Xt(t),payload:Xt(await r.subtle.encrypt({name:"AES-GCM",iv:t},e,this.encoder.encode(n)))}}async decryptResponse(e,t,n){const r=br();return this.decoder.decode(await r.subtle.decrypt({name:"AES-GCM",iv:t},e,Fo(n)))}},Gt=null,Nr=()=>{if(Gt)return Gt;if(Xl())return Gt=new nd,Gt;if(Jl())return Gt=new rd,Gt;throw new Error("Unsupported platform")},sd=async()=>Nr().generateKey(),od=async e=>Nr().exportKey(e),id=async(e,t,n)=>Nr().encryptRequest(e,t,n),ad=async(e,t,n)=>Nr().decryptResponse(e,t,n),mr="https://bridge.worldcoin.org",cd=(e,t)=>({iv:null,key:null,result:null,errorCode:null,requestId:null,connectorURI:null,bridge_url:mr,verificationState:"loading_widget",createClient:async({bridge_url:n,app_id:r,verification_level:s,action_description:o,action:i,signal:a,partner:c})=>{const{key:l,iv:d}=await sd();if(n){const m=Yl(n,r.includes("staging"));if(!m.valid)throw console.error(m.errors.join(`
`)),e({verificationState:"failed"}),new Error("Invalid bridge_url. Please check the console for more details.")}const h=await fetch(new URL("/request",n??mr),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(await id(l,d,JSON.stringify({app_id:r,action_description:o,action:lc(i),signal:fc(a).digest,credential_types:ed(s??ji),verification_level:s??ji})))});if(!h.ok)throw e({verificationState:"failed"}),new Error("Failed to create client");const{request_id:b}=await h.json();e({iv:d,key:l,requestId:b,bridge_url:n??mr,verificationState:"awaiting_connection",connectorURI:`https://world.org/verify?t=wld&i=${b}&k=${encodeURIComponent(await od(l))}${n&&n!==mr?`&b=${encodeURIComponent(n)}`:""}${c?`&partner=${encodeURIComponent(!0)}`:""}`})},pollForUpdates:async()=>{const n=t().key;if(!n)throw new Error("No keypair found. Please call `createClient` first.");const r=await fetch(new URL(`/response/${t().requestId}`,t().bridge_url));if(!r.ok)return e({errorCode:"connection_failed",verificationState:"failed"});const{response:s,status:o}=await r.json();if(o!="completed")return e({verificationState:o=="retrieved"?"awaiting_app":"awaiting_connection"});let i=JSON.parse(await ad(n,Fo(s.iv),s.payload));if("error_code"in i)return e({errorCode:i.error_code,verificationState:"failed"});"credential_type"in i&&(i={verification_level:td(i.credential_type),...i}),e({result:i,key:null,requestId:null,connectorURI:null,verificationState:"confirmed"})},reset:()=>{e({iv:null,key:null,result:null,errorCode:null,requestId:null,connectorURI:null,verificationState:"loading_widget"})}});Kl(cd);const ud="1.1.0";let Pe=class Os extends Error{constructor(t,n={}){var i;const r=n.cause instanceof Os?n.cause.details:(i=n.cause)!=null&&i.message?n.cause.message:n.details,s=n.cause instanceof Os&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${ud}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};function mt(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const Pc=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Ac=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Bc=/^\(.+?\).*?$/,Di=/^tuple(?<array>(\[(\d*)\])*)$/;function Fs(e){let t=e.type;if(Di.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const o=e.components[s];t+=Fs(o),s<n-1&&(t+=", ")}const r=mt(Di,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,Fs({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function Kt(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=Fs(s),r!==n-1&&(t+=", ")}return t}function Ir(e){var t;return e.type==="function"?`function ${e.name}(${Kt(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${(t=e.outputs)!=null&&t.length?` returns (${Kt(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${Kt(e.inputs)})`:e.type==="error"?`error ${e.name}(${Kt(e.inputs)})`:e.type==="constructor"?`constructor(${Kt(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const $c=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function fd(e){return $c.test(e)}function ld(e){return mt($c,e)}const Sc=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function dd(e){return Sc.test(e)}function hd(e){return mt(Sc,e)}const Tc=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function pd(e){return Tc.test(e)}function bd(e){return mt(Tc,e)}const Cc=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Or(e){return Cc.test(e)}function md(e){return mt(Cc,e)}const Rc=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function yd(e){return Rc.test(e)}function gd(e){return mt(Rc,e)}const kc=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function wd(e){return kc.test(e)}function xd(e){return mt(kc,e)}const vd=/^receive\(\) external payable$/;function Ed(e){return vd.test(e)}const Hi=new Set(["memory","indexed","storage","calldata"]),Id=new Set(["indexed"]),_s=new Set(["calldata","memory","storage"]);class Pd extends Pe{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Ad extends Pe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Bd extends Pe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class $d extends Pe{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class Sd extends Pe{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Td extends Pe{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Cd extends Pe{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class Rd extends Pe{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class kd extends Pe{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ln extends Pe{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Nd extends Pe{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Od extends Pe{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Fd extends Pe{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class _d extends Pe{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Md(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const i of s[1])o+=`[${i.type}${i.name?`:${i.name}`:""}]`;r+=`(${s[0]}{${o}})`}return t?`${t}:${e}${r}`:e}const ds=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Ms(e,t={}){if(pd(e))return zd(e,t);if(dd(e))return Ud(e,t);if(fd(e))return Ld(e,t);if(yd(e))return jd(e,t);if(wd(e))return Dd(e);if(Ed(e))return{type:"receive",stateMutability:"payable"};throw new Nd({signature:e})}function zd(e,t={}){const n=bd(e);if(!n)throw new ln({signature:e,type:"function"});const r=Be(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(pt(r[a],{modifiers:_s,structs:t,type:"function"}));const i=[];if(n.returns){const a=Be(n.returns),c=a.length;for(let l=0;l<c;l++)i.push(pt(a[l],{modifiers:_s,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:i}}function Ud(e,t={}){const n=hd(e);if(!n)throw new ln({signature:e,type:"event"});const r=Be(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(pt(r[i],{modifiers:Id,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Ld(e,t={}){const n=ld(e);if(!n)throw new ln({signature:e,type:"error"});const r=Be(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(pt(r[i],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function jd(e,t={}){const n=gd(e);if(!n)throw new ln({signature:e,type:"constructor"});const r=Be(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(pt(r[i],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function Dd(e){const t=xd(e);if(!t)throw new ln({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const Hd=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Gd=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Vd=/^u?int$/;function pt(e,t){var h,b;const n=Md(e,t==null?void 0:t.type,t==null?void 0:t.structs);if(ds.has(n))return ds.get(n);const r=Bc.test(e),s=mt(r?Gd:Hd,e);if(!s)throw new Sd({param:e});if(s.name&&Wd(s.name))throw new Td({param:e,name:s.name});const o=s.name?{name:s.name}:{},i=s.modifier==="indexed"?{indexed:!0}:{},a=(t==null?void 0:t.structs)??{};let c,l={};if(r){c="tuple";const m=Be(s.type),g=[],w=m.length;for(let B=0;B<w;B++)g.push(pt(m[B],{structs:a}));l={components:g}}else if(s.type in a)c="tuple",l={components:a[s.type]};else if(Vd.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,(t==null?void 0:t.type)!=="struct"&&!Nc(c))throw new Bd({type:c});if(s.modifier){if(!((b=(h=t==null?void 0:t.modifiers)==null?void 0:h.has)!=null&&b.call(h,s.modifier)))throw new Cd({param:e,type:t==null?void 0:t.type,modifier:s.modifier});if(_s.has(s.modifier)&&!Kd(c,!!s.array))throw new Rd({param:e,type:t==null?void 0:t.type,modifier:s.modifier})}const d={type:`${c}${s.array??""}`,...o,...i,...l};return ds.set(n,d),d}function Be(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const i=e[o],a=e.slice(o+1);switch(i){case",":return r===0?Be(a,[...t,n.trim()]):Be(a,t,`${n}${i}`,r);case"(":return Be(a,t,`${n}${i}`,r+1);case")":return Be(a,t,`${n}${i}`,r-1);default:return Be(a,t,`${n}${i}`,r)}}if(n==="")return t;if(r!==0)throw new _d({current:n,depth:r});return t.push(n.trim()),t}function Nc(e){return e==="address"||e==="bool"||e==="function"||e==="string"||Pc.test(e)||Ac.test(e)}const qd=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function Wd(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||Pc.test(e)||Ac.test(e)||qd.test(e)}function Kd(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function _o(e){const t={},n=e.length;for(let i=0;i<n;i++){const a=e[i];if(!Or(a))continue;const c=md(a);if(!c)throw new ln({signature:a,type:"struct"});const l=c.properties.split(";"),d=[],h=l.length;for(let b=0;b<h;b++){const g=l[b].trim();if(!g)continue;const w=pt(g,{type:"struct"});d.push(w)}if(!d.length)throw new Od({signature:a});t[c.name]=d}const r={},s=Object.entries(t),o=s.length;for(let i=0;i<o;i++){const[a,c]=s[i];r[a]=Oc(c,t)}return r}const Zd=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Oc(e,t,n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const i=e[o];if(Bc.test(i.type))r.push(i);else{const c=mt(Zd,i.type);if(!(c!=null&&c.type))throw new kd({abiParameter:i});const{array:l,type:d}=c;if(d in t){if(n.has(d))throw new Fd({type:d});r.push({...i,type:`tuple${l??""}`,components:Oc(t[d]??[],t,new Set([...n,d]))})}else if(Nc(d))r.push(i);else throw new Ad({type:d})}}return r}function Fc(e){const t=_o(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];Or(o)||n.push(Ms(o,t))}return n}function Gi(e){let t;if(typeof e=="string")t=Ms(e);else{const n=_o(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(!Or(o)){t=Ms(o,n);break}}}if(!t)throw new Pd({signature:e});return t}function Vi(e){const t=[];if(typeof e=="string"){const n=Be(e),r=n.length;for(let s=0;s<r;s++)t.push(pt(n[s],{modifiers:Hi}))}else{const n=_o(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(Or(o))continue;const i=Be(o),a=i.length;for(let c=0;c<a;c++)t.push(pt(i[c],{modifiers:Hi,structs:n}))}}if(t.length===0)throw new $d({params:e});return t}function W(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}function Le(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new ch(e.type);return`${e.name}(${Fr(e.inputs,{includeName:t})})`}function Fr(e,{includeName:t=!1}={}){return e?e.map(n=>Yd(n,{includeName:t})).join(t?", ":","):""}function Yd(e,{includeName:t}){return e.type.startsWith("tuple")?`(${Fr(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function tt(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function ne(e){return tt(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const _c="2.39.0";let gn={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${_c}`},S=class zs extends Error{constructor(t,n={}){var a;const r=(()=>{var c;return n.cause instanceof zs?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof zs&&n.cause.docsPath||n.docsPath,o=(a=gn.getDocsUrl)==null?void 0:a.call(gn,{...n,docsPath:s}),i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...gn.version?[`Version: ${gn.version}`]:[]].join(`
`);super(i,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=_c}walk(t){return Mc(this,t)}};function Mc(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Mc(e.cause,t):t?null:e}class Jd extends S{constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class qi extends S{constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class zc extends S{constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${Fr(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class tr extends S{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Xd extends S{constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Qd extends S{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${ne(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class eh extends S{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class th extends S{constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class Wi extends S{constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Uc extends S{constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class nh extends S{constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Lc extends S{constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class Ki extends S{constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class an extends S{constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class jc extends S{constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class rh extends S{constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class sh extends S{constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${Le(t.abiItem)}\`, and`,`\`${n.type}\` in \`${Le(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let oh=class extends S{constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class $n extends S{constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${Fr(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class _r extends S{constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${Le(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class ih extends S{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class ah extends S{constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Dc=class extends S{constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class ch extends S{constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class uh extends S{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let Hc=class extends S{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},Gc=class extends S{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class Zi extends S{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function dn(e,{dir:t,size:n=32}={}){return typeof e=="string"?Et(e,{dir:t,size:n}):fh(e,{dir:t,size:n})}function Et(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new Gc({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function fh(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new Gc({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=t==="right";r[o?s:n-s-1]=e[o?s:e.length-s-1]}return r}let Vc=class extends S{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},lh=class extends S{constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class dh extends S{constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let hh=class extends S{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}};function ze(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Ge(e,{size:t}){if(ne(e)>t)throw new hh({givenSize:ne(e),maxSize:t})}function ye(e,t={}){const{signed:n}=t;t.size&&Ge(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function ph(e,t={}){let n=e;if(t.size&&(Ge(n,{size:t.size}),n=ze(n)),ze(n)==="0x00")return!1;if(ze(n)==="0x01")return!0;throw new dh(n)}function nt(e,t={}){return Number(ye(e,t))}const bh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function $e(e,t={}){return typeof e=="number"||typeof e=="bigint"?_(e,t):typeof e=="string"?Sn(e,t):typeof e=="boolean"?qc(e,t):ie(e,t)}function qc(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Ge(n,{size:t.size}),dn(n,{size:t.size})):n}function ie(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=bh[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Ge(r,{size:t.size}),dn(r,{dir:"right",size:t.size})):r}function _(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const c=typeof e=="bigint"?"n":"";throw new Vc({max:o?`${o}${c}`:void 0,min:`${i}${c}`,signed:n,size:r,value:`${e}${c}`})}const a=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?dn(a,{size:r}):a}const mh=new TextEncoder;function Sn(e,t={}){const n=mh.encode(e);return ie(n,t)}const yh=new TextEncoder;function hn(e,t={}){return typeof e=="number"||typeof e=="bigint"?wh(e,t):typeof e=="boolean"?gh(e,t):tt(e)?rt(e,t):Ct(e,t)}function gh(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Ge(n,{size:t.size}),dn(n,{size:t.size})):n}const at={zero:48,nine:57,A:65,F:70,a:97,f:102};function Yi(e){if(e>=at.zero&&e<=at.nine)return e-at.zero;if(e>=at.A&&e<=at.F)return e-(at.A-10);if(e>=at.a&&e<=at.f)return e-(at.a-10)}function rt(e,t={}){let n=e;t.size&&(Ge(n,{size:t.size}),n=dn(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let i=0,a=0;i<s;i++){const c=Yi(r.charCodeAt(a++)),l=Yi(r.charCodeAt(a++));if(c===void 0||l===void 0)throw new S(`Invalid byte sequence ("${r[a-2]}${r[a-1]}" in "${r}").`);o[i]=c*16+l}return o}function wh(e,t){const n=_(e,t);return rt(n)}function Ct(e,t={}){const n=yh.encode(e);return typeof t.size=="number"?(Ge(n,{size:t.size}),dn(n,{dir:"right",size:t.size})):n}function he(e,t){const n=t||"hex",r=vo(tt(e,{strict:!1})?hn(e):e);return n==="bytes"?r:$e(r)}const xh=e=>he(hn(e));function vh(e){return xh(e)}function Eh(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function",""].includes(s))s="";else if(s+=a,a===")"){o=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!o)throw new S("Unable to normalize signature.");return s}const Ih=e=>{const t=typeof e=="string"?e:Ir(e);return Eh(t)};function Wc(e){return vh(Ih(e))}const Mr=Wc;let we=class extends S{constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},Mo=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const hs=new Mo(8192);function zr(e,t){if(hs.has(`${e}.${t}`))return hs.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=he(Ct(n),"bytes"),s=n.split("");for(let i=0;i<40;i+=2)r[i>>1]>>4>=8&&s[i]&&(s[i]=s[i].toUpperCase()),(r[i>>1]&15)>=8&&s[i+1]&&(s[i+1]=s[i+1].toUpperCase());const o=`0x${s.join("")}`;return hs.set(`${e}.${t}`,o),o}function Kc(e,t){if(!ce(e,{strict:!1}))throw new we({address:e});return zr(e,t)}const Ph=/^0x[a-fA-F0-9]{40}$/,ps=new Mo(8192);function ce(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(ps.has(r))return ps.get(r);const s=Ph.test(e)?e.toLowerCase()===e?!0:n?zr(e)===e:!0:!1;return ps.set(r,s),s}function st(e){return typeof e[0]=="string"?Ve(e):Ah(e)}function Ah(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function Ve(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Nt(e,t,n,{strict:r}={}){return tt(e,{strict:!1})?Bh(e,t,n,{strict:r}):Jc(e,t,n,{strict:r})}function Zc(e,t){if(typeof t=="number"&&t>0&&t>ne(e)-1)throw new Hc({offset:t,position:"start",size:ne(e)})}function Yc(e,t,n){if(typeof t=="number"&&typeof n=="number"&&ne(e)!==n-t)throw new Hc({offset:n,position:"end",size:ne(e)})}function Jc(e,t,n,{strict:r}={}){Zc(e,t);const s=e.slice(t,n);return r&&Yc(s,t,n),s}function Bh(e,t,n,{strict:r}={}){Zc(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&Yc(s,t,n),s}const $h=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Xc=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function At(e,t){if(e.length!==t.length)throw new eh({expectedLength:e.length,givenLength:t.length});const n=Sh({params:e,values:t}),r=Uo(n);return r.length===0?"0x":r}function Sh({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(zo({param:e[r],value:t[r]}));return n}function zo({param:e,value:t}){const n=Lo(e.type);if(n){const[r,s]=n;return Ch(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return Fh(t,{param:e});if(e.type==="address")return Th(t);if(e.type==="bool")return kh(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=Xc.exec(e.type)??[];return Nh(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return Rh(t,{param:e});if(e.type==="string")return Oh(t);throw new ih(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function Uo(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?t+=32:t+=ne(a)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?(n.push(_(t+s,{size:32})),r.push(a),s+=ne(a)):n.push(a)}return st([...n,...r])}function Th(e){if(!ce(e))throw new we({address:e});return{dynamic:!1,encoded:Et(e.toLowerCase())}}function Ch(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Dc(e);if(!r&&e.length!==t)throw new Xd({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let i=0;i<e.length;i++){const a=zo({param:n,value:e[i]});a.dynamic&&(s=!0),o.push(a)}if(r||s){const i=Uo(o);if(r){const a=_(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?st([a,i]):a}}if(s)return{dynamic:!0,encoded:i}}return{dynamic:!1,encoded:st(o.map(({encoded:i})=>i))}}function Rh(e,{param:t}){const[,n]=t.type.split("bytes"),r=ne(e);if(!n){let s=e;return r%32!==0&&(s=Et(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:st([Et(_(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new Qd({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:Et(e,{dir:"right"})}}function kh(e){if(typeof e!="boolean")throw new S(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Et(qc(e))}}function Nh(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Vc({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:_(e,{size:32,signed:t})}}function Oh(e){const t=Sn(e),n=Math.ceil(ne(t)/32),r=[];for(let s=0;s<n;s++)r.push(Et(Nt(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:st([Et(_(ne(t),{size:32})),...r])}}function Fh(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],i=Array.isArray(e)?s:o.name,a=zo({param:o,value:e[i]});r.push(a),a.dynamic&&(n=!0)}return{dynamic:n,encoded:n?Uo(r):st(r.map(({encoded:s})=>s))}}function Lo(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const nr=e=>Nt(Wc(e),0,4);function Lt(e){const{abi:t,args:n=[],name:r}=e,s=tt(r,{strict:!1}),o=t.filter(a=>s?a.type==="function"?nr(a)===r:a.type==="event"?Mr(a)===r:!1:"name"in a&&a.name===r);if(o.length===0)return;if(o.length===1)return o[0];let i;for(const a of o){if(!("inputs"in a))continue;if(!n||n.length===0){if(!a.inputs||a.inputs.length===0)return a;continue}if(!a.inputs||a.inputs.length===0||a.inputs.length!==n.length)continue;if(n.every((l,d)=>{const h="inputs"in a&&a.inputs[d];return h?Us(l,h):!1})){if(i&&"inputs"in i&&i.inputs){const l=Qc(a.inputs,i.inputs,n);if(l)throw new sh({abiItem:a,type:l[0]},{abiItem:i,type:l[1]})}i=a}}return i||o[0]}function Us(e,t){const n=typeof e,r=t.type;switch(r){case"address":return ce(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>Us(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Us(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Qc(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Qc(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?ce(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?ce(n[r],{strict:!1}):!1)return i}}const Ji="/docs/contract/encodeEventTopics";function rr(e){var c;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const l=Lt({abi:t,name:n});if(!l)throw new Ki(n,{docsPath:Ji});s=l}if(s.type!=="event")throw new Ki(void 0,{docsPath:Ji});const o=Le(s),i=Mr(o);let a=[];if(r&&"inputs"in s){const l=(c=s.inputs)==null?void 0:c.filter(h=>"indexed"in h&&h.indexed),d=Array.isArray(r)?r:Object.values(r).length>0?(l==null?void 0:l.map(h=>r[h.name]))??[]:[];d.length>0&&(a=(l==null?void 0:l.map((h,b)=>Array.isArray(d[b])?d[b].map((m,g)=>Xi({param:h,value:d[b][g]})):typeof d[b]<"u"&&d[b]!==null?Xi({param:h,value:d[b]}):null))??[])}return[i,...a]}function Xi({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return he(hn(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new uh(e.type);return At([e],[t])}function Ur(e,{method:t}){var r,s;const n={};return e.transport.type==="fallback"&&((s=(r=e.transport).onResponse)==null||s.call(r,({method:o,response:i,status:a,transport:c})=>{a==="success"&&t===o&&(n[i]=c.request)})),o=>n[o]||e.request}async function eu(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:i,strict:a,toBlock:c}=t,l=Ur(e,{method:"eth_newFilter"}),d=o?rr({abi:r,args:s,eventName:o}):void 0,h=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof i=="bigint"?_(i):i,toBlock:typeof c=="bigint"?_(c):c,topics:d}]});return{abi:r,args:s,eventName:o,id:h,request:l(h),strict:!!a,type:"event"}}function qe(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const Qi="/docs/contract/encodeFunctionData";function _h(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=Lt({abi:t,args:n,name:r});if(!o)throw new an(r,{docsPath:Qi});s=o}if(s.type!=="function")throw new an(void 0,{docsPath:Qi});return{abi:[s],functionName:nr(Le(s))}}function We(e){const{args:t}=e,{abi:n,functionName:r}=(()=>{var a;return e.abi.length===1&&((a=e.functionName)!=null&&a.startsWith("0x"))?e:_h(e)})(),s=n[0],o=r,i="inputs"in s&&s.inputs?At(s.inputs,t??[]):void 0;return Ve([o,i??"0x"])}const Mh={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},tu={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},zh={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let ea=class extends S{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},nu=class extends S{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},Uh=class extends S{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}};const Lh={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Uh({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new nu({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new ea({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new ea({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function jo(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(Lh);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function jh(e,t={}){typeof t.size<"u"&&Ge(e,{size:t.size});const n=ie(e,t);return ye(n,t)}function Dh(e,t={}){let n=e;if(typeof t.size<"u"&&(Ge(n,{size:t.size}),n=ze(n)),n.length>1||n[0]>1)throw new lh(n);return!!n[0]}function dt(e,t={}){typeof t.size<"u"&&Ge(e,{size:t.size});const n=ie(e,t);return nt(n,t)}function Hh(e,t={}){let n=e;return typeof t.size<"u"&&(Ge(n,{size:t.size}),n=ze(n,{dir:"right"})),new TextDecoder().decode(n)}function pn(e,t){const n=typeof t=="string"?rt(t):t,r=jo(n);if(ne(n)===0&&e.length>0)throw new tr;if(ne(t)&&ne(t)<32)throw new zc({data:typeof t=="string"?t:ie(t),params:e,size:ne(t)});let s=0;const o=[];for(let i=0;i<e.length;++i){const a=e[i];r.setPosition(s);const[c,l]=Qt(r,a,{staticPosition:0});s+=l,o.push(c)}return o}function Qt(e,t,{staticPosition:n}){const r=Lo(t.type);if(r){const[s,o]=r;return Vh(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return Zh(e,t,{staticPosition:n});if(t.type==="address")return Gh(e);if(t.type==="bool")return qh(e);if(t.type.startsWith("bytes"))return Wh(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Kh(e,t);if(t.type==="string")return Yh(e,{staticPosition:n});throw new ah(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const ta=32,Ls=32;function Gh(e){const t=e.readBytes(32);return[zr(ie(Jc(t,-20))),32]}function Vh(e,t,{length:n,staticPosition:r}){if(!n){const i=dt(e.readBytes(Ls)),a=r+i,c=a+ta;e.setPosition(a);const l=dt(e.readBytes(ta)),d=Tn(t);let h=0;const b=[];for(let m=0;m<l;++m){e.setPosition(c+(d?m*32:h));const[g,w]=Qt(e,t,{staticPosition:c});h+=w,b.push(g)}return e.setPosition(r+32),[b,32]}if(Tn(t)){const i=dt(e.readBytes(Ls)),a=r+i,c=[];for(let l=0;l<n;++l){e.setPosition(a+l*32);const[d]=Qt(e,t,{staticPosition:a});c.push(d)}return e.setPosition(r+32),[c,32]}let s=0;const o=[];for(let i=0;i<n;++i){const[a,c]=Qt(e,t,{staticPosition:r+s});s+=c,o.push(a)}return[o,s]}function qh(e){return[Dh(e.readBytes(32),{size:32}),32]}function Wh(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=dt(e.readBytes(32));e.setPosition(n+i);const a=dt(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[ie(c),32]}return[ie(e.readBytes(Number.parseInt(s,10),32)),32]}function Kh(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?jh(s,{signed:n}):dt(s,{signed:n}),32]}function Zh(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:i})=>!i),s=r?[]:{};let o=0;if(Tn(t)){const i=dt(e.readBytes(Ls)),a=n+i;for(let c=0;c<t.components.length;++c){const l=t.components[c];e.setPosition(a+o);const[d,h]=Qt(e,l,{staticPosition:a});o+=h,s[r?c:l==null?void 0:l.name]=d}return e.setPosition(n+32),[s,32]}for(let i=0;i<t.components.length;++i){const a=t.components[i],[c,l]=Qt(e,a,{staticPosition:n});s[r?i:a==null?void 0:a.name]=c,o+=l}return[s,o]}function Yh(e,{staticPosition:t}){const n=dt(e.readBytes(32)),r=t+n;e.setPosition(r);const s=dt(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=Hh(ze(o));return e.setPosition(t+32),[i,32]}function Tn(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(Tn);const n=Lo(e.type);return!!(n&&Tn({...e,type:n[1]}))}function Jh(e){const{abi:t,data:n}=e,r=Nt(n,0,4);if(r==="0x")throw new tr;const o=[...t||[],tu,zh].find(i=>i.type==="error"&&r===nr(Le(i)));if(!o)throw new Uc(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?pn(o.inputs,Nt(n,4)):void 0,errorName:o.name}}const pe=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function ru({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?pe(t[o]):t[o]}`).join(", ")})`}const Xh={gwei:9,wei:18},Qh={ether:-9,wei:9};function su(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,o]=[n.slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}function ou(e,t="wei"){return su(e,Xh[t])}function Ue(e,t="wei"){return su(e,Qh[t])}class ep extends S{constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class tp extends S{constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function na(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function np(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=na(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=na(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function Lr(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class rp extends S{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class sp extends S{constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class op extends S{constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",Lr(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class ip extends S{constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class iu extends S{constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let i="Transaction";r&&o!==void 0&&(i=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(i=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(i=`Transaction at block number "${n}" at index "${o}"`),s&&(i=`Transaction with hash "${s}"`),super(`${i} could not be found.`,{name:"TransactionNotFoundError"})}}class au extends S{constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class ap extends S{constructor({receipt:t}){super(`Transaction with hash "${t.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=t}}class cp extends S{constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const up=e=>e,Do=e=>e;class cu extends S{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:d,to:h,value:b,stateOverride:m}){var B;const g=n?qe(n):void 0;let w=Lr({from:g==null?void 0:g.address,to:h,value:typeof b<"u"&&`${ou(b)} ${((B=s==null?void 0:s.nativeCurrency)==null?void 0:B.symbol)||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${Ue(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ue(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Ue(l)} gwei`,nonce:d});m&&(w+=`
${np(m)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",w].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class uu extends S{constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:i,sender:a}){const c=Lt({abi:n,args:r,name:i}),l=c?ru({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,d=c?Le(c,{includeName:!0}):void 0,h=Lr({address:s&&up(s),function:d,args:l&&l!=="()"&&`${[...Array((i==null?void 0:i.length)??0).keys()].map(()=>" ").join("")}${l}`,sender:a});super(t.shortMessage||`An unknown error occurred while executing the contract function "${i}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],h&&"Contract Call:",h].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=i,this.sender=a}}class js extends S{constructor({abi:t,data:n,functionName:r,message:s}){let o,i,a,c;if(n&&n!=="0x")try{i=Jh({abi:t,data:n});const{abiItem:d,errorName:h,args:b}=i;if(h==="Error")c=b[0];else if(h==="Panic"){const[m]=b;c=Mh[m]}else{const m=d?Le(d,{includeName:!0}):void 0,g=d&&b?ru({abiItem:d,args:b,includeFunctionName:!1,includeName:!1}):void 0;a=[m?`Error: ${m}`:"",g&&g!=="()"?`       ${[...Array((h==null?void 0:h.length)??0).keys()].map(()=>" ").join("")}${g}`:""]}}catch(d){o=d}else s&&(c=s);let l;o instanceof Uc&&(l=o.signature,a=[`Unable to decode signature "${l}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${l}.`]),super(c&&c!=="execution reverted"||l?[`The contract function "${r}" reverted with the following ${l?"signature":"reason"}:`,c||l].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:a,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=i,this.raw=n,this.reason=c,this.signature=l}}class fp extends S{constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class lp extends S{constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class jr extends S{constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class En extends S{constructor({body:t,cause:n,details:r,headers:s,status:o,url:i}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${Do(i)}`,t&&`Request body: ${pe(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=o,this.url=i}}class Ho extends S{constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${Do(r)}`,`Request body: ${pe(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data}}class ra extends S{constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Do(n)}`,`Request body: ${pe(t)}`],name:"TimeoutError"})}}const dp=-1;class Ae extends S{constructor(t,{code:n,docsPath:r,metaMessages:s,name:o,shortMessage:i}){super(i,{cause:t,docsPath:r,metaMessages:s||(t==null?void 0:t.metaMessages),name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||t.name,this.code=t instanceof Ho?t.code:n??dp}}class Te extends Ae{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class Cn extends Ae{constructor(t){super(t,{code:Cn.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(Cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Rn extends Ae{constructor(t){super(t,{code:Rn.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Rn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class kn extends Ae{constructor(t,{method:n}={}){super(t,{code:kn.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Nn extends Ae{constructor(t){super(t,{code:Nn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Nn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Ot extends Ae{constructor(t){super(t,{code:Ot.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Ot,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class Ft extends Ae{constructor(t){super(t,{code:Ft.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Ft,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class On extends Ae{constructor(t){super(t,{code:On.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(On,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class Fn extends Ae{constructor(t){super(t,{code:Fn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(Fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class _n extends Ae{constructor(t){super(t,{code:_n.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(_n,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class St extends Ae{constructor(t,{method:n}={}){super(t,{code:St.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(St,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class cn extends Ae{constructor(t){super(t,{code:cn.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class Mn extends Ae{constructor(t){super(t,{code:Mn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(Mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class en extends Te{constructor(t){super(t,{code:en.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(en,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class zn extends Te{constructor(t){super(t,{code:zn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Un extends Te{constructor(t,{method:n}={}){super(t,{code:Un.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Un,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Ln extends Te{constructor(t){super(t,{code:Ln.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class jn extends Te{constructor(t){super(t,{code:jn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Dn extends Te{constructor(t){super(t,{code:Dn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class Hn extends Te{constructor(t){super(t,{code:Hn.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(Hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Gn extends Te{constructor(t){super(t,{code:Gn.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Vn extends Te{constructor(t){super(t,{code:Vn.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class qn extends Te{constructor(t){super(t,{code:qn.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class Wn extends Te{constructor(t){super(t,{code:Wn.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(Wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class Kn extends Te{constructor(t){super(t,{code:Kn.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(Kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Zn extends Te{constructor(t){super(t,{code:Zn.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class hp extends Ae{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const pp=3;function un(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:i}){const a=e instanceof jr?e:e instanceof S?e.walk(g=>"data"in g)||e.walk():{},{code:c,data:l,details:d,message:h,shortMessage:b}=a,m=e instanceof tr?new fp({functionName:o}):[pp,Ot.code].includes(c)&&(l||d||h||b)?new js({abi:t,data:typeof l=="object"?l.data:l,functionName:o,message:a instanceof Ho?d:b??h}):e;return new uu(m,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:i})}function bp(e){const t=he(`0x${e.substring(4)}`).substring(26);return zr(`0x${t}`)}const mp="modulepreload",yp=function(e){return"/"+e},sa={},fu=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=yp(c),c in sa)return;sa[c]=!0;const l=c.endsWith(".css"),d=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=l?"stylesheet":mp,l||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),l)return new Promise((b,m)=>{h.addEventListener("load",b),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})};async function gp({hash:e,signature:t}){const n=tt(e)?e:$e(e),{secp256k1:r}=await fu(async()=>{const{secp256k1:i}=await Promise.resolve().then(()=>Jm);return{secp256k1:i}},void 0);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:l,s:d,v:h,yParity:b}=t,m=Number(b??h),g=oa(m);return new r.Signature(ye(l),ye(d)).addRecoveryBit(g)}const i=tt(t)?t:$e(t);if(ne(i)!==65)throw new Error("invalid signature length");const a=nt(`0x${i.slice(130)}`),c=oa(a);return r.Signature.fromCompact(i.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function oa(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function lu({hash:e,signature:t}){return bp(await gp({hash:e,signature:t}))}function It(e,t="hex"){const n=du(e),r=jo(new Uint8Array(n.length));return n.encode(r),t==="hex"?ie(r.bytes):r.bytes}function du(e){return Array.isArray(e)?wp(e.map(t=>du(t))):xp(e)}function wp(e){const t=e.reduce((s,o)=>s+o.length,0),n=hu(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function xp(e){const t=typeof e=="string"?rt(e):e,n=hu(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function hu(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new S("Length is too large.")}function vp(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,o=he(Ve(["0x05",It([t?_(t):"0x",s,n?_(n):"0x"])]));return r==="bytes"?rt(o):o}async function pu(e){const{authorization:t,signature:n}=e;return lu({hash:vp(t),signature:n??t})}class Ep extends S{constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:i,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:d,to:h,value:b}){var g;const m=Lr({from:n==null?void 0:n.address,to:h,value:typeof b<"u"&&`${ou(b)} ${((g=s==null?void 0:s.nativeCurrency)==null?void 0:g.symbol)||"ETH"}`,data:o,gas:i,gasPrice:typeof a<"u"&&`${Ue(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ue(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Ue(l)} gwei`,nonce:d});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",m].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Zt extends S{constructor({cause:t,message:n}={}){var s;const r=(s=n==null?void 0:n.replace("execution reverted: ",""))==null?void 0:s.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(Zt,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(Zt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class _t extends S{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Ue(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(_t,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Ds extends S{constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Ue(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(Ds,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Hs extends S{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(Hs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Gs extends S{constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(Gs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class Vs extends S{constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(Vs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class qs extends S{constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(qs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Ws extends S{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Ws,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class Ks extends S{constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(Ks,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Zs extends S{constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Zs,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class Yn extends S{constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Ue(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Ue(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(Yn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class Dr extends S{constructor({cause:t}){super(`An error occurred while executing: ${t==null?void 0:t.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function Go(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof S?e.walk(s=>(s==null?void 0:s.code)===Zt.code):e;return r instanceof S?new Zt({cause:e,message:r.details}):Zt.nodeMessage.test(n)?new Zt({cause:e,message:e.details}):_t.nodeMessage.test(n)?new _t({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):Ds.nodeMessage.test(n)?new Ds({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas}):Hs.nodeMessage.test(n)?new Hs({cause:e,nonce:t==null?void 0:t.nonce}):Gs.nodeMessage.test(n)?new Gs({cause:e,nonce:t==null?void 0:t.nonce}):Vs.nodeMessage.test(n)?new Vs({cause:e,nonce:t==null?void 0:t.nonce}):qs.nodeMessage.test(n)?new qs({cause:e}):Ws.nodeMessage.test(n)?new Ws({cause:e,gas:t==null?void 0:t.gas}):Ks.nodeMessage.test(n)?new Ks({cause:e,gas:t==null?void 0:t.gas}):Zs.nodeMessage.test(n)?new Zs({cause:e}):Yn.nodeMessage.test(n)?new Yn({cause:e,maxFeePerGas:t==null?void 0:t.maxFeePerGas,maxPriorityFeePerGas:t==null?void 0:t.maxPriorityFeePerGas}):new Dr({cause:e})}function Ip(e,{docsPath:t,...n}){const r=(()=>{const s=Go(e,n);return s instanceof Dr?e:s})();return new Ep(r,{docsPath:t,...n})}function Vo(e,{format:t}){if(!t)return{};const n={};function r(o){const i=Object.keys(o);for(const a of i)a in e&&(n[a]=e[a]),o[a]&&typeof o[a]=="object"&&!Array.isArray(o[a])&&r(o[a])}const s=t(e||{});return r(s),n}function qo(e,t){return({exclude:n,format:r})=>({exclude:n,format:(s,o)=>{const i=t(s,o);if(n)for(const a of n)delete i[a];return{...i,...r(s,o)}},type:e})}const Pp={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Hr(e,t){const n={};return typeof e.authorizationList<"u"&&(n.authorizationList=Ap(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>ie(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),e.account&&(n.from=e.account.address),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=_(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=_(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=_(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=_(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=_(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=_(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=Pp[e.type]),typeof e.value<"u"&&(n.value=_(e.value)),n}function Ap(e){return e.map(t=>({address:t.address,r:t.r?_(BigInt(t.r)):t.r,s:t.s?_(BigInt(t.s)):t.s,chainId:_(t.chainId),nonce:_(t.nonce),...typeof t.yParity<"u"?{yParity:_(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:_(t.v)}:{}}))}function ia(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new Zi({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new Zi({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Bp(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,i={};if(o!==void 0&&(i.code=o),t!==void 0&&(i.balance=_(t)),n!==void 0&&(i.nonce=_(n)),r!==void 0&&(i.state=ia(r)),s!==void 0){if(i.state)throw new tp;i.stateDiff=ia(s)}return i}function Wo(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!ce(n,{strict:!1}))throw new we({address:n});if(t[n])throw new ep({address:n});t[n]=Bp(r)}return t}const Gr=2n**256n-1n;function sr(e){const{account:t,gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,to:o}=e,i=t?qe(t):void 0;if(i&&!ce(i.address))throw new we({address:i.address});if(o&&!ce(o))throw new we({address:o});if(typeof n<"u"&&(typeof r<"u"||typeof s<"u"))throw new rp;if(r&&r>Gr)throw new _t({maxFeePerGas:r});if(s&&r&&s>r)throw new Yn({maxFeePerGas:r,maxPriorityFeePerGas:s})}class $p extends S{constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class Ko extends S{constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Sp extends S{constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Ue(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class bu extends S{constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const mu={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function Vr(e,t){const n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?nt(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?nt(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?mu[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=Cp(e.authorizationList)),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}const Tp=qo("transaction",Vr);function Cp(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function Zo(e,t){const n=(e.transactions??[]).map(r=>typeof r=="string"?r:Vr(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}const Rp=qo("block",Zo);async function Qe(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:s}={}){var l,d,h;const o=s??!1,i=n!==void 0?_(n):void 0;let a=null;if(t?a=await e.request({method:"eth_getBlockByHash",params:[t,o]},{dedupe:!0}):a=await e.request({method:"eth_getBlockByNumber",params:[i||r,o]},{dedupe:!!i}),!a)throw new bu({blockHash:t,blockNumber:n});return(((h=(d=(l=e.chain)==null?void 0:l.formatters)==null?void 0:d.block)==null?void 0:h.format)||Zo)(a,"getBlock")}async function Yo(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function kp(e,t){return yu(e,t)}async function yu(e,t){var o,i;const{block:n,chain:r=e.chain,request:s}=t||{};try{const a=((o=r==null?void 0:r.fees)==null?void 0:o.maxPriorityFeePerGas)??((i=r==null?void 0:r.fees)==null?void 0:i.defaultPriorityFee);if(typeof a=="function"){const l=n||await W(e,Qe,"getBlock")({}),d=await a({block:l,client:e,request:s});if(d===null)throw new Error;return d}if(typeof a<"u")return a;const c=await e.request({method:"eth_maxPriorityFeePerGas"});return ye(c)}catch{const[a,c]=await Promise.all([n?Promise.resolve(n):W(e,Qe,"getBlock")({}),W(e,Yo,"getGasPrice")({})]);if(typeof a.baseFeePerGas!="bigint")throw new Ko;const l=c-a.baseFeePerGas;return l<0n?0n:l}}async function Np(e,t){return Ys(e,t)}async function Ys(e,t){var b,m;const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},i=await(async()=>{var g,w;return typeof((g=r==null?void 0:r.fees)==null?void 0:g.baseFeeMultiplier)=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):((w=r==null?void 0:r.fees)==null?void 0:w.baseFeeMultiplier)??1.2})();if(i<1)throw new $p;const c=10**(((b=i.toString().split(".")[1])==null?void 0:b.length)??0),l=g=>g*BigInt(Math.ceil(i*c))/BigInt(c),d=n||await W(e,Qe,"getBlock")({});if(typeof((m=r==null?void 0:r.fees)==null?void 0:m.estimateFeesPerGas)=="function"){const g=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:l,request:s,type:o});if(g!==null)return g}if(o==="eip1559"){if(typeof d.baseFeePerGas!="bigint")throw new Ko;const g=typeof(s==null?void 0:s.maxPriorityFeePerGas)=="bigint"?s.maxPriorityFeePerGas:await yu(e,{block:d,chain:r,request:s}),w=l(d.baseFeePerGas);return{maxFeePerGas:(s==null?void 0:s.maxFeePerGas)??w+g,maxPriorityFeePerGas:g}}return{gasPrice:(s==null?void 0:s.gasPrice)??l(await W(e,Yo,"getGasPrice")({}))}}async function gu(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?_(r):n]},{dedupe:!!r});return nt(s)}function Jo(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>rt(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>ie(o))}function Xo(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(i=>rt(i)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(i=>rt(i)):e.commitments,o=[];for(let i=0;i<r.length;i++){const a=r[i],c=s[i];o.push(Uint8Array.from(t.computeBlobKzgProof(a,c)))}return n==="bytes"?o:o.map(i=>ie(i))}function Op(e,t){return Nf(tt(e,{strict:!1})?hn(e):e)}function Fp(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=Op(t);return s.set([n],0),r==="bytes"?s:ie(s)}function wu(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const o of t)s.push(Fp({commitment:o,to:r,version:n}));return s}const aa=6,xu=32,Qo=4096,vu=xu*Qo,ca=vu*aa-1-1*Qo*aa,Eu=1;class _p extends S{constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class Iu extends S{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class Mp extends S{constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class zp extends S{constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${Eu}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function Up(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?rt(e.data):e.data,r=ne(n);if(!r)throw new Iu;if(r>ca)throw new _p({maxSize:ca,size:r});const s=[];let o=!0,i=0;for(;o;){const a=jo(new Uint8Array(vu));let c=0;for(;c<Qo;){const l=n.slice(i,i+(xu-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),o=!1;break}c++,i+=31}s.push(a)}return t==="bytes"?s.map(a=>a.bytes):s.map(a=>ie(a.bytes))}function Pu(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??Up({data:t,to:r}),o=e.commitments??Jo({blobs:s,kzg:n,to:r}),i=e.proofs??Xo({blobs:s,commitments:o,kzg:n,to:r}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:o[c],proof:i[c]});return a}function Au(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new op({transaction:e})}async function Bu(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return nt(t)}const Lp=["blobVersionedHashes","chainId","fees","gas","nonce","type"],ua=new Map;async function $u(e,t){const{account:n=e.account,blobs:r,chain:s,gas:o,kzg:i,nonce:a,nonceManager:c,parameters:l=Lp,type:d}=t,h=n&&qe(n),b={...t,...h?{from:h==null?void 0:h.address}:{}};let m;async function g(){return m||(m=await W(e,Qe,"getBlock")({blockTag:"latest"}),m)}let w;async function B(){return w||(s?s.id:typeof t.chainId<"u"?t.chainId:(w=await W(e,Bu,"getChainId")({}),w))}if(l.includes("nonce")&&typeof a>"u"&&h)if(c){const I=await B();b.nonce=await c.consume({address:h.address,chainId:I,client:e})}else b.nonce=await W(e,gu,"getTransactionCount")({address:h.address,blockTag:"pending"});if((l.includes("blobVersionedHashes")||l.includes("sidecars"))&&r&&i){const I=Jo({blobs:r,kzg:i});if(l.includes("blobVersionedHashes")){const T=wu({commitments:I,to:"hex"});b.blobVersionedHashes=T}if(l.includes("sidecars")){const T=Xo({blobs:r,commitments:I,kzg:i}),P=Pu({blobs:r,commitments:I,proofs:T,to:"hex"});b.sidecars=P}}if(l.includes("chainId")&&(b.chainId=await B()),(l.includes("fees")||l.includes("type"))&&typeof d>"u")try{b.type=Au(b)}catch{let I=ua.get(e.uid);if(typeof I>"u"){const T=await g();I=typeof(T==null?void 0:T.baseFeePerGas)=="bigint",ua.set(e.uid,I)}b.type=I?"eip1559":"legacy"}if(l.includes("fees"))if(b.type!=="legacy"&&b.type!=="eip2930"){if(typeof b.maxFeePerGas>"u"||typeof b.maxPriorityFeePerGas>"u"){const I=await g(),{maxFeePerGas:T,maxPriorityFeePerGas:P}=await Ys(e,{block:I,chain:s,request:b});if(typeof t.maxPriorityFeePerGas>"u"&&t.maxFeePerGas&&t.maxFeePerGas<P)throw new Sp({maxPriorityFeePerGas:P});b.maxPriorityFeePerGas=P,b.maxFeePerGas=T}}else{if(typeof t.maxFeePerGas<"u"||typeof t.maxPriorityFeePerGas<"u")throw new Ko;if(typeof t.gasPrice>"u"){const I=await g(),{gasPrice:T}=await Ys(e,{block:I,chain:s,request:b,type:"legacy"});b.gasPrice=T}}return l.includes("gas")&&typeof o>"u"&&(b.gas=await W(e,ei,"estimateGas")({...b,account:h,prepare:(h==null?void 0:h.type)==="local"?[]:["blobVersionedHashes"]})),sr(b),delete b.parameters,b}async function ei(e,t){var i,a,c;const{account:n=e.account,prepare:r=!0}=t,s=n?qe(n):void 0,o=(()=>{if(Array.isArray(r))return r;if((s==null?void 0:s.type)!=="local")return["blobVersionedHashes"]})();try{const{accessList:l,authorizationList:d,blobs:h,blobVersionedHashes:b,blockNumber:m,blockTag:g,data:w,gas:B,gasPrice:I,maxFeePerBlobGas:T,maxFeePerGas:P,maxPriorityFeePerGas:v,nonce:A,value:R,stateOverride:C,...O}=r?await $u(e,{...t,parameters:o}):t,H=(typeof m=="bigint"?_(m):void 0)||g,M=Wo(C),L=await(async()=>{if(O.to)return O.to;if(d&&d.length>0)return await pu({authorization:d[0]}).catch(()=>{throw new S("`to` is required. Could not infer from `authorizationList`")})})();sr(t);const z=(c=(a=(i=e.chain)==null?void 0:i.formatters)==null?void 0:a.transactionRequest)==null?void 0:c.format,N=(z||Hr)({...Vo(O,{format:z}),account:s,accessList:l,authorizationList:d,blobs:h,blobVersionedHashes:b,data:w,gas:B,gasPrice:I,maxFeePerBlobGas:T,maxFeePerGas:P,maxPriorityFeePerGas:v,nonce:A,to:L,value:R},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:M?[N,H??e.experimental_blockTag??"latest",M]:H?[N,H]:[N]}))}catch(l){throw Ip(l,{...t,account:s,chain:e.chain})}}async function jp(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:i,...a}=t,c=We({abi:n,args:s,functionName:o});try{return await W(e,ei,"estimateGas")({data:`${c}${i?i.replace("0x",""):""}`,to:r,...a})}catch(l){const d=a.account?qe(a.account):void 0;throw un(l,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:d==null?void 0:d.address})}}function qr(e,t){if(!ce(e,{strict:!1}))throw new we({address:e});if(!ce(t,{strict:!1}))throw new we({address:t});return e.toLowerCase()===t.toLowerCase()}const fa="/docs/contract/decodeEventLog";function ti(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[i,...a]=s;if(!i)throw new nh({docsPath:fa});const c=t.find(w=>w.type==="event"&&i===Mr(Le(w)));if(!(c&&"name"in c)||c.type!=="event")throw new Lc(i,{docsPath:fa});const{name:l,inputs:d}=c,h=d==null?void 0:d.some(w=>!("name"in w&&w.name)),b=h?[]:{},m=d.map((w,B)=>[w,B]).filter(([w])=>"indexed"in w&&w.indexed);for(let w=0;w<m.length;w++){const[B,I]=m[w],T=a[w];if(!T)throw new _r({abiItem:c,param:B});b[h?I:B.name||I]=Dp({param:B,value:T})}const g=d.filter(w=>!("indexed"in w&&w.indexed));if(g.length>0){if(n&&n!=="0x")try{const w=pn(g,n);if(w)if(h)for(let B=0;B<d.length;B++)b[B]=b[B]??w.shift();else for(let B=0;B<g.length;B++)b[g[B].name]=w[B]}catch(w){if(o)throw w instanceof zc||w instanceof nu?new $n({abiItem:c,data:n,params:g,size:ne(n)}):w}else if(o)throw new $n({abiItem:c,data:"0x",params:g,size:0})}return{eventName:l,args:Object.values(b).length>0?b:void 0}}function Dp({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(pn([e],t)||[])[0]}function ni(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(i=>{var a;try{const c=t.find(d=>d.type==="event"&&i.topics[0]===Mr(d));if(!c)return null;const l=ti({...i,abi:[c],strict:s});return o&&!o.includes(l.eventName)||!Hp({args:l.args,inputs:c.inputs,matchArgs:n})?null:{...l,...i}}catch(c){let l,d;if(c instanceof Lc)return null;if(c instanceof $n||c instanceof _r){if(s)return null;l=c.abiItem.name,d=(a=c.abiItem.inputs)==null?void 0:a.some(h=>!("name"in h&&h.name))}return{...i,args:d?[]:{},eventName:l}}}).filter(Boolean)}function Hp(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,i,a){try{return o.type==="address"?qr(i,a):o.type==="string"||o.type==="bytes"?he(hn(i))===a:i===a}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,i)=>{if(o==null)return!0;const a=n[i];return a?(Array.isArray(o)?o:[o]).some(l=>s(a,l,t[i])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,i])=>{if(i==null)return!0;const a=n.find(l=>l.name===o);return a?(Array.isArray(i)?i:[i]).some(l=>s(a,l,t[o])):!1}):!1}function bt(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function ri(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:i,args:a,strict:c}={}){const l=c??!1,d=i??(o?[o]:void 0);let h=[];d&&(h=[d.flatMap(w=>rr({abi:[w],eventName:w.name,args:i?void 0:a}))],o&&(h=h[0]));let b;n?b=await e.request({method:"eth_getLogs",params:[{address:t,topics:h,blockHash:n}]}):b=await e.request({method:"eth_getLogs",params:[{address:t,topics:h,fromBlock:typeof r=="bigint"?_(r):r,toBlock:typeof s=="bigint"?_(s):s}]});const m=b.map(g=>bt(g));return d?ni({abi:d,args:a,logs:m,strict:l}):m}async function Su(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:i,fromBlock:a,toBlock:c,strict:l}=t,d=i?Lt({abi:n,name:i}):void 0,h=d?void 0:n.filter(b=>b.type==="event");return W(e,ri,"getLogs")({address:r,args:s,blockHash:o,event:d,events:h,fromBlock:a,toBlock:c,strict:l})}const bs="/docs/contract/decodeFunctionResult";function jt(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const a=Lt({abi:t,args:n,name:r});if(!a)throw new an(r,{docsPath:bs});o=a}if(o.type!=="function")throw new an(void 0,{docsPath:bs});if(!o.outputs)throw new jc(o.name,{docsPath:bs});const i=pn(o.outputs,s);if(i&&i.length>1)return i;if(i&&i.length===1)return i[0]}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const si=BigInt(0),Js=BigInt(1);function or(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function oi(e){if(!or(e))throw new Error("Uint8Array expected")}function Jn(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function yr(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Tu(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?si:BigInt("0x"+e)}const Cu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",Gp=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Xn(e){if(oi(e),Cu)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=Gp[e[n]];return t}const ct={_0:48,_9:57,A:65,F:70,a:97,f:102};function la(e){if(e>=ct._0&&e<=ct._9)return e-ct._0;if(e>=ct.A&&e<=ct.F)return e-(ct.A-10);if(e>=ct.a&&e<=ct.f)return e-(ct.a-10)}function Pr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Cu)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const i=la(e.charCodeAt(o)),a=la(e.charCodeAt(o+1));if(i===void 0||a===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=i*16+a}return r}function Rt(e){return Tu(Xn(e))}function Ru(e){return oi(e),Tu(Xn(Uint8Array.from(e).reverse()))}function ir(e,t){return Pr(e.toString(16).padStart(t*2,"0"))}function ku(e,t){return ir(e,t).reverse()}function Oe(e,t,n){let r;if(typeof t=="string")try{r=Pr(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(or(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function Ar(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];oi(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}const ms=e=>typeof e=="bigint"&&si<=e;function ii(e,t,n){return ms(e)&&ms(t)&&ms(n)&&t<=e&&e<n}function tn(e,t,n,r){if(!ii(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function Vp(e){let t;for(t=0;e>si;e>>=Js,t+=1);return t}const Wr=e=>(Js<<BigInt(e))-Js,ys=e=>new Uint8Array(e),da=e=>Uint8Array.from(e);function qp(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=ys(e),s=ys(e),o=0;const i=()=>{r.fill(1),s.fill(0),o=0},a=(...h)=>n(s,r,...h),c=(h=ys(0))=>{s=a(da([0]),h),r=a(),h.length!==0&&(s=a(da([1]),h),r=a())},l=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let h=0;const b=[];for(;h<t;){r=a();const m=r.slice();b.push(m),h+=r.length}return Ar(...b)};return(h,b)=>{i(),c(h);let m;for(;!(m=b(l()));)c();return i(),m}}const Wp={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||or(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Kr(e,t,n={}){const r=(s,o,i)=>{const a=Wp[o];if(typeof a!="function")throw new Error("invalid validator function");const c=e[s];if(!(i&&c===void 0)&&!a(c,e))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+c)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}function ha(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const Kp="0.1.1";function Zp(){return Kp}class Z extends Error{constructor(t,n={}){const r=(()=>{var c;if(n.cause instanceof Z){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:(c=n.cause)!=null&&c.message?n.cause.message:n.details})(),s=n.cause instanceof Z&&n.cause.docsPath||n.docsPath,i=`https://oxlib.sh${s??""}`,a=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s?["",r?`Details: ${r}`:void 0,s?`See: ${i}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Zp()}`}),this.cause=n.cause,this.details=r,this.docs=i,this.docsPath=s,this.shortMessage=t}walk(t){return Nu(this,t)}}function Nu(e,t){return t!=null&&t(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Nu(e.cause,t):t?null:e}function ar(e,t){if(Yt(e)>t)throw new d1({givenSize:Yt(e),maxSize:t})}const ut={zero:48,nine:57,A:65,F:70,a:97,f:102};function pa(e){if(e>=ut.zero&&e<=ut.nine)return e-ut.zero;if(e>=ut.A&&e<=ut.F)return e-(ut.A-10);if(e>=ut.a&&e<=ut.f)return e-(ut.a-10)}function Yp(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new h1({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let o=0;o<r;o++){const i=n==="right";s[i?o:r-o-1]=e[i?o:e.length-o-1]}return s}function Ou(e,t={}){const{dir:n="left"}=t;let r=e,s=0;for(let o=0;o<r.length-1&&r[n==="left"?o:r.length-o-1].toString()==="0";o++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function Zr(e,t){if(Se(e)>t)throw new w1({givenSize:Se(e),maxSize:t})}function Jp(e,t){if(typeof t=="number"&&t>0&&t>Se(e)-1)throw new Hu({offset:t,position:"start",size:Se(e)})}function Xp(e,t,n){if(typeof t=="number"&&typeof n=="number"&&Se(e)!==n-t)throw new Hu({offset:n,position:"end",size:Se(e)})}function Fu(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new x1({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const Qp="#__bigint";function _u(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+Qp:s,n)}const e1=new TextDecoder,t1=new TextEncoder;function n1(e){return e instanceof Uint8Array?e:typeof e=="string"?Mu(e):r1(e)}function r1(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function Mu(e,t={}){const{size:n}=t;let r=e;n&&(Zr(e,n),r=zt(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,i=new Uint8Array(o);for(let a=0,c=0;a<o;a++){const l=pa(s.charCodeAt(c++)),d=pa(s.charCodeAt(c++));if(l===void 0||d===void 0)throw new Z(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);i[a]=l*16+d}return i}function s1(e,t={}){const{size:n}=t,r=t1.encode(e);return typeof n=="number"?(ar(r,n),o1(r,n)):r}function o1(e,t){return Yp(e,{dir:"right",size:t})}function Yt(e){return e.length}function i1(e,t,n,r={}){const{strict:s}=r;return e.slice(t,n)}function a1(e,t={}){const{size:n}=t;typeof n<"u"&&ar(e,n);const r=De(e,t);return Lu(r,t)}function c1(e,t={}){const{size:n}=t;let r=e;if(typeof n<"u"&&(ar(r,n),r=zu(r)),r.length>1||r[0]>1)throw new l1(r);return!!r[0]}function ht(e,t={}){const{size:n}=t;typeof n<"u"&&ar(e,n);const r=De(e,t);return ju(r,t)}function u1(e,t={}){const{size:n}=t;let r=e;return typeof n<"u"&&(ar(r,n),r=f1(r)),e1.decode(r)}function zu(e){return Ou(e,{dir:"left"})}function f1(e){return Ou(e,{dir:"right"})}class l1 extends Z{constructor(t){super(`Bytes value \`${t}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let d1=class extends Z{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},h1=class extends Z{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const p1=new TextEncoder,b1=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function m1(e,t={}){const{strict:n=!1}=t;if(!e)throw new ba(e);if(typeof e!="string")throw new ba(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new ma(e);if(!e.startsWith("0x"))throw new ma(e)}function je(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function y1(e){return e instanceof Uint8Array?De(e):Array.isArray(e)?De(new Uint8Array(e)):e}function Uu(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Zr(n,t.size),Mt(n,t.size)):n}function De(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=b1[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Zr(r,t.size),zt(r,t.size)):r}function me(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const i=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<i){const l=typeof e=="bigint"?"n":"";throw new Du({max:o?`${o}${l}`:void 0,min:`${i}${l}`,signed:n,size:r,value:`${e}${l}`})}const c=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?Mt(c,r):c}function ai(e,t={}){return De(p1.encode(e),t)}function Mt(e,t){return Fu(e,{dir:"left",size:t})}function zt(e,t){return Fu(e,{dir:"right",size:t})}function et(e,t,n,r={}){const{strict:s}=r;Jp(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&Xp(o,t,n),o}function Se(e){return Math.ceil((e.length-2)/2)}function Lu(e,t={}){const{signed:n}=t;t.size&&Zr(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n)-1n,i=o>>1n;return r<=i?r:r-o-1n}function ju(e,t={}){const{signed:n,size:r}=t;return Number(!n&&!r?e:Lu(e,t))}function g1(e,t={}){const{strict:n=!1}=t;try{return m1(e,{strict:n}),!0}catch{return!1}}class Du extends Z{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class ba extends Z{constructor(t){super(`Value \`${typeof t=="object"?_u(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class ma extends Z{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class w1 extends Z{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class Hu extends Z{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class x1 extends Z{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function v1(e){return{address:e.address,amount:me(e.amount),index:me(e.index),validatorIndex:me(e.validatorIndex)}}function Gu(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:me(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:me(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:me(e.gasLimit)},...typeof e.number=="bigint"&&{number:me(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:me(e.prevRandao)},...typeof e.time=="bigint"&&{time:me(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(v1)}}}const Br=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],Xs=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],Vu=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],qu=[...Vu,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],E1=[...Vu,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],ya=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],ga=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Wu=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],wa=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],I1="0x82ad56cb",Ku="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",P1="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",A1="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",ci="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class Qs extends S{constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class Zu extends S{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Yr extends S{constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const gs="/docs/contract/encodeDeployData";function ui(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(i=>"type"in i&&i.type==="constructor");if(!s)throw new Jd({docsPath:gs});if(!("inputs"in s))throw new qi({docsPath:gs});if(!s.inputs||s.inputs.length===0)throw new qi({docsPath:gs});const o=At(s.inputs,n);return Ve([r,o])}function bn({blockNumber:e,chain:t,contract:n}){var s;const r=(s=t==null?void 0:t.contracts)==null?void 0:s[n];if(!r)throw new Qs({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new Qs({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function Yu(e,{docsPath:t,...n}){const r=(()=>{const s=Go(e,n);return s instanceof Dr?e:s})();return new cu(r,{docsPath:t,...n})}function Ju(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const ws=new Map;function Xu({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const d=c();i();const h=d.map(({args:b})=>b);h.length!==0&&e(h).then(b=>{s&&Array.isArray(b)&&b.sort(s);for(let m=0;m<d.length;m++){const{resolve:g}=d[m];g==null||g([b[m],b])}}).catch(b=>{for(let m=0;m<d.length;m++){const{reject:g}=d[m];g==null||g(b)}})},i=()=>ws.delete(t),a=()=>c().map(({args:d})=>d),c=()=>ws.get(t)||[],l=d=>ws.set(t,[...c(),d]);return{flush:i,async schedule(d){const{promise:h,resolve:b,reject:m}=Ju();return(n==null?void 0:n([...a(),d]))&&o(),c().length>0?(l({args:d,resolve:b,reject:m}),h):(l({args:d,resolve:b,reject:m}),setTimeout(o,r),h)}}}async function Jr(e,t){var z,X,N,F;const{account:n=e.account,authorizationList:r,batch:s=!!((z=e.batch)!=null&&z.multicall),blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",accessList:a,blobs:c,blockOverrides:l,code:d,data:h,factory:b,factoryData:m,gas:g,gasPrice:w,maxFeePerBlobGas:B,maxFeePerGas:I,maxPriorityFeePerGas:T,nonce:P,to:v,value:A,stateOverride:R,...C}=t,O=n?qe(n):void 0;if(d&&(b||m))throw new S("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(d&&v)throw new S("Cannot provide both `code` & `to` as parameters.");const U=d&&h,H=b&&m&&v&&h,M=U||H,L=U?Qu({code:d,data:h}):H?S1({data:h,factory:b,factoryData:m,to:v}):h;try{sr(t);const k=(typeof o=="bigint"?_(o):void 0)||i,j=l?Gu(l):void 0,V=Wo(R),q=(F=(N=(X=e.chain)==null?void 0:X.formatters)==null?void 0:N.transactionRequest)==null?void 0:F.format,ue=(q||Hr)({...Vo(C,{format:q}),accessList:a,account:O,authorizationList:r,blobs:c,data:L,gas:g,gasPrice:w,maxFeePerBlobGas:B,maxFeePerGas:I,maxPriorityFeePerGas:T,nonce:P,to:M?void 0:v,value:A},"call");if(s&&B1({request:ue})&&!V&&!j)try{return await $1(e,{...ue,blockNumber:o,blockTag:i})}catch(fe){if(!(fe instanceof Zu)&&!(fe instanceof Qs))throw fe}const ae=(()=>{const fe=[ue,k];return V&&j?[...fe,V,j]:V?[...fe,V]:j?[...fe,{},j]:fe})(),re=await e.request({method:"eth_call",params:ae});return re==="0x"?{data:void 0}:{data:re}}catch(G){const k=T1(G),{offchainLookup:j,offchainLookupSignature:V}=await fu(async()=>{const{offchainLookup:q,offchainLookupSignature:J}=await import("./ccip-DqYZ9OwY.js");return{offchainLookup:q,offchainLookupSignature:J}},[]);if(e.ccipRead!==!1&&(k==null?void 0:k.slice(0,10))===V&&v)return{data:await j(e,{data:k,to:v})};throw M&&(k==null?void 0:k.slice(0,10))==="0x101bb98d"?new lp({factory:b}):Yu(G,{...t,account:O,chain:e.chain})}}function B1({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(I1)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function $1(e,t){var w;const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof((w=e.batch)==null?void 0:w.multicall)=="object"?e.batch.multicall:{},{blockNumber:o,blockTag:i=e.experimental_blockTag??"latest",data:a,to:c}=t,l=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return bn({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new Zu})(),h=(typeof o=="bigint"?_(o):void 0)||i,{schedule:b}=Xu({id:`${e.uid}.${h}`,wait:s,shouldSplitBatch(B){return B.reduce((T,{data:P})=>T+(P.length-2),0)>n*2},fn:async B=>{const I=B.map(v=>({allowFailure:!0,callData:v.data,target:v.to})),T=We({abi:Br,args:[I],functionName:"aggregate3"}),P=await e.request({method:"eth_call",params:[{...l===null?{data:Qu({code:ci,data:T})}:{to:l,data:T}},h]});return jt({abi:Br,args:[I],functionName:"aggregate3",data:P||"0x"})}}),[{returnData:m,success:g}]=await b({data:a,to:c});if(!g)throw new jr({data:m});return m==="0x"?{data:void 0}:{data:m}}function Qu(e){const{code:t,data:n}=e;return ui({abi:Fc(["constructor(bytes, bytes)"]),bytecode:Ku,args:[t,n]})}function S1(e){const{data:t,factory:n,factoryData:r,to:s}=e;return ui({abi:Fc(["constructor(address, bytes, address, bytes)"]),bytecode:P1,args:[s,t,n,r]})}function T1(e){var n;if(!(e instanceof S))return;const t=e.walk();return typeof(t==null?void 0:t.data)=="object"?(n=t.data)==null?void 0:n.data:t.data}async function He(e,t){const{abi:n,address:r,args:s,functionName:o,...i}=t,a=We({abi:n,args:s,functionName:o});try{const{data:c}=await W(e,Jr,"call")({...i,data:a,to:r});return jt({abi:n,args:s,functionName:o,data:c||"0x"})}catch(c){throw un(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function C1(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:i,...a}=t,c=a.account?qe(a.account):e.account,l=We({abi:n,args:s,functionName:i});try{const{data:d}=await W(e,Jr,"call")({batch:!1,data:`${l}${o?o.replace("0x",""):""}`,to:r,...a,account:c}),h=jt({abi:n,args:s,functionName:i,data:d||"0x"}),b=n.filter(m=>"name"in m&&m.name===t.functionName);return{result:h,request:{abi:b,address:r,args:s,dataSuffix:o,functionName:i,...a,account:c}}}catch(d){throw un(d,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:i,sender:c==null?void 0:c.address})}}const xs=new Map,xa=new Map;let R1=0;function Pt(e,t,n){const r=++R1,s=()=>xs.get(e)||[],o=()=>{const d=s();xs.set(e,d.filter(h=>h.id!==r))},i=()=>{const d=s();if(!d.some(b=>b.id===r))return;const h=xa.get(e);if(d.length===1&&h){const b=h();b instanceof Promise&&b.catch(()=>{})}o()},a=s();if(xs.set(e,[...a,{id:r,fns:t}]),a&&a.length>0)return i;const c={};for(const d in t)c[d]=(...h)=>{var m,g;const b=s();if(b.length!==0)for(const w of b)(g=(m=w.fns)[d])==null||g.call(m,...h)};const l=n(c);return typeof l=="function"&&xa.set(e,l),i}async function eo(e){return new Promise(t=>setTimeout(t,e))}function cr(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let a;t&&(a=await e({unpoll:o}));const c=await(n==null?void 0:n(a))??r;await eo(c);const l=async()=>{s&&(await e({unpoll:o}),await eo(r),l())};l()})(),o}const k1=new Map,N1=new Map;function O1(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:i=>o.set(s,i)}),n=t(e,k1),r=t(e,N1);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function F1(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=O1(t),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const i=await o;return r.response.set({created:new Date,data:i}),i}finally{r.promise.clear()}}const _1=e=>`blockNumber.${e}`;async function ur(e,{cacheTime:t=e.cacheTime}={}){const n=await F1(()=>e.request({method:"eth_blockNumber"}),{cacheKey:_1(e.uid),cacheTime:t});return BigInt(n)}async function Xr(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>bt(o));return!("abi"in t)||!t.abi?s:ni({abi:t.abi,logs:s,strict:n})}async function Qr(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function M1(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:i,fromBlock:a,onError:c,onLogs:l,poll:d,pollingInterval:h=e.pollingInterval,strict:b}=t;return(typeof d<"u"?d:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const B=b??!1,I=pe(["watchContractEvent",r,s,o,e.uid,i,h,B,a]);return Pt(I,{onLogs:l,onError:c},T=>{let P;a!==void 0&&(P=a-1n);let v,A=!1;const R=cr(async()=>{var C;if(!A){try{v=await W(e,eu,"createContractEventFilter")({abi:n,address:r,args:s,eventName:i,strict:B,fromBlock:a})}catch{}A=!0;return}try{let O;if(v)O=await W(e,Xr,"getFilterChanges")({filter:v});else{const U=await W(e,ur,"getBlockNumber")({});P&&P<U?O=await W(e,Su,"getContractEvents")({abi:n,address:r,args:s,eventName:i,fromBlock:P+1n,toBlock:U,strict:B}):O=[],P=U}if(O.length===0)return;if(o)T.onLogs(O);else for(const U of O)T.onLogs([U])}catch(O){v&&O instanceof Ft&&(A=!1),(C=T.onError)==null||C.call(T,O)}},{emitOnBegin:!0,interval:h});return async()=>{v&&await W(e,Qr,"uninstallFilter")({filter:v}),R()}})})():(()=>{const B=b??!1,I=pe(["watchContractEvent",r,s,o,e.uid,i,h,B]);let T=!0,P=()=>T=!1;return Pt(I,{onLogs:l,onError:c},v=>((async()=>{try{const A=(()=>{if(e.transport.type==="fallback"){const O=e.transport.transports.find(U=>U.config.type==="webSocket"||U.config.type==="ipc");return O?O.value:e.transport}return e.transport})(),R=i?rr({abi:n,eventName:i,args:s}):[],{unsubscribe:C}=await A.subscribe({params:["logs",{address:r,topics:R}],onData(O){var H;if(!T)return;const U=O.result;try{const{eventName:M,args:L}=ti({abi:n,data:U.data,topics:U.topics,strict:b}),z=bt(U,{args:L,eventName:M});v.onLogs([z])}catch(M){let L,z;if(M instanceof $n||M instanceof _r){if(b)return;L=M.abiItem.name,z=(H=M.abiItem.inputs)==null?void 0:H.some(N=>!("name"in N&&N.name))}const X=bt(U,{args:z?[]:{},eventName:L});v.onLogs([X])}},onError(O){var U;(U=v.onError)==null||U.call(v,O)}});P=C,T||P()}catch(A){c==null||c(A)}})(),()=>P()))})()}async function z1(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}function to(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{const i=async({count:a=0}={})=>{const c=async({error:l})=>{const d=typeof t=="function"?t({count:a,error:l}):t;d&&await eo(d),i({count:a+1})};try{const l=await e();s(l)}catch(l){if(a<n&&await r({count:a,error:l}))return c({error:l});o(l)}};i()})}const U1={"0x0":"reverted","0x1":"success"};function fi(e,t){const n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>bt(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?nt(e.transactionIndex):null,status:e.status?U1[e.status]:null,type:e.type?mu[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}const L1=qo("transactionReceipt",fi),no=256;let gr=no,wr;function e0(e=11){if(!wr||gr+e>no*2){wr="",gr=0;for(let t=0;t<no;t++)wr+=(256+Math.random()*256|0).toString(16).substring(1)}return wr.substring(gr,gr+++e)}function j1(e){const{batch:t,chain:n,ccipRead:r,key:s="base",name:o="Base Client",type:i="base"}=e,a=e.experimental_blockTag??(typeof(n==null?void 0:n.experimental_preconfirmationTime)=="number"?"pending":void 0),c=(n==null?void 0:n.blockTime)??12e3,l=Math.min(Math.max(Math.floor(c/2),500),4e3),d=e.pollingInterval??l,h=e.cacheTime??d,b=e.account?qe(e.account):void 0,{config:m,request:g,value:w}=e.transport({chain:n,pollingInterval:d}),B={...m,...w},I={account:b,batch:t,cacheTime:h,ccipRead:r,chain:n,key:s,name:o,pollingInterval:d,request:g,transport:B,type:i,uid:e0(),...a?{experimental_blockTag:a}:{}};function T(P){return v=>{const A=v(P);for(const C in I)delete A[C];const R={...P,...A};return Object.assign(R,{extend:T(R)})}}return Object.assign(I,{extend:T(I)})}function li(e){var n,r,s,o,i,a;if(!(e instanceof S))return!1;const t=e.walk(c=>c instanceof js);return t instanceof js?((n=t.data)==null?void 0:n.errorName)==="HttpError"||((r=t.data)==null?void 0:r.errorName)==="ResolverError"||((s=t.data)==null?void 0:s.errorName)==="ResolverNotContract"||((o=t.data)==null?void 0:o.errorName)==="ResolverNotFound"||((i=t.data)==null?void 0:i.errorName)==="ReverseAddressMismatch"||((a=t.data)==null?void 0:a.errorName)==="UnsupportedResolverProfile":!1}function D1(e){const{abi:t,data:n}=e,r=Nt(n,0,4),s=t.find(o=>o.type==="function"&&r===nr(Le(o)));if(!s)throw new rh(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?pn(s.inputs,Nt(n,4)):void 0}}const vs="/docs/contract/encodeErrorResult";function va(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const c=Lt({abi:t,args:r,name:n});if(!c)throw new Wi(n,{docsPath:vs});s=c}if(s.type!=="error")throw new Wi(void 0,{docsPath:vs});const o=Le(s),i=nr(o);let a="0x";if(r&&r.length>0){if(!s.inputs)throw new th(s.name,{docsPath:vs});a=At(s.inputs,r)}return Ve([i,a])}const Es="/docs/contract/encodeFunctionResult";function H1(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const i=Lt({abi:t,name:n});if(!i)throw new an(n,{docsPath:Es});s=i}if(s.type!=="function")throw new an(void 0,{docsPath:Es});if(!s.outputs)throw new jc(s.name,{docsPath:Es});const o=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Dc(r)})();return At(s.outputs,o)}const es="x-batch-gateway:true";async function G1(e){const{data:t,ccipRequest:n}=e,{args:[r]}=D1({abi:Xs,data:t}),s=[],o=[];return await Promise.all(r.map(async(i,a)=>{try{o[a]=i.urls.includes(es)?await G1({data:i.data,ccipRequest:n}):await n(i),s[a]=!1}catch(c){s[a]=!0,o[a]=V1(c)}})),H1({abi:Xs,functionName:"query",result:[s,o]})}function V1(e){return e.name==="HttpRequestError"&&e.status?va({abi:Xs,errorName:"HttpError",args:[e.status,e.shortMessage]}):va({abi:[tu],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function t0(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return tt(t)?t:null}function ro(e){let t=new Uint8Array(32).fill(0);if(!e)return ie(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=t0(n[r]),o=s?hn(s):he(Ct(n[r]),"bytes");t=he(st([t,o]),"bytes")}return ie(t)}function q1(e){return`[${e.slice(2)}]`}function W1(e){const t=new Uint8Array(32).fill(0);return e?t0(e)||he(Ct(e)):ie(t)}function di(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(Ct(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let i=Ct(s[o]);i.byteLength>255&&(i=Ct(q1(W1(s[o])))),n[r]=i.length,n.set(i,r+1),r+=i.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function K1(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:o,gatewayUrls:i,strict:a}=t,{chain:c}=e,l=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return bn({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),d=c==null?void 0:c.ensTlds;if(d&&!d.some(b=>o.endsWith(b)))return null;const h=s!=null?[ro(o),BigInt(s)]:[ro(o)];try{const b=We({abi:ga,functionName:"addr",args:h}),m={address:l,abi:qu,functionName:"resolveWithGateways",args:[$e(di(o)),b,i??[es]],blockNumber:n,blockTag:r},w=await W(e,He,"readContract")(m);if(w[0]==="0x")return null;const B=jt({abi:ga,args:h,functionName:"addr",data:w[0]});return B==="0x"||ze(B)==="0x00"?null:B}catch(b){if(a)throw b;if(li(b))return null;throw b}}class Z1 extends S{constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class wn extends S{constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class hi extends S{constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class Y1 extends S{constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const J1=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,X1=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,Q1=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,eb=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function tb(e){try{const t=await fetch(e,{method:"HEAD"});if(t.status===200){const n=t.headers.get("content-type");return n==null?void 0:n.startsWith("image/")}return!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Ea(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function n0({uri:e,gatewayUrls:t}){const n=Q1.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Ea(t==null?void 0:t.ipfs,"https://ipfs.io"),s=Ea(t==null?void 0:t.arweave,"https://arweave.net"),o=e.match(J1),{protocol:i,subpath:a,target:c,subtarget:l=""}=(o==null?void 0:o.groups)||{},d=i==="ipns:/"||a==="ipns/",h=i==="ipfs:/"||a==="ipfs/"||X1.test(e);if(e.startsWith("http")&&!d&&!h){let m=e;return t!=null&&t.arweave&&(m=e.replace(/https:\/\/arweave.net/g,t==null?void 0:t.arweave)),{uri:m,isOnChain:!1,isEncoded:!1}}if((d||h)&&c)return{uri:`${r}/${d?"ipns":"ipfs"}/${c}${l}`,isOnChain:!1,isEncoded:!1};if(i==="ar:/"&&c)return{uri:`${s}/${c}${l||""}`,isOnChain:!1,isEncoded:!1};let b=e.replace(eb,"");if(b.startsWith("<svg")&&(b=`data:image/svg+xml;base64,${btoa(b)}`),b.startsWith("data:")||b.startsWith("{"))return{uri:b,isOnChain:!0,isEncoded:!1};throw new hi({uri:e})}function r0(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new Z1({data:e});return e.image||e.image_url||e.image_data}async function nb({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await pi({gatewayUrls:e,uri:r0(n)})}catch{throw new hi({uri:t})}}async function pi({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=n0({uri:t,gatewayUrls:e});if(r||await tb(n))return n;throw new hi({uri:t})}function rb(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,i]=n.split(":"),[a,c]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new wn({reason:"Only EIP-155 supported"});if(!i)throw new wn({reason:"Chain ID not found"});if(!c)throw new wn({reason:"Contract address not found"});if(!s)throw new wn({reason:"Token ID not found"});if(!a)throw new wn({reason:"ERC namespace not found"});return{chainID:Number.parseInt(i,10),namespace:a.toLowerCase(),contractAddress:c,tokenID:s}}async function sb(e,{nft:t}){if(t.namespace==="erc721")return He(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return He(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new Y1({namespace:t.namespace})}async function ob(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?ib(e,{gatewayUrls:t,record:n}):pi({uri:n,gatewayUrls:t})}async function ib(e,{gatewayUrls:t,record:n}){const r=rb(n),s=await sb(e,{nft:r}),{uri:o,isOnChain:i,isEncoded:a}=n0({uri:s,gatewayUrls:t});if(i&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const l=a?atob(o.replace("data:application/json;base64,","")):o,d=JSON.parse(l);return pi({uri:r0(d),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),nb({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,c)})}async function s0(e,t){const{blockNumber:n,blockTag:r,key:s,name:o,gatewayUrls:i,strict:a}=t,{chain:c}=e,l=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return bn({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),d=c==null?void 0:c.ensTlds;if(d&&!d.some(h=>o.endsWith(h)))return null;try{const h={address:l,abi:qu,args:[$e(di(o)),We({abi:ya,functionName:"text",args:[ro(o),s]}),i??[es]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},m=await W(e,He,"readContract")(h);if(m[0]==="0x")return null;const g=jt({abi:ya,functionName:"text",data:m[0]});return g===""?null:g}catch(h){if(a)throw h;if(li(h))return null;throw h}}async function ab(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:i,universalResolverAddress:a}){const c=await W(e,s0,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:a,gatewayUrls:o,strict:i});if(!c)return null;try{return await ob(e,{record:c,gatewayUrls:r})}catch{return null}}async function cb(e,t){const{address:n,blockNumber:r,blockTag:s,coinType:o=60n,gatewayUrls:i,strict:a}=t,{chain:c}=e,l=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return bn({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const d={address:l,abi:E1,args:[n,o,i??[es]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},h=W(e,He,"readContract"),[b]=await h(d);return b||null}catch(d){if(a)throw d;if(li(d))return null;throw d}}async function ub(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:o}=e,i=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return bn({blockNumber:n,chain:o,contract:"ensUniversalResolver"})})(),a=o==null?void 0:o.ensTlds;if(a&&!a.some(l=>s.endsWith(l)))throw new Error(`${s} is not a valid ENS TLD (${a==null?void 0:a.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);const[c]=await W(e,He,"readContract")({address:i,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[$e(di(s))],blockNumber:n,blockTag:r});return c}async function o0(e,t){var B,I,T;const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:o,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,to:b,value:m,...g}=t,w=n?qe(n):void 0;try{sr(t);const v=(typeof r=="bigint"?_(r):void 0)||s,A=(T=(I=(B=e.chain)==null?void 0:B.formatters)==null?void 0:I.transactionRequest)==null?void 0:T.format,C=(A||Hr)({...Vo(g,{format:A}),account:w,blobs:o,data:i,gas:a,gasPrice:c,maxFeePerBlobGas:l,maxFeePerGas:d,maxPriorityFeePerGas:h,to:b,value:m},"createAccessList"),O=await e.request({method:"eth_createAccessList",params:[C,v]});return{accessList:O.accessList,gasUsed:BigInt(O.gasUsed)}}catch(P){throw Yu(P,{...t,account:w,chain:e.chain})}}async function fb(e){const t=Ur(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function i0(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:i,toBlock:a}={}){const c=s??(r?[r]:void 0),l=Ur(e,{method:"eth_newFilter"});let d=[];c&&(d=[c.flatMap(m=>rr({abi:[m],eventName:m.name,args:n}))],r&&(d=d[0]));const h=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?_(o):o,toBlock:typeof a=="bigint"?_(a):a,...d.length?{topics:d}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:o,id:h,request:l(h),strict:!!i,toBlock:a,type:"event"}}async function a0(e){const t=Ur(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function lb(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?_(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function db(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function hb(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?_(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),nt(o)}async function so(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?_(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}class pb extends S{constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function bb(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,i,a,c,l,d,h]=await W(e,He,"readContract")({abi:mb,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:i,version:a,chainId:Number(c),verifyingContract:l,salt:d},extensions:h,fields:o}}catch(o){const i=o;throw i.name==="ContractFunctionExecutionError"&&i.cause.name==="ContractFunctionZeroDataError"?new pb({address:n}):i}}const mb=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function yb(e){var t;return{baseFeePerGas:e.baseFeePerGas.map(n=>BigInt(n)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:(t=e.reward)==null?void 0:t.map(n=>n.map(r=>BigInt(r)))}}async function gb(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=typeof n=="bigint"?_(n):void 0,i=await e.request({method:"eth_feeHistory",params:[_(t),o||r,s]},{dedupe:!!o});return yb(i)}async function wb(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>bt(o));return t.abi?ni({abi:t.abi,logs:s,strict:n}):s}function xb(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:r}=n,s=n.address;if(!ce(s))throw new we({address:s});if(r<0)throw new Yr({chainId:r})}bi(e)}function vb(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new Iu;for(const n of t){const r=ne(n),s=nt(Nt(n,0,1));if(r!==32)throw new Mp({hash:n,size:r});if(s!==Eu)throw new zp({hash:n,version:s})}}bi(e)}function bi(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new Yr({chainId:t});if(s&&!ce(s))throw new we({address:s});if(r&&r>Gr)throw new _t({maxFeePerGas:r});if(n&&r&&n>r)throw new Yn({maxFeePerGas:r,maxPriorityFeePerGas:n})}function Eb(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(t<=0)throw new Yr({chainId:t});if(o&&!ce(o))throw new we({address:o});if(n||s)throw new S("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>Gr)throw new _t({maxFeePerGas:r})}function Ib(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(o&&!ce(o))throw new we({address:o});if(typeof t<"u"&&t<=0)throw new Yr({chainId:t});if(n||s)throw new S("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>Gr)throw new _t({maxFeePerGas:r})}function ts(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new ip({storageKey:s[o]});if(!ce(r,{strict:!1}))throw new we({address:r});t.push([r,s])}return t}function Pb(e,t){const n=Au(e);return n==="eip1559"?$b(e,t):n==="eip2930"?Sb(e,t):n==="eip4844"?Bb(e,t):n==="eip7702"?Ab(e,t):Tb(e,t)}function Ab(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:o,to:i,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:d,data:h}=e;xb(e);const b=ts(d),m=Cb(n);return Ve(["0x04",It([_(r),o?_(o):"0x",l?_(l):"0x",c?_(c):"0x",s?_(s):"0x",i??"0x",a?_(a):"0x",h??"0x",b,m,...fr(e,t)])])}function Bb(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:d,data:h}=e;vb(e);let b=e.blobVersionedHashes,m=e.sidecars;if(e.blobs&&(typeof b>"u"||typeof m>"u")){const P=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(R=>ie(R)),v=e.kzg,A=Jo({blobs:P,kzg:v});if(typeof b>"u"&&(b=wu({commitments:A})),typeof m>"u"){const R=Xo({blobs:P,commitments:A,kzg:v});m=Pu({blobs:P,commitments:A,proofs:R})}}const g=ts(d),w=[_(n),s?_(s):"0x",l?_(l):"0x",c?_(c):"0x",r?_(r):"0x",o??"0x",i?_(i):"0x",h??"0x",g,a?_(a):"0x",b??[],...fr(e,t)],B=[],I=[],T=[];if(m)for(let P=0;P<m.length;P++){const{blob:v,commitment:A,proof:R}=m[P];B.push(v),I.push(A),T.push(R)}return Ve(["0x03",It(m?[w,B,I,T]:w)])}function $b(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:i,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:d}=e;bi(e);const h=ts(l),b=[_(n),s?_(s):"0x",c?_(c):"0x",a?_(a):"0x",r?_(r):"0x",o??"0x",i?_(i):"0x",d??"0x",h,...fr(e,t)];return Ve(["0x02",It(b)])}function Sb(e,t){const{chainId:n,gas:r,data:s,nonce:o,to:i,value:a,accessList:c,gasPrice:l}=e;Eb(e);const d=ts(c),h=[_(n),o?_(o):"0x",l?_(l):"0x",r?_(r):"0x",i??"0x",a?_(a):"0x",s??"0x",d,...fr(e,t)];return Ve(["0x01",It(h)])}function Tb(e,t){const{chainId:n=0,gas:r,data:s,nonce:o,to:i,value:a,gasPrice:c}=e;Ib(e);let l=[o?_(o):"0x",c?_(c):"0x",r?_(r):"0x",i??"0x",a?_(a):"0x",s??"0x"];if(t){const d=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const m=27n+(t.v===27n?0n:1n);if(t.v!==m)throw new sp({v:t.v});return m})(),h=ze(t.r),b=ze(t.s);l=[...l,_(d),h==="0x00"?"0x":h,b==="0x00"?"0x":b]}else n>0&&(l=[...l,_(n),"0x","0x"]);return It(l)}function fr(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const o=ze(n.r),i=ze(n.s);return[typeof s=="number"?s?_(1):"0x":r===0n?"0x":r===1n?_(1):r===27n?"0x":_(1),o==="0x00"?"0x":o,i==="0x00"?"0x":i]}function Cb(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:r,nonce:s,...o}=n,i=n.address;t.push([r?$e(r):"0x",i,s?$e(s):"0x",...fr({},o)])}return t}async function Rb({address:e,authorization:t,signature:n}){return qr(Kc(e),await pu({authorization:t,signature:n}))}const xr=new Mo(8192);function kb(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(xr.get(n))return xr.get(n);const r=e().finally(()=>xr.delete(n));return xr.set(n,r),r}function Nb(e,t={}){return async(n,r={})=>{var h;const{dedupe:s=!1,methods:o,retryDelay:i=150,retryCount:a=3,uid:c}={...t,...r},{method:l}=n;if((h=o==null?void 0:o.exclude)!=null&&h.includes(l))throw new St(new Error("method not supported"),{method:l});if(o!=null&&o.include&&!o.include.includes(l))throw new St(new Error("method not supported"),{method:l});const d=s?Sn(`${c}.${pe(n)}`):void 0;return kb(()=>to(async()=>{try{return await e(n)}catch(b){const m=b;switch(m.code){case Cn.code:throw new Cn(m);case Rn.code:throw new Rn(m);case kn.code:throw new kn(m,{method:n.method});case Nn.code:throw new Nn(m);case Ot.code:throw new Ot(m);case Ft.code:throw new Ft(m);case On.code:throw new On(m);case Fn.code:throw new Fn(m);case _n.code:throw new _n(m);case St.code:throw new St(m,{method:n.method});case cn.code:throw new cn(m);case Mn.code:throw new Mn(m);case en.code:throw new en(m);case zn.code:throw new zn(m);case Un.code:throw new Un(m);case Ln.code:throw new Ln(m);case jn.code:throw new jn(m);case Dn.code:throw new Dn(m);case Hn.code:throw new Hn(m);case Gn.code:throw new Gn(m);case Vn.code:throw new Vn(m);case qn.code:throw new qn(m);case Wn.code:throw new Wn(m);case Kn.code:throw new Kn(m);case Zn.code:throw new Zn(m);case 5e3:throw new en(m);default:throw b instanceof S?b:new hp(m)}}},{delay:({count:b,error:m})=>{var g;if(m&&m instanceof En){const w=(g=m==null?void 0:m.headers)==null?void 0:g.get("Retry-After");if(w!=null&&w.match(/\d/))return Number.parseInt(w,10)*1e3}return~~(1<<b)*i},retryCount:a,shouldRetry:({error:b})=>Ob(b)}),{enabled:s,id:d})}}function Ob(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===cn.code||e.code===Ot.code:e instanceof En&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function Fb(e){return{formatters:void 0,fees:void 0,serializers:void 0,...e}}function _b(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,o)=>{(async()=>{let i;try{const a=new AbortController;n>0&&(i=setTimeout(()=>{r&&a.abort()},n)),s(await e({signal:(a==null?void 0:a.signal)||null}))}catch(a){(a==null?void 0:a.name)==="AbortError"&&o(t),o(a)}finally{clearTimeout(i)}})()})}function Mb(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Ia=Mb();function zb(e,t={}){return{async request(n){var b;const{body:r,fetchFn:s=t.fetchFn??fetch,onRequest:o=t.onRequest,onResponse:i=t.onResponse,timeout:a=t.timeout??1e4}=n,c={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:l,method:d,signal:h}=c;try{const m=await _b(async({signal:w})=>{const B={...c,body:Array.isArray(r)?pe(r.map(v=>({jsonrpc:"2.0",id:v.id??Ia.take(),...v}))):pe({jsonrpc:"2.0",id:r.id??Ia.take(),...r}),headers:{"Content-Type":"application/json",...l},method:d||"POST",signal:h||(a>0?w:null)},I=new Request(e,B),T=await(o==null?void 0:o(I,B))??{...B,url:e};return await s(T.url??e,T)},{errorInstance:new ra({body:r,url:e}),timeout:a,signal:!0});i&&await i(m);let g;if((b=m.headers.get("Content-Type"))!=null&&b.startsWith("application/json"))g=await m.json();else{g=await m.text();try{g=JSON.parse(g||"{}")}catch(w){if(m.ok)throw w;g={error:g}}}if(!m.ok)throw new En({body:r,details:pe(g.error)||m.statusText,headers:m.headers,status:m.status,url:e});return g}catch(m){throw m instanceof En||m instanceof ra?m:new En({body:r,cause:m,url:e})}}}}const Ub=`Ethereum Signed Message:
`;function Lb(e){const t=typeof e=="string"?Sn(e):typeof e.raw=="string"?e.raw:ie(e.raw),n=Sn(`${Ub}${ne(t)}`);return st([n,t])}function c0(e,t){return he(Lb(e),t)}class jb extends S{constructor({domain:t}){super(`Invalid domain "${pe(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class Db extends S{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class Hb extends S{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function Gb(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(i,a)=>{for(const c of i){const{name:l,type:d}=c,h=a[l],b=d.match(Xc);if(b&&(typeof h=="number"||typeof h=="bigint")){const[w,B,I]=b;_(h,{signed:B==="int",size:Number.parseInt(I,10)/8})}if(d==="address"&&typeof h=="string"&&!ce(h))throw new we({address:h});const m=d.match($h);if(m){const[w,B]=m;if(B&&ne(h)!==Number.parseInt(B,10))throw new oh({expectedSize:Number.parseInt(B,10),givenSize:ne(h)})}const g=s[d];g&&(qb(d),o(g,h))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new jb({domain:t});o(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])o(s[r],n);else throw new Db({primaryType:r,types:s})}function Vb({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function qb(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new Hb({type:e})}function Wb(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:Vb({domain:t}),...e.types};Gb({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(Kb({domain:t,types:s})),r!=="EIP712Domain"&&o.push(u0({data:n,primaryType:r,types:s})),he(st(o))}function Kb({domain:e,types:t}){return u0({data:e,primaryType:"EIP712Domain",types:t})}function u0({data:e,primaryType:t,types:n}){const r=f0({data:e,primaryType:t,types:n});return he(r)}function f0({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[Zb({primaryType:t,types:n})];for(const o of n[t]){const[i,a]=d0({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(i),s.push(a)}return At(r,s)}function Zb({primaryType:e,types:t}){const n=$e(Yb({primaryType:e,types:t}));return he(n)}function Yb({primaryType:e,types:t}){let n="";const r=l0({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:i,type:a})=>`${a} ${i}`).join(",")})`;return n}function l0({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])l0({primaryType:o.type,types:t},n);return n}function d0({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},he(f0({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},he(r)];if(n==="string")return[{type:"bytes32"},he($e(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(i=>d0({name:t,type:s,types:e,value:i}));return[{type:"bytes32"},he(At(o.map(([i])=>i),o.map(([,i])=>i)))]}return[{type:n},r]}class Jb extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const Xb={checksum:new Jb(8192)},Is=Xb.checksum;function h0(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=vo(n1(e));return n==="Bytes"?r:De(r)}const Qb=/^0x[a-fA-F0-9]{40}$/;function ns(e,t={}){const{strict:n=!0}=t;if(!Qb.test(e))throw new Pa({address:e,cause:new em});if(n){if(e.toLowerCase()===e)return;if(p0(e)!==e)throw new Pa({address:e,cause:new tm})}}function p0(e){if(Is.has(e))return Is.get(e);ns(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=h0(s1(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const s=`0x${r.join("")}`;return Is.set(e,s),s}function oo(e,t={}){const{strict:n=!0}=t??{};try{return ns(e,{strict:n}),!0}catch{return!1}}class Pa extends Z{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class em extends Z{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class tm extends Z{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const nm=/^(.*)\[([0-9]*)\]$/,rm=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,b0=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Aa=2n**256n-1n;function nn(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=gi(t.type);if(o){const[i,a]=o;return om(e,{...t,type:a},{checksumAddress:r,length:i,staticPosition:s})}if(t.type==="tuple")return um(e,t,{checksumAddress:r,staticPosition:s});if(t.type==="address")return sm(e,{checksum:r});if(t.type==="bool")return im(e);if(t.type.startsWith("bytes"))return am(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return cm(e,t);if(t.type==="string")return fm(e,{staticPosition:s});throw new xi(t.type)}const Ba=32,io=32;function sm(e,t={}){const{checksum:n=!1}=t,r=e.readBytes(32);return[(o=>n?p0(o):o)(De(i1(r,-20))),32]}function om(e,t,n){const{checksumAddress:r,length:s,staticPosition:o}=n;if(!s){const c=ht(e.readBytes(io)),l=o+c,d=l+Ba;e.setPosition(l);const h=ht(e.readBytes(Ba)),b=Qn(t);let m=0;const g=[];for(let w=0;w<h;++w){e.setPosition(d+(b?w*32:m));const[B,I]=nn(e,t,{checksumAddress:r,staticPosition:d});m+=I,g.push(B)}return e.setPosition(o+32),[g,32]}if(Qn(t)){const c=ht(e.readBytes(io)),l=o+c,d=[];for(let h=0;h<s;++h){e.setPosition(l+h*32);const[b]=nn(e,t,{checksumAddress:r,staticPosition:l});d.push(b)}return e.setPosition(o+32),[d,32]}let i=0;const a=[];for(let c=0;c<s;++c){const[l,d]=nn(e,t,{checksumAddress:r,staticPosition:o+i});i+=d,a.push(l)}return[a,i]}function im(e){return[c1(e.readBytes(32),{size:32}),32]}function am(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const i=ht(e.readBytes(32));e.setPosition(n+i);const a=ht(e.readBytes(32));if(a===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(a);return e.setPosition(n+32),[De(c),32]}return[De(e.readBytes(Number.parseInt(s,10),32)),32]}function cm(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?a1(s,{signed:n}):ht(s,{signed:n}),32]}function um(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=t.components.length===0||t.components.some(({name:c})=>!c),i=o?[]:{};let a=0;if(Qn(t)){const c=ht(e.readBytes(io)),l=s+c;for(let d=0;d<t.components.length;++d){const h=t.components[d];e.setPosition(l+a);const[b,m]=nn(e,h,{checksumAddress:r,staticPosition:l});a+=m,i[o?d:h==null?void 0:h.name]=b}return e.setPosition(s+32),[i,32]}for(let c=0;c<t.components.length;++c){const l=t.components[c],[d,h]=nn(e,l,{checksumAddress:r,staticPosition:s});i[o?c:l==null?void 0:l.name]=d,a+=h}return[i,a]}function fm(e,{staticPosition:t}){const n=ht(e.readBytes(32)),r=t+n;e.setPosition(r);const s=ht(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),i=u1(zu(o));return e.setPosition(t+32),[i,32]}function lm({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(mi({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function mi({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=gi(r.type);if(s){const[o,i]=s;return hm(n,{checksumAddress:e,length:o,parameter:{...r,type:i}})}if(r.type==="tuple")return gm(n,{checksumAddress:e,parameter:r});if(r.type==="address")return dm(n,{checksum:e});if(r.type==="bool")return bm(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const o=r.type.startsWith("int"),[,,i="256"]=b0.exec(r.type)??[];return mm(n,{signed:o,size:Number(i)})}if(r.type.startsWith("bytes"))return pm(n,{type:r.type});if(r.type==="string")return ym(n);throw new xi(r.type)}function yi(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?t+=32:t+=Se(a)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:i,encoded:a}=e[o];i?(n.push(me(t+s,{size:32})),r.push(a),s+=Se(a)):n.push(a)}return je(...n,...r)}function dm(e,t){const{checksum:n=!1}=t;return ns(e,{strict:n}),{dynamic:!1,encoded:Mt(e.toLowerCase())}}function hm(e,t){const{checksumAddress:n,length:r,parameter:s}=t,o=r===null;if(!Array.isArray(e))throw new $m(e);if(!o&&e.length!==r)throw new Bm({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let i=!1;const a=[];for(let c=0;c<e.length;c++){const l=mi({checksumAddress:n,parameter:s,value:e[c]});l.dynamic&&(i=!0),a.push(l)}if(o||i){const c=yi(a);if(o){const l=me(a.length,{size:32});return{dynamic:!0,encoded:a.length>0?je(l,c):l}}if(i)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:je(...a.map(({encoded:c})=>c))}}function pm(e,{type:t}){const[,n]=t.split("bytes"),r=Se(e);if(!n){let s=e;return r%32!==0&&(s=zt(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:je(Mt(me(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new y0({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:zt(e)}}function bm(e){if(typeof e!="boolean")throw new Z(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Mt(Uu(e))}}function mm(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Du({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:me(e,{size:32,signed:t})}}function ym(e){const t=ai(e),n=Math.ceil(Se(t)/32),r=[];for(let s=0;s<n;s++)r.push(zt(et(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:je(zt(me(Se(t),{size:32})),...r)}}function gm(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const o=[];for(let i=0;i<r.components.length;i++){const a=r.components[i],c=Array.isArray(e)?i:a.name,l=mi({checksumAddress:n,parameter:a,value:e[c]});o.push(l),l.dynamic&&(s=!0)}return{dynamic:s,encoded:s?yi(o):je(...o.map(({encoded:i})=>i))}}function gi(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function Qn(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(Qn);const n=gi(e.type);return!!(n&&Qn({...e,type:n[1]}))}const wm={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Em({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new vm({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new $a({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new $a({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function xm(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(wm);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}class $a extends Z{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class vm extends Z{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class Em extends Z{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function Im(e,t,n={}){const{as:r="Array",checksumAddress:s=!1}=n,o=typeof t=="string"?Mu(t):t,i=xm(o);if(Yt(o)===0&&e.length>0)throw new Am;if(Yt(o)&&Yt(o)<32)throw new Pm({data:typeof t=="string"?t:De(t),parameters:e,size:Yt(o)});let a=0;const c=r==="Array"?[]:{};for(let l=0;l<e.length;++l){const d=e[l];i.setPosition(a);const[h,b]=nn(i,d,{checksumAddress:s,staticPosition:0});a+=b,r==="Array"?c.push(h):c[d.name??l]=h}return c}function wi(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new g0({expectedLength:e.length,givenLength:t.length});const s=lm({checksumAddress:r,parameters:e,values:t}),o=yi(s);return o.length===0?"0x":o}function ao(e,t){if(e.length!==t.length)throw new g0({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(ao.encode(s,o))}return je(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const c=r;return ns(c),Mt(c.toLowerCase(),s?32:0)}if(n==="string")return ai(r);if(n==="bytes")return r;if(n==="bool")return Mt(Uu(r),s?32:1);const o=n.match(b0);if(o){const[c,l,d="256"]=o,h=Number.parseInt(d,10)/8;return me(r,{size:s?32:h,signed:l==="int"})}const i=n.match(rm);if(i){const[c,l]=i;if(Number.parseInt(l,10)!==(r.length-2)/2)throw new y0({expectedSize:Number.parseInt(l,10),value:r});return zt(r,s?32:0)}const a=n.match(nm);if(a&&Array.isArray(r)){const[c,l]=a,d=[];for(let h=0;h<r.length;h++)d.push(t(l,r[h],!0));return d.length===0?"0x":je(...d)}throw new xi(n)}e.encode=t})(ao||(ao={}));function m0(e){return Array.isArray(e)&&typeof e[0]=="string"||typeof e=="string"?Vi(e):e}class Pm extends Z{constructor({data:t,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${Kt(n)})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class Am extends Z{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class Bm extends Z{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class y0 extends Z{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${Se(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class g0 extends Z{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class $m extends Z{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class xi extends Z{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ie=BigInt(0),ge=BigInt(1),Tt=BigInt(2),Sm=BigInt(3),w0=BigInt(4),x0=BigInt(5),v0=BigInt(8);function Ee(e,t){const n=e%t;return n>=Ie?n:t+n}function Ce(e,t,n){let r=e;for(;t-- >Ie;)r*=r,r%=n;return r}function co(e,t){if(e===Ie)throw new Error("invert: expected non-zero number");if(t<=Ie)throw new Error("invert: expected positive modulus, got "+t);let n=Ee(e,t),r=t,s=Ie,o=ge;for(;n!==Ie;){const a=r/n,c=r%n,l=s-o*a;r=n,n=c,s=o,o=l}if(r!==ge)throw new Error("invert: does not exist");return Ee(s,t)}function E0(e,t){const n=(e.ORDER+ge)/w0,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Tm(e,t){const n=(e.ORDER-x0)/v0,r=e.mul(t,Tt),s=e.pow(r,n),o=e.mul(t,s),i=e.mul(e.mul(o,Tt),s),a=e.mul(o,e.sub(i,e.ONE));if(!e.eql(e.sqr(a),t))throw new Error("Cannot find square root");return a}function Cm(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-ge,n=0;for(;t%Tt===Ie;)t/=Tt,n++;let r=Tt;const s=vi(e);for(;Sa(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return E0;let o=s.pow(r,t);const i=(t+ge)/Tt;return function(c,l){if(c.is0(l))return l;if(Sa(c,l)!==1)throw new Error("Cannot find square root");let d=n,h=c.mul(c.ONE,o),b=c.pow(l,t),m=c.pow(l,i);for(;!c.eql(b,c.ONE);){if(c.is0(b))return c.ZERO;let g=1,w=c.sqr(b);for(;!c.eql(w,c.ONE);)if(g++,w=c.sqr(w),g===d)throw new Error("Cannot find square root");const B=ge<<BigInt(d-g-1),I=c.pow(h,B);d=g,h=c.sqr(I),b=c.mul(b,h),m=c.mul(m,I)}return m}}function Rm(e){return e%w0===Sm?E0:e%v0===x0?Tm:Cm(e)}const km=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Nm(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=km.reduce((r,s)=>(r[s]="function",r),t);return Kr(e,n)}function Om(e,t,n){if(n<Ie)throw new Error("invalid exponent, negatives unsupported");if(n===Ie)return e.ONE;if(n===ge)return t;let r=e.ONE,s=t;for(;n>Ie;)n&ge&&(r=e.mul(r,s)),s=e.sqr(s),n>>=ge;return r}function I0(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((i,a,c)=>e.is0(a)?i:(r[c]=i,e.mul(i,a)),e.ONE),o=e.inv(s);return t.reduceRight((i,a,c)=>e.is0(a)?i:(r[c]=e.mul(i,r[c]),e.mul(i,a)),o),r}function Sa(e,t){const n=(e.ORDER-ge)/Tt,r=e.pow(t,n),s=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),i=e.eql(r,e.neg(e.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function P0(e,t){t!==void 0&&Pn(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function vi(e,t,n=!1,r={}){if(e<=Ie)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:o}=P0(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let i;const a=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:o,MASK:Wr(s),ZERO:Ie,ONE:ge,create:c=>Ee(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ie<=c&&c<e},is0:c=>c===Ie,isOdd:c=>(c&ge)===ge,neg:c=>Ee(-c,e),eql:(c,l)=>c===l,sqr:c=>Ee(c*c,e),add:(c,l)=>Ee(c+l,e),sub:(c,l)=>Ee(c-l,e),mul:(c,l)=>Ee(c*l,e),pow:(c,l)=>Om(a,c,l),div:(c,l)=>Ee(c*co(l,e),e),sqrN:c=>c*c,addN:(c,l)=>c+l,subN:(c,l)=>c-l,mulN:(c,l)=>c*l,inv:c=>co(c,e),sqrt:r.sqrt||(c=>(i||(i=Rm(e)),i(a,c))),toBytes:c=>n?ku(c,o):ir(c,o),fromBytes:c=>{if(c.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+c.length);return n?Ru(c):Rt(c)},invertBatch:c=>I0(a,c),cmov:(c,l,d)=>d?l:c});return Object.freeze(a)}function A0(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function B0(e){const t=A0(e);return t+Math.ceil(t/2)}function Fm(e,t,n=!1){const r=e.length,s=A0(t),o=B0(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const i=n?Ru(e):Rt(e),a=Ee(i,t-ge)+ge;return n?ku(a,s):ir(a,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Ta=BigInt(0),uo=BigInt(1);function Ps(e,t){const n=t.negate();return e?n:t}function $0(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function As(e,t){$0(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,o=Wr(e),i=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:s,shiftBy:i}}function Ca(e,t,n){const{windowSize:r,mask:s,maxNumber:o,shiftBy:i}=n;let a=Number(e&s),c=e>>i;a>r&&(a-=o,c+=uo);const l=t*r,d=l+Math.abs(a)-1,h=a===0,b=a<0,m=t%2!==0;return{nextN:c,offset:d,isZero:h,isNeg:b,isNegF:m,offsetF:l}}function _m(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Mm(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const Bs=new WeakMap,S0=new WeakMap;function $s(e){return S0.get(e)||1}function zm(e,t){return{constTimeNegate:Ps,hasPrecomputes(n){return $s(n)!==1},unsafeLadder(n,r,s=e.ZERO){let o=n;for(;r>Ta;)r&uo&&(s=s.add(o)),o=o.double(),r>>=uo;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=As(r,t),i=[];let a=n,c=a;for(let l=0;l<s;l++){c=a,i.push(c);for(let d=1;d<o;d++)c=c.add(a),i.push(c);a=c.double()}return i},wNAF(n,r,s){let o=e.ZERO,i=e.BASE;const a=As(n,t);for(let c=0;c<a.windows;c++){const{nextN:l,offset:d,isZero:h,isNeg:b,isNegF:m,offsetF:g}=Ca(s,c,a);s=l,h?i=i.add(Ps(m,r[g])):o=o.add(Ps(b,r[d]))}return{p:o,f:i}},wNAFUnsafe(n,r,s,o=e.ZERO){const i=As(n,t);for(let a=0;a<i.windows&&s!==Ta;a++){const{nextN:c,offset:l,isZero:d,isNeg:h}=Ca(s,a,i);if(s=c,!d){const b=r[l];o=o.add(h?b.negate():b)}}return o},getPrecomputes(n,r,s){let o=Bs.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&Bs.set(r,s(o))),o},wNAFCached(n,r,s){const o=$s(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const i=$s(n);return i===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(i,this.getPrecomputes(i,n,s),r,o)},setWindowSize(n,r){$0(r,t),S0.set(n,r),Bs.delete(n)}}}function Um(e,t,n,r){_m(n,e),Mm(r,t);const s=n.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=Vp(BigInt(s));let c=1;a>12?c=a-3:a>4?c=a-2:a>0&&(c=2);const l=Wr(c),d=new Array(Number(l)+1).fill(i),h=Math.floor((t.BITS-1)/c)*c;let b=i;for(let m=h;m>=0;m-=c){d.fill(i);for(let w=0;w<o;w++){const B=r[w],I=Number(B>>BigInt(m)&l);d[I]=d[I].add(n[w])}let g=i;for(let w=d.length-1,B=i;w>0;w--)B=B.add(d[w]),g=g.add(B);if(b=b.add(g),m!==0)for(let w=0;w<c;w++)b=b.double()}return b}function T0(e){return Nm(e.Fp),Kr(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...P0(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ra(e){e.lowS!==void 0&&Jn("lowS",e.lowS),e.prehash!==void 0&&Jn("prehash",e.prehash)}function Lm(e){const t=T0(e);Kr(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class jm extends Error{constructor(t=""){super(t)}}const ft={Err:jm,_tlv:{encode:(e,t)=>{const{Err:n}=ft;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=yr(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?yr(s.length/2|128):"";return yr(e)+o+s+t},decode(e,t){const{Err:n}=ft;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let i=0;if(!o)i=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const l=t.subarray(r,r+c);if(l.length!==c)throw new n("tlv.decode: length bytes not complete");if(l[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of l)i=i<<8|d;if(r+=c,i<128)throw new n("tlv.decode(long): not minimal encoding")}const a=t.subarray(r,r+i);if(a.length!==i)throw new n("tlv.decode: wrong value length");return{v:a,l:t.subarray(r+i)}}},_int:{encode(e){const{Err:t}=ft;if(e<lt)throw new t("integer: negative integers are not allowed");let n=yr(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ft;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Rt(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ft,s=Oe("signature",e),{v:o,l:i}=r.decode(48,s);if(i.length)throw new t("invalid signature: left bytes after parsing");const{v:a,l:c}=r.decode(2,o),{v:l,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(l)}},hexFromSig(e){const{_tlv:t,_int:n}=ft,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}};function Ss(e,t){return Xn(ir(e,t))}const lt=BigInt(0),le=BigInt(1);BigInt(2);const Ts=BigInt(3),Dm=BigInt(4);function Hm(e){const t=Lm(e),{Fp:n}=t,r=vi(t.n,t.nBitLength),s=t.toBytes||((P,v,A)=>{const R=v.toAffine();return Ar(Uint8Array.from([4]),n.toBytes(R.x),n.toBytes(R.y))}),o=t.fromBytes||(P=>{const v=P.subarray(1),A=n.fromBytes(v.subarray(0,n.BYTES)),R=n.fromBytes(v.subarray(n.BYTES,2*n.BYTES));return{x:A,y:R}});function i(P){const{a:v,b:A}=t,R=n.sqr(P),C=n.mul(R,P);return n.add(n.add(C,n.mul(P,v)),A)}function a(P,v){const A=n.sqr(v),R=i(P);return n.eql(A,R)}if(!a(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(t.a,Ts),Dm),l=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(c,l)))throw new Error("bad curve params: a or b");function d(P){return ii(P,le,t.n)}function h(P){const{allowedPrivateKeyLengths:v,nByteLength:A,wrapPrivateKey:R,n:C}=t;if(v&&typeof P!="bigint"){if(or(P)&&(P=Xn(P)),typeof P!="string"||!v.includes(P.length))throw new Error("invalid private key");P=P.padStart(A*2,"0")}let O;try{O=typeof P=="bigint"?P:Rt(Oe("private key",P,A))}catch{throw new Error("invalid private key, expected hex or "+A+" bytes, got "+typeof P)}return R&&(O=Ee(O,C)),tn("private key",O,le,C),O}function b(P){if(!(P instanceof w))throw new Error("ProjectivePoint expected")}const m=ha((P,v)=>{const{px:A,py:R,pz:C}=P;if(n.eql(C,n.ONE))return{x:A,y:R};const O=P.is0();v==null&&(v=O?n.ONE:n.inv(C));const U=n.mul(A,v),H=n.mul(R,v),M=n.mul(C,v);if(O)return{x:n.ZERO,y:n.ZERO};if(!n.eql(M,n.ONE))throw new Error("invZ was invalid");return{x:U,y:H}}),g=ha(P=>{if(P.is0()){if(t.allowInfinityPoint&&!n.is0(P.py))return;throw new Error("bad point: ZERO")}const{x:v,y:A}=P.toAffine();if(!n.isValid(v)||!n.isValid(A))throw new Error("bad point: x or y not FE");if(!a(v,A))throw new Error("bad point: equation left != right");if(!P.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class w{constructor(v,A,R){if(v==null||!n.isValid(v))throw new Error("x required");if(A==null||!n.isValid(A)||n.is0(A))throw new Error("y required");if(R==null||!n.isValid(R))throw new Error("z required");this.px=v,this.py=A,this.pz=R,Object.freeze(this)}static fromAffine(v){const{x:A,y:R}=v||{};if(!v||!n.isValid(A)||!n.isValid(R))throw new Error("invalid affine point");if(v instanceof w)throw new Error("projective point not allowed");const C=O=>n.eql(O,n.ZERO);return C(A)&&C(R)?w.ZERO:new w(A,R,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(v){const A=I0(n,v.map(R=>R.pz));return v.map((R,C)=>R.toAffine(A[C])).map(w.fromAffine)}static fromHex(v){const A=w.fromAffine(o(Oe("pointHex",v)));return A.assertValidity(),A}static fromPrivateKey(v){return w.BASE.multiply(h(v))}static msm(v,A){return Um(w,r,v,A)}_setWindowSize(v){T.setWindowSize(this,v)}assertValidity(){g(this)}hasEvenY(){const{y:v}=this.toAffine();if(n.isOdd)return!n.isOdd(v);throw new Error("Field doesn't support isOdd")}equals(v){b(v);const{px:A,py:R,pz:C}=this,{px:O,py:U,pz:H}=v,M=n.eql(n.mul(A,H),n.mul(O,C)),L=n.eql(n.mul(R,H),n.mul(U,C));return M&&L}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){const{a:v,b:A}=t,R=n.mul(A,Ts),{px:C,py:O,pz:U}=this;let H=n.ZERO,M=n.ZERO,L=n.ZERO,z=n.mul(C,C),X=n.mul(O,O),N=n.mul(U,U),F=n.mul(C,O);return F=n.add(F,F),L=n.mul(C,U),L=n.add(L,L),H=n.mul(v,L),M=n.mul(R,N),M=n.add(H,M),H=n.sub(X,M),M=n.add(X,M),M=n.mul(H,M),H=n.mul(F,H),L=n.mul(R,L),N=n.mul(v,N),F=n.sub(z,N),F=n.mul(v,F),F=n.add(F,L),L=n.add(z,z),z=n.add(L,z),z=n.add(z,N),z=n.mul(z,F),M=n.add(M,z),N=n.mul(O,U),N=n.add(N,N),z=n.mul(N,F),H=n.sub(H,z),L=n.mul(N,X),L=n.add(L,L),L=n.add(L,L),new w(H,M,L)}add(v){b(v);const{px:A,py:R,pz:C}=this,{px:O,py:U,pz:H}=v;let M=n.ZERO,L=n.ZERO,z=n.ZERO;const X=t.a,N=n.mul(t.b,Ts);let F=n.mul(A,O),G=n.mul(R,U),k=n.mul(C,H),j=n.add(A,R),V=n.add(O,U);j=n.mul(j,V),V=n.add(F,G),j=n.sub(j,V),V=n.add(A,C);let q=n.add(O,H);return V=n.mul(V,q),q=n.add(F,k),V=n.sub(V,q),q=n.add(R,C),M=n.add(U,H),q=n.mul(q,M),M=n.add(G,k),q=n.sub(q,M),z=n.mul(X,V),M=n.mul(N,k),z=n.add(M,z),M=n.sub(G,z),z=n.add(G,z),L=n.mul(M,z),G=n.add(F,F),G=n.add(G,F),k=n.mul(X,k),V=n.mul(N,V),G=n.add(G,k),k=n.sub(F,k),k=n.mul(X,k),V=n.add(V,k),F=n.mul(G,V),L=n.add(L,F),F=n.mul(q,V),M=n.mul(j,M),M=n.sub(M,F),F=n.mul(j,G),z=n.mul(q,z),z=n.add(z,F),new w(M,L,z)}subtract(v){return this.add(v.negate())}is0(){return this.equals(w.ZERO)}wNAF(v){return T.wNAFCached(this,v,w.normalizeZ)}multiplyUnsafe(v){const{endo:A,n:R}=t;tn("scalar",v,lt,R);const C=w.ZERO;if(v===lt)return C;if(this.is0()||v===le)return this;if(!A||T.hasPrecomputes(this))return T.wNAFCachedUnsafe(this,v,w.normalizeZ);let{k1neg:O,k1:U,k2neg:H,k2:M}=A.splitScalar(v),L=C,z=C,X=this;for(;U>lt||M>lt;)U&le&&(L=L.add(X)),M&le&&(z=z.add(X)),X=X.double(),U>>=le,M>>=le;return O&&(L=L.negate()),H&&(z=z.negate()),z=new w(n.mul(z.px,A.beta),z.py,z.pz),L.add(z)}multiply(v){const{endo:A,n:R}=t;tn("scalar",v,le,R);let C,O;if(A){const{k1neg:U,k1:H,k2neg:M,k2:L}=A.splitScalar(v);let{p:z,f:X}=this.wNAF(H),{p:N,f:F}=this.wNAF(L);z=T.constTimeNegate(U,z),N=T.constTimeNegate(M,N),N=new w(n.mul(N.px,A.beta),N.py,N.pz),C=z.add(N),O=X.add(F)}else{const{p:U,f:H}=this.wNAF(v);C=U,O=H}return w.normalizeZ([C,O])[0]}multiplyAndAddUnsafe(v,A,R){const C=w.BASE,O=(H,M)=>M===lt||M===le||!H.equals(C)?H.multiplyUnsafe(M):H.multiply(M),U=O(this,A).add(O(v,R));return U.is0()?void 0:U}toAffine(v){return m(this,v)}isTorsionFree(){const{h:v,isTorsionFree:A}=t;if(v===le)return!0;if(A)return A(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:v,clearCofactor:A}=t;return v===le?this:A?A(w,this):this.multiplyUnsafe(t.h)}toRawBytes(v=!0){return Jn("isCompressed",v),this.assertValidity(),s(w,this,v)}toHex(v=!0){return Jn("isCompressed",v),Xn(this.toRawBytes(v))}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);const{endo:B,nBitLength:I}=t,T=zm(w,B?Math.ceil(I/2):I);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:h,weierstrassEquation:i,isWithinCurveOrder:d}}function Gm(e){const t=T0(e);return Kr(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Vm(e){const t=Gm(e),{Fp:n,n:r,nByteLength:s,nBitLength:o}=t,i=n.BYTES+1,a=2*n.BYTES+1;function c(N){return Ee(N,r)}function l(N){return co(N,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:h,weierstrassEquation:b,isWithinCurveOrder:m}=Hm({...t,toBytes(N,F,G){const k=F.toAffine(),j=n.toBytes(k.x),V=Ar;return Jn("isCompressed",G),G?V(Uint8Array.from([F.hasEvenY()?2:3]),j):V(Uint8Array.from([4]),j,n.toBytes(k.y))},fromBytes(N){const F=N.length,G=N[0],k=N.subarray(1);if(F===i&&(G===2||G===3)){const j=Rt(k);if(!ii(j,le,n.ORDER))throw new Error("Point is not on curve");const V=b(j);let q;try{q=n.sqrt(V)}catch(ae){const re=ae instanceof Error?": "+ae.message:"";throw new Error("Point is not on curve"+re)}const J=(q&le)===le;return(G&1)===1!==J&&(q=n.neg(q)),{x:j,y:q}}else if(F===a&&G===4){const j=n.fromBytes(k.subarray(0,n.BYTES)),V=n.fromBytes(k.subarray(n.BYTES,2*n.BYTES));return{x:j,y:V}}else{const j=i,V=a;throw new Error("invalid Point, expected length of "+j+", or uncompressed "+V+", got "+F)}}});function g(N){const F=r>>le;return N>F}function w(N){return g(N)?c(-N):N}const B=(N,F,G)=>Rt(N.slice(F,G));class I{constructor(F,G,k){tn("r",F,le,r),tn("s",G,le,r),this.r=F,this.s=G,k!=null&&(this.recovery=k),Object.freeze(this)}static fromCompact(F){const G=s;return F=Oe("compactSignature",F,G*2),new I(B(F,0,G),B(F,G,2*G))}static fromDER(F){const{r:G,s:k}=ft.toSig(Oe("DER",F));return new I(G,k)}assertValidity(){}addRecoveryBit(F){return new I(this.r,this.s,F)}recoverPublicKey(F){const{r:G,s:k,recovery:j}=this,V=C(Oe("msgHash",F));if(j==null||![0,1,2,3].includes(j))throw new Error("recovery id invalid");const q=j===2||j===3?G+t.n:G;if(q>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const J=j&1?"03":"02",ue=d.fromHex(J+Ss(q,n.BYTES)),ae=l(q),re=c(-V*ae),fe=c(k*ae),Fe=d.BASE.multiplyAndAddUnsafe(ue,re,fe);if(!Fe)throw new Error("point at infinify");return Fe.assertValidity(),Fe}hasHighS(){return g(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Pr(this.toDERHex())}toDERHex(){return ft.hexFromSig(this)}toCompactRawBytes(){return Pr(this.toCompactHex())}toCompactHex(){const F=s;return Ss(this.r,F)+Ss(this.s,F)}}const T={isValidPrivateKey(N){try{return h(N),!0}catch{return!1}},normPrivateKeyToScalar:h,randomPrivateKey:()=>{const N=B0(t.n);return Fm(t.randomBytes(N),t.n)},precompute(N=8,F=d.BASE){return F._setWindowSize(N),F.multiply(BigInt(3)),F}};function P(N,F=!0){return d.fromPrivateKey(N).toRawBytes(F)}function v(N){if(typeof N=="bigint")return!1;if(N instanceof d)return!0;const G=Oe("key",N).length,k=n.BYTES,j=k+1,V=2*k+1;if(!(t.allowedPrivateKeyLengths||s===j))return G===j||G===V}function A(N,F,G=!0){if(v(N)===!0)throw new Error("first arg must be private key");if(v(F)===!1)throw new Error("second arg must be public key");return d.fromHex(F).multiply(h(N)).toRawBytes(G)}const R=t.bits2int||function(N){if(N.length>8192)throw new Error("input is too large");const F=Rt(N),G=N.length*8-o;return G>0?F>>BigInt(G):F},C=t.bits2int_modN||function(N){return c(R(N))},O=Wr(o);function U(N){return tn("num < 2^"+o,N,lt,O),ir(N,s)}function H(N,F,G=M){if(["recovered","canonical"].some(_e=>_e in G))throw new Error("sign() legacy options not supported");const{hash:k,randomBytes:j}=t;let{lowS:V,prehash:q,extraEntropy:J}=G;V==null&&(V=!0),N=Oe("msgHash",N),Ra(G),q&&(N=Oe("prehashed msgHash",k(N)));const ue=C(N),ae=h(F),re=[U(ae),U(ue)];if(J!=null&&J!==!1){const _e=J===!0?j(n.BYTES):J;re.push(Oe("extraEntropy",_e))}const fe=Ar(...re),Fe=ue;function Ke(_e){const ot=R(_e);if(!m(ot))return;const mn=l(ot),yt=d.BASE.multiply(ot).toAffine(),ve=c(yt.x);if(ve===lt)return;const Me=c(mn*c(Fe+ve*ae));if(Me===lt)return;let Bt=(yt.x===ve?0:2)|Number(yt.y&le),gt=Me;return V&&g(Me)&&(gt=w(Me),Bt^=1),new I(ve,gt,Bt)}return{seed:fe,k2sig:Ke}}const M={lowS:t.lowS,prehash:!1},L={lowS:t.lowS,prehash:!1};function z(N,F,G=M){const{seed:k,k2sig:j}=H(N,F,G),V=t;return qp(V.hash.outputLen,V.nByteLength,V.hmac)(k,j)}d.BASE._setWindowSize(8);function X(N,F,G,k=L){var Bt;const j=N;F=Oe("msgHash",F),G=Oe("publicKey",G);const{lowS:V,prehash:q,format:J}=k;if(Ra(k),"strict"in k)throw new Error("options.strict was renamed to lowS");if(J!==void 0&&J!=="compact"&&J!=="der")throw new Error("format must be compact or der");const ue=typeof j=="string"||or(j),ae=!ue&&!J&&typeof j=="object"&&j!==null&&typeof j.r=="bigint"&&typeof j.s=="bigint";if(!ue&&!ae)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let re,fe;try{if(ae&&(re=new I(j.r,j.s)),ue){try{J!=="compact"&&(re=I.fromDER(j))}catch(gt){if(!(gt instanceof ft.Err))throw gt}!re&&J!=="der"&&(re=I.fromCompact(j))}fe=d.fromHex(G)}catch{return!1}if(!re||V&&re.hasHighS())return!1;q&&(F=t.hash(F));const{r:Fe,s:Ke}=re,_e=C(F),ot=l(Ke),mn=c(_e*ot),yt=c(Fe*ot),ve=(Bt=d.BASE.multiplyAndAddUnsafe(fe,mn,yt))==null?void 0:Bt.toAffine();return ve?c(ve.x)===Fe:!1}return{CURVE:t,getPublicKey:P,getSharedSecret:A,sign:z,verify:X,ProjectivePoint:d,Signature:I,utils:T}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function qm(e){return{hash:e,hmac:(t,...n)=>uc(e,t,ff(...n)),randomBytes:lf}}function Wm(e,t){const n=r=>Vm({...e,...qm(r)});return{...n(t),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const C0=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ka=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Km=BigInt(0),Zm=BigInt(1),fo=BigInt(2),Na=(e,t)=>(e+t/fo)/t;function Ym(e){const t=C0,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,d=l*l*e%t,h=Ce(d,n,t)*d%t,b=Ce(h,n,t)*d%t,m=Ce(b,fo,t)*l%t,g=Ce(m,s,t)*m%t,w=Ce(g,o,t)*g%t,B=Ce(w,a,t)*w%t,I=Ce(B,c,t)*B%t,T=Ce(I,a,t)*w%t,P=Ce(T,n,t)*d%t,v=Ce(P,i,t)*g%t,A=Ce(v,r,t)*l%t,R=Ce(A,fo,t);if(!lo.eql(lo.sqr(R),e))throw new Error("Cannot find square root");return R}const lo=vi(C0,void 0,void 0,{sqrt:Ym}),R0=Wm({a:Km,b:BigInt(7),Fp:lo,n:ka,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=ka,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Zm*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,i=BigInt("0x100000000000000000000000000000000"),a=Na(o*e,t),c=Na(-r*e,t);let l=Ee(e-a*n-c*s,t),d=Ee(-a*r-c*o,t);const h=l>i,b=d>i;if(h&&(l=t-l),b&&(d=t-d),l>i||d>i)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:b,k2:d}}}},Wa),Jm=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:R0},Symbol.toStringTag,{value:"Module"}));function k0(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new Cs({signature:e});if(typeof e.s>"u")throw new Cs({signature:e});if(n&&typeof e.yParity>"u")throw new Cs({signature:e});if(e.r<0n||e.r>Aa)throw new sy({value:e.r});if(e.s<0n||e.s>Aa)throw new oy({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new Ii({value:e.yParity})}function Xm(e){return N0(De(e))}function N0(e){if(e.length!==130&&e.length!==132)throw new ry({signature:e});const t=BigInt(et(e,0,32)),n=BigInt(et(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return Ei(s)}catch{throw new Ii({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function Qm(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return ey(e)}function ey(e){const t=typeof e=="string"?N0(e):e instanceof Uint8Array?Xm(e):typeof e.r=="string"?ny(e):e.v?ty(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return k0(t),t}function ty(e){return{r:e.r,s:e.s,yParity:Ei(e.v)}}function ny(e){const t=(()=>{const n=e.v?Number(e.v):void 0;let r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=Ei(n)),typeof r!="number")throw new Ii({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Ei(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new iy({value:e})}class ry extends Z{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Se(y1(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class Cs extends Z{constructor({signature:t}){super(`Signature \`${_u(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class sy extends Z{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class oy extends Z{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class Ii extends Z{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class iy extends Z{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function ay(e,t={}){return typeof e.chainId=="string"?cy(e):{...e,...t.signature}}function cy(e){const{address:t,chainId:n,nonce:r}=e,s=Qm(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...s}}const uy="0x8010801080108010801080108010801080108010801080108010801080108010",fy=m0("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function O0(e){if(typeof e=="string"){if(et(e,-32)!==uy)throw new hy(e)}else k0(e.authorization)}function ly(e){O0(e);const t=ju(et(e,-64,-32)),n=et(e,-t-64,-64),r=et(e,0,-t-64),[s,o,i]=Im(fy,n);return{authorization:ay({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...i&&i!=="0x"?{data:i,to:o}:{}}}function dy(e){try{return O0(e),!0}catch{return!1}}let hy=class extends Z{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};function py(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function by(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?nt(e.nonce):void 0,storageProof:e.storageProof?py(e.storageProof):void 0}}async function my(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",i=n!==void 0?_(n):void 0,a=await e.request({method:"eth_getProof",params:[t,s,i||o]});return by(a)}async function yy(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?_(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function Pi(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o,sender:i,nonce:a}){var b,m,g;const c=r||"latest",l=n!==void 0?_(n):void 0;let d=null;if(s?d=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?d=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,_(o)]},{dedupe:!0}):typeof o=="number"?d=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[l||c,_(o)]},{dedupe:!!l}):i&&typeof a=="number"&&(d=await e.request({method:"eth_getTransactionBySenderAndNonce",params:[i,_(a)]},{dedupe:!0})),!d)throw new iu({blockHash:t,blockNumber:n,blockTag:c,hash:s,index:o});return(((g=(m=(b=e.chain)==null?void 0:b.formatters)==null?void 0:m.transaction)==null?void 0:g.format)||Vr)(d,"getTransaction")}async function gy(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([W(e,ur,"getBlockNumber")({}),t?W(e,Pi,"getTransaction")({hash:t}):void 0]),o=(n==null?void 0:n.blockNumber)||(s==null?void 0:s.blockNumber);return o?r-o+1n:0n}async function vr(e,{hash:t}){var s,o,i;const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new au({hash:t});return(((i=(o=(s=e.chain)==null?void 0:s.formatters)==null?void 0:o.transactionReceipt)==null?void 0:i.format)||fi)(n,"getTransactionReceipt")}async function wy(e,t){var T;const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:o,blockOverrides:i,blockTag:a,stateOverride:c}=t,l=t.contracts,{batchSize:d=t.batchSize??1024,deployless:h=t.deployless??!1}=typeof((T=e.batch)==null?void 0:T.multicall)=="object"?e.batch.multicall:{},b=(()=>{if(t.multicallAddress)return t.multicallAddress;if(h)return null;if(e.chain)return bn({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),m=[[]];let g=0,w=0;for(let P=0;P<l.length;P++){const{abi:v,address:A,args:R,functionName:C}=l[P];try{const O=We({abi:v,args:R,functionName:C});w+=(O.length-2)/2,d>0&&w>d&&m[g].length>0&&(g++,w=(O.length-2)/2,m[g]=[]),m[g]=[...m[g],{allowFailure:!0,callData:O,target:A}]}catch(O){const U=un(O,{abi:v,address:A,args:R,docsPath:"/docs/contract/multicall",functionName:C,sender:n});if(!s)throw U;m[g]=[...m[g],{allowFailure:!0,callData:"0x",target:A}]}}const B=await Promise.allSettled(m.map(P=>W(e,He,"readContract")({...b===null?{code:ci}:{address:b},abi:Br,account:n,args:[P],authorizationList:r,blockNumber:o,blockOverrides:i,blockTag:a,functionName:"aggregate3",stateOverride:c}))),I=[];for(let P=0;P<B.length;P++){const v=B[P];if(v.status==="rejected"){if(!s)throw v.reason;for(let R=0;R<m[P].length;R++)I.push({status:"failure",error:v.reason,result:void 0});continue}const A=v.value;for(let R=0;R<A.length;R++){const{returnData:C,success:O}=A[R],{callData:U}=m[P][R],{abi:H,address:M,functionName:L,args:z}=l[I.length];try{if(U==="0x")throw new tr;if(!O)throw new jr({data:C});const X=jt({abi:H,args:z,data:C,functionName:L});I.push(s?{result:X,status:"success"}:X)}catch(X){const N=un(X,{abi:H,address:M,args:z,docsPath:"/docs/contract/multicall",functionName:L});if(!s)throw N;I.push({error:N,result:void 0,status:"failure"})}}}if(I.length!==l.length)throw new S("multicall results mismatch");return I}async function ho(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:s,returnFullTransactions:o,traceTransfers:i,validation:a}=t;try{const c=[];for(const b of s){const m=b.blockOverrides?Gu(b.blockOverrides):void 0,g=b.calls.map(B=>{const I=B,T=I.account?qe(I.account):void 0,P=I.abi?We(I):I.data,v={...I,account:T,data:I.dataSuffix?st([P||"0x",I.dataSuffix]):P,from:I.from??(T==null?void 0:T.address)};return sr(v),Hr(v)}),w=b.stateOverrides?Wo(b.stateOverrides):void 0;c.push({blockOverrides:m,calls:g,stateOverrides:w})}const d=(typeof n=="bigint"?_(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:o,traceTransfers:i,validation:a},d]})).map((b,m)=>({...Zo(b),calls:b.calls.map((g,w)=>{var H,M;const{abi:B,args:I,functionName:T,to:P}=s[m].calls[w],v=((H=g.error)==null?void 0:H.data)??g.returnData,A=BigInt(g.gasUsed),R=(M=g.logs)==null?void 0:M.map(L=>bt(L)),C=g.status==="0x1"?"success":"failure",O=B&&C==="success"&&v!=="0x"?jt({abi:B,data:v,functionName:T}):null,U=(()=>{var z;if(C==="success")return;let L;if(((z=g.error)==null?void 0:z.data)==="0x"?L=new tr:g.error&&(L=new jr(g.error)),!!L)return un(L,{abi:B??[],address:P??"0x",args:I,functionName:T??"<unknown>"})})();return{data:v,gasUsed:A,logs:R,status:C,...C==="success"?{result:O}:{error:U}}})}))}catch(c){const l=c,d=Go(l,{});throw d instanceof Dr?l:d}}function po(e){let t=!0,n="",r=0,s="",o=!1;for(let i=0;i<e.length;i++){const a=e[i];if(["(",")",","].includes(a)&&(t=!0),a==="("&&r++,a===")"&&r--,!!t){if(r===0){if(a===" "&&["event","function","error",""].includes(s))s="";else if(s+=a,a===")"){o=!0;break}continue}if(a===" "){e[i-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=a,n+=a}}if(!o)throw new Z("Unable to normalize signature.");return s}function bo(e,t){const n=typeof e,r=t.type;switch(r){case"address":return oo(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>bo(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>bo(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function F0(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return F0(s.components,o.components,n[r]);const i=[s.type,o.type];if(i.includes("address")&&i.includes("bytes20")?!0:i.includes("address")&&i.includes("string")?oo(n[r],{strict:!1}):i.includes("address")&&i.includes("bytes")?oo(n[r],{strict:!1}):!1)return i}}function _0(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?Gi(e):e;return{...r,...n?{hash:Jt(r)}:{}}}function rs(e,t,n){const{args:r=[],prepare:s=!0}=n??{},o=g1(t,{strict:!1}),i=e.filter(l=>o?l.type==="function"||l.type==="error"?M0(l)===et(t,0,4):l.type==="event"?Jt(l)===t:!1:"name"in l&&l.name===t);if(i.length===0)throw new $r({name:t});if(i.length===1)return{...i[0],...s?{hash:Jt(i[0])}:{}};let a;for(const l of i){if(!("inputs"in l))continue;if(!r||r.length===0){if(!l.inputs||l.inputs.length===0)return{...l,...s?{hash:Jt(l)}:{}};continue}if(!l.inputs||l.inputs.length===0||l.inputs.length!==r.length)continue;if(r.every((h,b)=>{const m="inputs"in l&&l.inputs[b];return m?bo(h,m):!1})){if(a&&"inputs"in a&&a.inputs){const h=F0(l.inputs,a.inputs,r);if(h)throw new vy({abiItem:l,type:h[0]},{abiItem:a,type:h[1]})}a=l}}const c=(()=>{if(a)return a;const[l,...d]=i;return{...l,overloads:d}})();if(!c)throw new $r({name:t});return{...c,...s?{hash:Jt(c)}:{}}}function M0(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return rs(n,r)}return e[0]})();return et(Jt(t),0,4)}function xy(...e){const t=(()=>{if(Array.isArray(e[0])){const[r,s]=e;return rs(r,s)}return e[0]})(),n=typeof t=="string"?t:Ir(t);return po(n)}function Jt(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return rs(n,r)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:h0(ai(xy(t)))}class vy extends Z{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${po(Ir(t.abiItem))}\`, and`,`\`${n.type}\` in \`${po(Ir(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class $r extends Z{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function Ey(...e){var o;const[t,n]=(()=>{if(Array.isArray(e[0])){const[i,a]=e;return[Py(i),a]}return e})(),{bytecode:r,args:s}=n;return je(r,(o=t.inputs)!=null&&o.length&&(s!=null&&s.length)?wi(t.inputs,s):"0x")}function Iy(e){return _0(e)}function Py(e){const t=e.find(n=>n.type==="constructor");if(!t)throw new $r({name:"constructor"});return t}function Ay(...e){const[t,n=[]]=(()=>{if(Array.isArray(e[0])){const[l,d,h]=e;return[Oa(l,d,{args:h}),h]}const[a,c]=e;return[a,c]})(),{overloads:r}=t,s=r?Oa([t,...r],t.name,{args:n}):t,o=By(s),i=n.length>0?wi(s.inputs,n):void 0;return i?je(o,i):o}function Vt(e,t={}){return _0(e,t)}function Oa(e,t,n){const r=rs(e,t,n);if(r.type!=="function")throw new $r({name:t,type:"function"});return r}function By(e){return M0(e)}const $y="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Je="0x0000000000000000000000000000000000000000",Sy="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function Ty(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:i,traceTransfers:a,validation:c}=t,l=t.account?qe(t.account):void 0;if(i&&!l)throw new S("`account` is required when `traceAssetChanges` is true");const d=l?Ey(Iy("constructor(bytes, bytes)"),{bytecode:Ku,args:[Sy,Ay(Vt("function getBalance(address)"),[l.address])]}):void 0,h=i?await Promise.all(t.calls.map(async k=>{if(!k.data&&!k.abi)return;const{accessList:j}=await o0(e,{account:l.address,...k,data:k.abi?We(k):k.data});return j.map(({address:V,storageKeys:q})=>q.length>0?V:null)})).then(k=>k.flat().filter(Boolean)):[],b=await ho(e,{blockNumber:n,blockTag:r,blocks:[...i?[{calls:[{data:d}],stateOverrides:o},{calls:h.map((k,j)=>({abi:[Vt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:Je,nonce:j})),stateOverrides:[{address:Je,nonce:0}]}]:[],{calls:[...s,{}].map(k=>({...k,from:l==null?void 0:l.address})),stateOverrides:o},...i?[{calls:[{data:d}]},{calls:h.map((k,j)=>({abi:[Vt("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[l.address],to:k,from:Je,nonce:j})),stateOverrides:[{address:Je,nonce:0}]},{calls:h.map((k,j)=>({to:k,abi:[Vt("function decimals() returns (uint256)")],functionName:"decimals",from:Je,nonce:j})),stateOverrides:[{address:Je,nonce:0}]},{calls:h.map((k,j)=>({to:k,abi:[Vt("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Je,nonce:j})),stateOverrides:[{address:Je,nonce:0}]},{calls:h.map((k,j)=>({to:k,abi:[Vt("function symbol() returns (string)")],functionName:"symbol",from:Je,nonce:j})),stateOverrides:[{address:Je,nonce:0}]}]:[]],traceTransfers:a,validation:c}),m=i?b[2]:b[0],[g,w,,B,I,T,P,v]=i?b:[],{calls:A,...R}=m,C=A.slice(0,-1)??[],O=(g==null?void 0:g.calls)??[],U=(w==null?void 0:w.calls)??[],H=[...O,...U].map(k=>k.status==="success"?ye(k.data):null),M=(B==null?void 0:B.calls)??[],L=(I==null?void 0:I.calls)??[],z=[...M,...L].map(k=>k.status==="success"?ye(k.data):null),X=((T==null?void 0:T.calls)??[]).map(k=>k.status==="success"?k.result:null),N=((v==null?void 0:v.calls)??[]).map(k=>k.status==="success"?k.result:null),F=((P==null?void 0:P.calls)??[]).map(k=>k.status==="success"?k.result:null),G=[];for(const[k,j]of z.entries()){const V=H[k];if(typeof j!="bigint"||typeof V!="bigint")continue;const q=X[k-1],J=N[k-1],ue=F[k-1],ae=k===0?{address:$y,decimals:18,symbol:"ETH"}:{address:h[k-1],decimals:ue||q?Number(q??1):void 0,symbol:J??void 0};G.some(re=>re.token.address===ae.address)||G.push({token:ae,value:{pre:V,post:j,diff:j-V}})}return{assetChanges:G,block:R,results:C}}const z0="0x6492649264926492649264926492649264926492649264926492649264926492";function Cy(e){if(et(e,-32)!==z0)throw new Ny(e)}function Ry(e){const{data:t,signature:n,to:r}=e;return je(wi(m0("address, bytes, bytes"),[r,t,n]),z0)}function ky(e){try{return Cy(e),!0}catch{return!1}}class Ny extends Z{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function Oy({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),i=`0x${new R0.Signature(ye(e),ye(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?i:rt(i)}async function ss(e,t){var a,c,l,d,h,b;const{address:n,hash:r,erc6492VerifierAddress:s=t.universalSignatureVerifierAddress??((l=(c=(a=e.chain)==null?void 0:a.contracts)==null?void 0:c.erc6492Verifier)==null?void 0:l.address),multicallAddress:o=t.multicallAddress??((b=(h=(d=e.chain)==null?void 0:d.contracts)==null?void 0:h.multicall3)==null?void 0:b.address)}=t,i=(()=>{const m=t.signature;return tt(m)?m:typeof m=="object"&&"r"in m&&"s"in m?Oy(m):ie(m)})();try{return dy(i)?await Fy(e,{...t,multicallAddress:o,signature:i}):await _y(e,{...t,verifierAddress:s,signature:i})}catch(m){try{if(qr(Kc(n),await lu({hash:r,signature:i})))return!0}catch{}if(m instanceof Ut)return!1;throw m}}async function Fy(e,t){var B;const{address:n,blockNumber:r,blockTag:s,hash:o,multicallAddress:i}=t,{authorization:a,data:c,signature:l,to:d}=ly(t.signature);if(await so(e,{address:n,blockNumber:r,blockTag:s})===Ve(["0xef0100",a.address]))return await My(e,{address:n,blockNumber:r,blockTag:s,hash:o,signature:l});const b={address:a.address,chainId:Number(a.chainId),nonce:Number(a.nonce),r:_(a.r,{size:32}),s:_(a.s,{size:32}),yParity:a.yParity};if(!await Rb({address:n,authorization:b}))throw new Ut;const g=await W(e,He,"readContract")({...i?{address:i}:{code:ci},authorizationList:[b],abi:Br,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:d??n,callData:c}]:[],{allowFailure:!0,target:n,callData:We({abi:Wu,functionName:"isValidSignature",args:[o,l]})}]]}),w=(B=g[g.length-1])==null?void 0:B.returnData;if(w!=null&&w.startsWith("0x1626ba7e"))return!0;throw new Ut}async function _y(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:i,verifierAddress:a,...c}=t,l=await(async()=>!r&&!s||ky(i)?i:Ry({data:s,signature:i,to:r}))(),d=a?{to:a,data:We({abi:wa,functionName:"isValidSig",args:[n,o,l]}),...c}:{data:ui({abi:wa,args:[n,o,l],bytecode:A1}),...c},{data:h}=await W(e,Jr,"call")(d).catch(b=>{throw b instanceof cu?new Ut:b});if(ph(h??"0x0"))return!0;throw new Ut}async function My(e,t){const{address:n,blockNumber:r,blockTag:s,hash:o,signature:i}=t;if((await W(e,He,"readContract")({address:n,abi:Wu,args:[o,i],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof uu?new Ut:c})).startsWith("0x1626ba7e"))return!0;throw new Ut}class Ut extends Error{}async function zy(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...i}){const a=c0(n);return ss(e,{address:t,factory:r,factoryData:s,hash:a,signature:o,...i})}async function Uy(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:i,primaryType:a,types:c,domain:l,...d}=t,h=Wb({message:i,primaryType:a,types:c,domain:l});return ss(e,{address:n,factory:r,factoryData:s,hash:h,signature:o,...d})}function U0(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:i=e.pollingInterval}){const a=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let c;return a?(()=>{const h=pe(["watchBlockNumber",e.uid,t,n,i]);return Pt(h,{onBlockNumber:r,onError:s},b=>cr(async()=>{var m;try{const g=await W(e,ur,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(g===c)return;if(g-c>1&&n)for(let w=c+1n;w<g;w++)b.onBlockNumber(w,c),c=w}(c===void 0||g>c)&&(b.onBlockNumber(g,c),c=g)}catch(g){(m=b.onError)==null||m.call(b,g)}},{emitOnBegin:t,interval:i}))})():(()=>{const h=pe(["watchBlockNumber",e.uid,t,n]);return Pt(h,{onBlockNumber:r,onError:s},b=>{let m=!0,g=()=>m=!1;return(async()=>{try{const w=(()=>{if(e.transport.type==="fallback"){const I=e.transport.transports.find(T=>T.config.type==="webSocket"||T.config.type==="ipc");return I?I.value:e.transport}return e.transport})(),{unsubscribe:B}=await w.subscribe({params:["newHeads"],onData(I){var P;if(!m)return;const T=ye((P=I.result)==null?void 0:P.number);b.onBlockNumber(T,c),c=T},onError(I){var T;(T=b.onError)==null||T.call(b,I)}});g=B,m||g()}catch(w){s==null||s(w)}})(),()=>g()})})()}async function Ly(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:o,retryCount:i=6,retryDelay:a=({count:A})=>~~(1<<A)*200,timeout:c=18e4}=t,l=pe(["waitForTransactionReceipt",e.uid,s]),d=(()=>{var A;return t.pollingInterval?t.pollingInterval:(A=e.chain)!=null&&A.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval})();let h,b,m,g=!1,w,B;const{promise:I,resolve:T,reject:P}=Ju(),v=c?setTimeout(()=>{B==null||B(),w==null||w(),P(new cp({hash:s}))},c):void 0;return w=Pt(l,{onReplaced:o,resolve:T,reject:P},async A=>{if(m=await W(e,vr,"getTransactionReceipt")({hash:s}).catch(()=>{}),m&&r<=1){clearTimeout(v),A.resolve(m),w==null||w();return}B=W(e,U0,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:d,async onBlockNumber(R){const C=U=>{clearTimeout(v),B==null||B(),U(),w==null||w()};let O=R;if(!g)try{if(m){if(r>1&&(!m.blockNumber||O-m.blockNumber+1n<r))return;C(()=>A.resolve(m));return}if(n&&!h&&(g=!0,await to(async()=>{h=await W(e,Pi,"getTransaction")({hash:s}),h.blockNumber&&(O=h.blockNumber)},{delay:a,retryCount:i}),g=!1),m=await W(e,vr,"getTransactionReceipt")({hash:s}),r>1&&(!m.blockNumber||O-m.blockNumber+1n<r))return;C(()=>A.resolve(m))}catch(U){if(U instanceof iu||U instanceof au){if(!h){g=!1;return}try{b=h,g=!0;const H=await to(()=>W(e,Qe,"getBlock")({blockNumber:O,includeTransactions:!0}),{delay:a,retryCount:i,shouldRetry:({error:z})=>z instanceof bu});g=!1;const M=H.transactions.find(({from:z,nonce:X})=>z===b.from&&X===b.nonce);if(!M||(m=await W(e,vr,"getTransactionReceipt")({hash:M.hash}),r>1&&(!m.blockNumber||O-m.blockNumber+1n<r)))return;let L="replaced";M.to===b.to&&M.value===b.value&&M.input===b.input?L="repriced":M.from===M.to&&M.value===0n&&(L="cancelled"),C(()=>{var z;(z=A.onReplaced)==null||z.call(A,{reason:L,replacedTransaction:b,transaction:M,transactionReceipt:m}),A.resolve(m)})}catch(H){C(()=>A.reject(H))}}else C(()=>A.reject(U))}}})}),I}function jy(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:i,poll:a,pollingInterval:c=e.pollingInterval}){const l=typeof a<"u"?a:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),d=i??!1;let h;return l?(()=>{const g=pe(["watchBlocks",e.uid,t,n,r,d,c]);return Pt(g,{onBlock:s,onError:o},w=>cr(async()=>{var B;try{const I=await W(e,Qe,"getBlock")({blockTag:t,includeTransactions:d});if(I.number!==null&&(h==null?void 0:h.number)!=null){if(I.number===h.number)return;if(I.number-h.number>1&&n)for(let T=(h==null?void 0:h.number)+1n;T<I.number;T++){const P=await W(e,Qe,"getBlock")({blockNumber:T,includeTransactions:d});w.onBlock(P,h),h=P}}((h==null?void 0:h.number)==null||t==="pending"&&(I==null?void 0:I.number)==null||I.number!==null&&I.number>h.number)&&(w.onBlock(I,h),h=I)}catch(I){(B=w.onError)==null||B.call(w,I)}},{emitOnBegin:r,interval:c}))})():(()=>{let g=!0,w=!0,B=()=>g=!1;return(async()=>{try{r&&W(e,Qe,"getBlock")({blockTag:t,includeTransactions:d}).then(P=>{g&&w&&(s(P,void 0),w=!1)}).catch(o);const I=(()=>{if(e.transport.type==="fallback"){const P=e.transport.transports.find(v=>v.config.type==="webSocket"||v.config.type==="ipc");return P?P.value:e.transport}return e.transport})(),{unsubscribe:T}=await I.subscribe({params:["newHeads"],async onData(P){var A;if(!g)return;const v=await W(e,Qe,"getBlock")({blockNumber:(A=P.result)==null?void 0:A.number,includeTransactions:d}).catch(()=>{});g&&(s(v,h),w=!1,h=v)},onError(P){o==null||o(P)}});B=T,g||B()}catch(I){o==null||o(I)}})(),()=>B()})()}function Dy(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:i,onError:a,onLogs:c,poll:l,pollingInterval:d=e.pollingInterval,strict:h}){const b=typeof l<"u"?l:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),m=h??!1;return b?(()=>{const B=pe(["watchEvent",t,n,r,e.uid,s,d,i]);return Pt(B,{onLogs:c,onError:a},I=>{let T;i!==void 0&&(T=i-1n);let P,v=!1;const A=cr(async()=>{var R;if(!v){try{P=await W(e,i0,"createEventFilter")({address:t,args:n,event:s,events:o,strict:m,fromBlock:i})}catch{}v=!0;return}try{let C;if(P)C=await W(e,Xr,"getFilterChanges")({filter:P});else{const O=await W(e,ur,"getBlockNumber")({});T&&T!==O?C=await W(e,ri,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:T+1n,toBlock:O}):C=[],T=O}if(C.length===0)return;if(r)I.onLogs(C);else for(const O of C)I.onLogs([O])}catch(C){P&&C instanceof Ft&&(v=!1),(R=I.onError)==null||R.call(I,C)}},{emitOnBegin:!0,interval:d});return async()=>{P&&await W(e,Qr,"uninstallFilter")({filter:P}),A()}})})():(()=>{let B=!0,I=()=>B=!1;return(async()=>{try{const T=(()=>{if(e.transport.type==="fallback"){const R=e.transport.transports.find(C=>C.config.type==="webSocket"||C.config.type==="ipc");return R?R.value:e.transport}return e.transport})(),P=o??(s?[s]:void 0);let v=[];P&&(v=[P.flatMap(C=>rr({abi:[C],eventName:C.name,args:n}))],s&&(v=v[0]));const{unsubscribe:A}=await T.subscribe({params:["logs",{address:t,topics:v}],onData(R){var O;if(!B)return;const C=R.result;try{const{eventName:U,args:H}=ti({abi:P??[],data:C.data,topics:C.topics,strict:m}),M=bt(C,{args:H,eventName:U});c([M])}catch(U){let H,M;if(U instanceof $n||U instanceof _r){if(h)return;H=U.abiItem.name,M=(O=U.abiItem.inputs)==null?void 0:O.some(z=>!("name"in z&&z.name))}const L=bt(C,{args:M?[]:{},eventName:H});c([L])}},onError(R){a==null||a(R)}});I=A,B||I()}catch(T){a==null||a(T)}})(),()=>I()})()}function Hy(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const l=pe(["watchPendingTransactions",e.uid,t,o]);return Pt(l,{onTransactions:r,onError:n},d=>{let h;const b=cr(async()=>{var m;try{if(!h)try{h=await W(e,a0,"createPendingTransactionFilter")({});return}catch(w){throw b(),w}const g=await W(e,Xr,"getFilterChanges")({filter:h});if(g.length===0)return;if(t)d.onTransactions(g);else for(const w of g)d.onTransactions([w])}catch(g){(m=d.onError)==null||m.call(d,g)}},{emitOnBegin:!0,interval:o});return async()=>{h&&await W(e,Qr,"uninstallFilter")({filter:h}),b()}})})():(()=>{let l=!0,d=()=>l=!1;return(async()=>{try{const{unsubscribe:h}=await e.transport.subscribe({params:["newPendingTransactions"],onData(b){if(!l)return;const m=b.result;r([m])},onError(b){n==null||n(b)}});d=h,l||d()}catch(h){n==null||n(h)}})(),()=>d()})()}function Gy(e){var h,b,m;const{scheme:t,statement:n,...r}=((h=e.match(Vy))==null?void 0:h.groups)??{},{chainId:s,expirationTime:o,issuedAt:i,notBefore:a,requestId:c,...l}=((b=e.match(qy))==null?void 0:b.groups)??{},d=(m=e.split("Resources:")[1])==null?void 0:m.split(`
- `).slice(1);return{...r,...l,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...i?{issuedAt:new Date(i)}:{},...a?{notBefore:new Date(a)}:{},...c?{requestId:c}:{},...d?{resources:d}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const Vy=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,qy=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Wy(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:i=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&i>=r.expirationTime||r.notBefore&&i<r.notBefore)return!1;try{if(!r.address||!ce(r.address,{strict:!1})||t&&!qr(r.address,t))return!1}catch{return!1}return!0}async function Ky(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:i,signature:a,time:c=new Date,...l}=t,d=Gy(s);if(!d.address||!Wy({address:n,domain:r,message:d,nonce:o,scheme:i,time:c}))return!1;const b=c0(s);return ss(e,{address:d.address,hash:b,signature:a,...l})}async function Zy(e,{serializedTransaction:t,throwOnReceiptRevert:n,timeout:r}){var a,c,l;const s=await e.request({method:"eth_sendRawTransactionSync",params:r?[t,_(r)]:[t]},{retryCount:0}),i=(((l=(c=(a=e.chain)==null?void 0:a.formatters)==null?void 0:c.transactionReceipt)==null?void 0:l.format)||fi)(s);if(i.status==="reverted"&&n)throw new ap({receipt:i});return i}function Yy(e){return{call:t=>Jr(e,t),createAccessList:t=>o0(e,t),createBlockFilter:()=>fb(e),createContractEventFilter:t=>eu(e,t),createEventFilter:t=>i0(e,t),createPendingTransactionFilter:()=>a0(e),estimateContractGas:t=>jp(e,t),estimateGas:t=>ei(e,t),getBalance:t=>lb(e,t),getBlobBaseFee:()=>db(e),getBlock:t=>Qe(e,t),getBlockNumber:t=>ur(e,t),getBlockTransactionCount:t=>hb(e,t),getBytecode:t=>so(e,t),getChainId:()=>Bu(e),getCode:t=>so(e,t),getContractEvents:t=>Su(e,t),getEip712Domain:t=>bb(e,t),getEnsAddress:t=>K1(e,t),getEnsAvatar:t=>ab(e,t),getEnsName:t=>cb(e,t),getEnsResolver:t=>ub(e,t),getEnsText:t=>s0(e,t),getFeeHistory:t=>gb(e,t),estimateFeesPerGas:t=>Np(e,t),getFilterChanges:t=>Xr(e,t),getFilterLogs:t=>wb(e,t),getGasPrice:()=>Yo(e),getLogs:t=>ri(e,t),getProof:t=>my(e,t),estimateMaxPriorityFeePerGas:t=>kp(e,t),getStorageAt:t=>yy(e,t),getTransaction:t=>Pi(e,t),getTransactionConfirmations:t=>gy(e,t),getTransactionCount:t=>gu(e,t),getTransactionReceipt:t=>vr(e,t),multicall:t=>wy(e,t),prepareTransactionRequest:t=>$u(e,t),readContract:t=>He(e,t),sendRawTransaction:t=>z1(e,t),sendRawTransactionSync:t=>Zy(e,t),simulate:t=>ho(e,t),simulateBlocks:t=>ho(e,t),simulateCalls:t=>Ty(e,t),simulateContract:t=>C1(e,t),verifyHash:t=>ss(e,t),verifyMessage:t=>zy(e,t),verifySiweMessage:t=>Ky(e,t),verifyTypedData:t=>Uy(e,t),uninstallFilter:t=>Qr(e,t),waitForTransactionReceipt:t=>Ly(e,t),watchBlocks:t=>jy(e,t),watchBlockNumber:t=>U0(e,t),watchContractEvent:t=>M1(e,t),watchEvent:t=>Dy(e,t),watchPendingTransactions:t=>Hy(e,t)}}function Jy(e){const{key:t="public",name:n="Public Client"}=e;return j1({...e,key:t,name:n,type:"publicClient"}).extend(Yy)}function Xy({key:e,methods:t,name:n,request:r,retryCount:s=3,retryDelay:o=150,timeout:i,type:a},c){const l=e0();return{config:{key:e,methods:t,name:n,request:r,retryCount:s,retryDelay:o,timeout:i,type:a},request:Nb(r,{methods:t,retryCount:s,retryDelay:o,uid:l}),value:c}}function Qy(e,t={}){const{batch:n,fetchFn:r,fetchOptions:s,key:o="http",methods:i,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:d,raw:h}=t;return({chain:b,retryCount:m,timeout:g})=>{const{batchSize:w=1e3,wait:B=0}=typeof n=="object"?n:{},I=t.retryCount??m,T=g??t.timeout??1e4,P=e,v=zb(P,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:l,timeout:T});return Xy({key:o,methods:i,name:a,async request({method:A,params:R}){const C={method:A,params:R},{schedule:O}=Xu({id:P,wait:B,shouldSplitBatch(L){return L.length>w},fn:L=>v.request({body:L}),sort:(L,z)=>L.id-z.id}),U=async L=>n?O(L):[await v.request({body:L})],[{error:H,result:M}]=await U(C);if(h)return{error:H,result:M};if(H)throw new Ho({body:C,error:H,url:P});return M},retryCount:I,retryDelay:d,timeout:T,type:"http"},{fetchOptions:s,url:P})}}const eg={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},tg={block:Rp({format(e){var n;return{transactions:(n=e.transactions)==null?void 0:n.map(r=>{if(typeof r=="string")return r;const s=Vr(r);return s.typeHex==="0x7e"&&(s.isSystemTx=r.isSystemTx,s.mint=r.mint?ye(r.mint):void 0,s.sourceHash=r.sourceHash,s.type="deposit"),s}),stateRoot:e.stateRoot}}}),transaction:Tp({format(e){const t={};return e.type==="0x7e"&&(t.isSystemTx=e.isSystemTx,t.mint=e.mint?ye(e.mint):void 0,t.sourceHash=e.sourceHash,t.type="deposit"),t}}),transactionReceipt:L1({format(e){return{l1GasPrice:e.l1GasPrice?ye(e.l1GasPrice):null,l1GasUsed:e.l1GasUsed?ye(e.l1GasUsed):null,l1Fee:e.l1Fee?ye(e.l1Fee):null,l1FeeScalar:e.l1FeeScalar?Number(e.l1FeeScalar):null}}})};function ng(e,t){return og(e)?sg(e):Pb(e,t)}const rg={transaction:ng};function sg(e){ig(e);const{sourceHash:t,data:n,from:r,gas:s,isSystemTx:o,mint:i,to:a,value:c}=e,l=[t,r,a??"0x",i?$e(i):"0x",c?$e(c):"0x",s?$e(s):"0x",o?"0x1":"0x",n??"0x"];return Ve(["0x7e",It(l)])}function og(e){return e.type==="deposit"||typeof e.sourceHash<"u"}function ig(e){const{from:t,to:n}=e;if(t&&!ce(t))throw new we({address:t});if(n&&!ce(n))throw new we({address:n})}const Fa={blockTime:2e3,contracts:eg,formatters:tg,serializers:rg},xn=1,ag=Fb({...Fa,id:480,name:"World Chain",network:"worldchain",nativeCurrency:{name:"Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://worldchain-mainnet.g.alchemy.com/public"]}},blockExplorers:{default:{name:"Worldscan",url:"https://worldscan.org",apiUrl:"https://api.worldscan.org/api"},blockscout:{name:"Blockscout",url:"https://worldchain-mainnet.explorer.alchemy.com",apiUrl:"https://worldchain-mainnet.explorer.alchemy.com/api"}},contracts:{...Fa.contracts,multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:0},disputeGameFactory:{[xn]:{address:"0x069c4c579671f8c120b1327a73217D01Ea2EC5ea"}},l2OutputOracle:{[xn]:{address:"0x19A6d1E9034596196295CF148509796978343c5D"}},portal:{[xn]:{address:"0xd5ec14a83B7d95BE1E2Ac12523e2dEE12Cbeea6C"}},l1StandardBridge:{[xn]:{address:"0x470458C91978D2d929704489Ad730DC3E3001113"}}},testnet:!1,sourceId:xn});ke.VerificationRejected+"",ke.MaxVerificationsReached+"",ke.CredentialUnavailable+"",ke.MalformedRequest+"",ke.InvalidNetwork+"",ke.InclusionProofFailed+"",ke.InclusionProofPending+"",ke.UnexpectedResponse+"",ke.FailedByHostApp+"",ke.GenericError+"",ke.ConnectionFailed+"";var vn={unknown:"Failed to install MiniKit.",already_installed:"MiniKit is already installed.",outside_of_worldapp:"MiniApp launched outside of WorldApp.",app_out_of_date:"WorldApp is out of date. Please update the app."},cg=e=>{if(e.tokens.some(t=>t.symbol=="USDCE"&&parseFloat(t.token_amount)<.1))return console.error("USDC amount should be greater than $0.1"),!1;if(e.reference.length>36)return console.error("Reference must not exceed 36 characters"),!1;if(typeof e.reference!="string")throw new Error("Reference must be a string");return!0},ug=e=>{let t="";return e.scheme?t+=`${e.scheme}://${e.domain} wants you to sign in with your Ethereum account:
`:t+=`${e.domain} wants you to sign in with your Ethereum account:
`,e.address?t+=`${e.address}
`:t+=`{address}
`,t+=`
`,e.statement&&(t+=`${e.statement}
`),t+=`
`,t+=`URI: ${e.uri}
`,t+=`Version: ${e.version}
`,t+=`Chain ID: ${e.chain_id}
`,t+=`Nonce: ${e.nonce}
`,t+=`Issued At: ${e.issued_at}
`,e.expiration_time&&(t+=`Expiration Time: ${e.expiration_time}
`),e.not_before&&(t+=`Not Before: ${e.not_before}
`),e.request_id&&(t+=`Request ID: ${e.request_id}
`),t},In=e=>{var t,n,r,s,o,i;window.webkit?(s=(r=(n=(t=window.webkit)==null?void 0:t.messageHandlers)==null?void 0:n.minikit)==null?void 0:r.postMessage)==null||s.call(r,e):window.Android&&((i=(o=window.Android).postMessage)==null||i.call(o,JSON.stringify(e)))},_a=!1,fg=()=>{var o;if(_a||typeof navigator<"u"&&!((o=navigator.mediaDevices)!=null&&o.getUserMedia))return;const e=MediaStreamTrack.prototype.stop;MediaStreamTrack.prototype.stop=function(){e.call(this),this.readyState==="ended"&&setTimeout(()=>this.dispatchEvent(new Event("ended")),0)};const t=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices),n=new Set;async function r(i){const a=await t(i);return a.getAudioTracks().length>0&&(In({command:"microphone-stream-started",version:1,payload:{streamId:a.id}}),n.add(a),a.getAudioTracks().forEach(l=>{l.addEventListener("ended",()=>{a.getAudioTracks().every(h=>h.readyState==="ended")&&(In({command:"microphone-stream-ended",version:1,payload:{streamId:a.id}}),n.delete(a))})})),a}Object.defineProperty(navigator.mediaDevices,"getUserMedia",{value:r,writable:!1,configurable:!1,enumerable:!0}),Object.freeze(navigator.mediaDevices);const s=()=>{n.forEach(i=>{const a=i.getAudioTracks();a.length>0&&(a.forEach(c=>{c.stop()}),In({command:"microphone-stream-ended",version:1,payload:{streamId:i.id}}))}),n.clear()};$t.subscribe("miniapp-microphone",i=>{i.status==="error"&&(i.error_code==="mini_app_permission_not_enabled"||i.error_code==="world_app_permission_not_enabled")&&(console.log("stopping all microphone streams",i),s())}),window.__stopAllMiniAppMicrophoneStreams=s,_a=!0},lg="0x79f46b94d134109EbcbbddBAeD0E88790409A0e4",dg=[{inputs:[{internalType:"uint256[8]",name:"proof",type:"uint256[8]"}],name:"compressProof",outputs:[{internalType:"uint256[4]",name:"compressed",type:"uint256[4]"}],stateMutability:"view",type:"function"}],L0=async(e,t)=>{try{const n=Jy({chain:ag,transport:Qy(t||"https://worldchain-mainnet.g.alchemy.com/public")}),r=pn([{type:"uint256[8]"}],e)[0],o=[...await n.readContract({address:lg,abi:dg,functionName:"compressProof",args:[r]}),0n,0n,0n,0n];return At([{type:"uint256[8]"}],[o])}catch{return e}},Ma=10,j0=50,hg=j0*1024*1024,pg=async e=>{const t=await e.arrayBuffer(),n=new Uint8Array(t);let r="";const s=32768;for(let i=0;i<n.length;i+=s){const a=n.subarray(i,Math.min(i+s,n.length));r+=String.fromCharCode.apply(null,Array.from(a))}const o=btoa(r);return{name:e.name,type:e.type,data:o}},bg=async e=>{if(!e.files)return{title:e.title,text:e.text,url:e.url};if(!Array.isArray(e.files))throw new Error('The "files" property must be an array.');if(e.files.length!==0){if(e.files.length>Ma)throw new Error(`Cannot share more than ${Ma} files.`);let r=0;for(const s of e.files){if(!(s instanceof File))throw new Error(`Each item in the 'files' array must be a File object. Received: ${typeof s}`);r+=s.size}if(r>hg)throw new Error(`Total file size cannot exceed ${j0}MB.`)}const t=e.files.map(r=>pg(r));return{files:await Promise.all(t),title:e.title,text:e.text,url:e.url}},mg=e=>e.nonce?e.nonce.length<8?{valid:!1,message:"'nonce' must be at least 8 characters"}:e.statement&&e.statement.includes(`
`)?{valid:!1,message:"'statement' must not contain newlines"}:e.expirationTime&&new Date(e.expirationTime)<new Date?{valid:!1,message:"'expirationTime' must be in the future"}:e.expirationTime&&new Date(e.expirationTime)>new Date(Date.now()+7*24*60*60*1e3)?{valid:!1,message:"'expirationTime' must be within 7 days"}:e.notBefore&&new Date(e.notBefore)>new Date(Date.now()+7*24*60*60*1e3)?{valid:!1,message:"'notBefore' must be within 7 days"}:{valid:!0}:{valid:!1,message:"'nonce' is required"},yg=e=>/^0x[0-9A-Fa-f]+$/.test(e),mo=e=>e===null||typeof e!="object"?e:Array.isArray(e)?e.map(n=>mo(n)):Object.values(e).map(n=>mo(n)),yo=e=>{if(typeof e=="boolean"||typeof e=="string"||e===null||e===void 0)return e;if(typeof e=="number"||typeof e=="bigint")return String(e);if(Array.isArray(e))return e.map(t=>yo(t));if(typeof e=="object"){const t={...e};if("value"in t&&t.value!==void 0&&(typeof t.value!="string"&&(t.value=String(t.value)),!yg(t.value)))throw console.error("Transaction value must be a valid hex string",t.value),new Error(`Transaction value must be a valid hex string: ${t.value}`);for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=yo(t[n]));return t}return e},gg=e=>{if(e.formatPayload){const t=yo(e);return t.transaction=t.transaction.map(n=>{const r=mo(n.args);return{...n,args:r}}),t}return e},wg=async e=>{const n=await(await fetch("https://usernames.worldcoin.org/api/v1/query",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addresses:[e]})})).json();return(n==null?void 0:n[0])??{username:null,profile_picture_url:null}},Re=e=>{In(e)},D=class de{static sendInit(){In({command:"init",payload:{version:this.MINIKIT_VERSION,minorVersion:this.MINIKIT_MINOR_VERSION}})}static subscribe(t,n){if(t==="miniapp-wallet-auth"){const r=n,s=async o=>{if(o.status==="success"){de.user.walletAddress=o.address;try{const i=await de.getUserByAddress(o.address);de.user={...de.user,...i}}catch(i){console.error("Failed to fetch user profile:",i)}}r(o)};this.listeners[t]=s}else if(t==="miniapp-verify-action"){const r=n,s=o=>{o.status==="success"&&o.verification_level===er.Orb?L0(o.proof).then(i=>{o.proof=i,r(o)}):r(o)};this.listeners[t]=s}else this.listeners[t]=n}static unsubscribe(t){delete this.listeners[t]}static trigger(t,n){if(!this.listeners[t]){console.error(`No handler for event ${t}, payload: ${JSON.stringify(n)}`);return}this.listeners[t](n)}static async awaitCommand(t,n,r){return new Promise(s=>{let o=null;const i=a=>{this.unsubscribe(t),s({commandPayload:o,finalPayload:a})};this.subscribe(t,i),o=r()})}static commandsValid(t){let n=!0;return Object.entries(this.miniKitCommandVersion).forEach(([r,s])=>{const o=t.find(a=>a.name===r);let i=!1;o?o.supported_versions.includes(s)?(de.isCommandAvailable[r]=!0,i=!0):(i=!0,console.warn(`Command ${r} version ${s} is not supported by the app. Supported versions: ${o.supported_versions.join(", ")}. This is not an error, but it is recommended to update the World App version.`),de.isCommandAvailable[r]=i):console.warn(`Command ${r} is not supported by the app. Try updating the app version`),i||(n=!1)}),n}static install(t){if(typeof window>"u"||window.MiniKit)return{success:!1,errorCode:"already_installed",errorMessage:vn.already_installed};if(t?de.appId=t:console.warn("App ID not provided during install"),!window.WorldApp)return{success:!1,errorCode:"outside_of_worldapp",errorMessage:vn.outside_of_worldapp};de.user.optedIntoOptionalAnalytics=window.WorldApp.is_optional_analytics,de.user.deviceOS=window.WorldApp.device_os,de.user.worldAppVersion=window.WorldApp.world_app_version,de.deviceProperties.safeAreaInsets=window.WorldApp.safe_area_insets,de.deviceProperties.deviceOS=window.WorldApp.device_os,de.deviceProperties.worldAppVersion=window.WorldApp.world_app_version;try{window.MiniKit=de,this.sendInit()}catch(n){return console.error(vn.unknown,n),{success:!1,errorCode:"unknown",errorMessage:vn.unknown}}return de.isReady=!0,fg(),this.commandsValid(window.WorldApp.supported_commands)?{success:!0}:{success:!1,errorCode:"app_out_of_date",errorMessage:vn.app_out_of_date}}static isInstalled(t){const n=de.isReady&&!!window.MiniKit;return n||console.error("MiniKit is not installed. Make sure you're running the application inside of World App"),t&&n&&console.log("MiniKit is alive!"),n}};D.MINIKIT_VERSION=1;D.MINIKIT_MINOR_VERSION=96;D.miniKitCommandVersion={verify:1,pay:1,"wallet-auth":2,"send-transaction":1,"sign-message":1,"sign-typed-data":1,"share-contacts":1,"request-permission":1,"get-permissions":1,"send-haptic-feedback":1,share:1};D.isCommandAvailable={verify:!1,pay:!1,"wallet-auth":!1,"send-transaction":!1,"sign-message":!1,"sign-typed-data":!1,"share-contacts":!1,"request-permission":!1,"get-permissions":!1,"send-haptic-feedback":!1,share:!1};D.listeners={"miniapp-verify-action":()=>{},"miniapp-payment":()=>{},"miniapp-wallet-auth":()=>{},"miniapp-send-transaction":()=>{},"miniapp-sign-message":()=>{},"miniapp-sign-typed-data":()=>{},"miniapp-share-contacts":()=>{},"miniapp-request-permission":()=>{},"miniapp-get-permissions":()=>{},"miniapp-send-haptic-feedback":()=>{},"miniapp-share":()=>{},"miniapp-microphone":()=>{}};D.appId=null;D.user={};D.deviceProperties={};D.isReady=!1;D.getUserByAddress=async e=>{const t=await wg(e??D.user.walletAddress);return{walletAddress:e??D.user.walletAddress,username:t.username,profilePictureUrl:t.profile_picture_url}};D.getUserByUsername=async e=>{const n=await(await fetch(`https://usernames.worldcoin.org/api/v1/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}})).json();return{walletAddress:n.address,username:n.username,profilePictureUrl:n.profile_picture_url}};D.getUserInfo=D.getUserByAddress;D.commands={verify:e=>{if(typeof window>"u"||!D.isCommandAvailable.verify)return console.error("'verify' command is unavailable. Check MiniKit.install() or update the app version"),null;const t=new Date().toISOString(),n={action:lc(e.action),signal:fc(e.signal).digest,verification_level:e.verification_level||er.Orb,timestamp:t};return Re({command:"verify",version:D.miniKitCommandVersion.verify,payload:n}),n},pay:e=>{if(typeof window>"u"||!D.isCommandAvailable.pay)return console.error("'pay' command is unavailable. Check MiniKit.install() or update the app version"),null;if(!cg(e))return null;const t={...e,network:"worldchain"};return Re({command:"pay",version:D.miniKitCommandVersion.pay,payload:t}),t},walletAuth:e=>{var i,a;if(typeof window>"u"||!D.isCommandAvailable["wallet-auth"])return console.error("'walletAuth' command is unavailable. Check MiniKit.install() or update the app version"),null;const t=mg(e);if(!t.valid)return console.error(`Failed to validate wallet auth input:

 -->`,t.message),null;let n=null;try{n=new URL(window.location.href).protocol.split(":")[0]}catch(c){return console.error("Failed to get current URL",c),null}const s={siweMessage:ug({scheme:n,domain:window.location.host,statement:e.statement??void 0,uri:window.location.href,version:"1",chain_id:480,nonce:e.nonce,issued_at:new Date().toISOString(),expiration_time:((i=e.expirationTime)==null?void 0:i.toISOString())??void 0,not_before:((a=e.notBefore)==null?void 0:a.toISOString())??void 0,request_id:e.requestId??void 0})},o=D.user.worldAppVersion&&D.user.worldAppVersion>2087900?D.miniKitCommandVersion["wallet-auth"]:1;return Re({command:"wallet-auth",version:o,payload:s}),s},sendTransaction:e=>{if(typeof window>"u"||!D.isCommandAvailable["send-transaction"])return console.error("'sendTransaction' command is unavailable. Check MiniKit.install() or update the app version"),null;e.formatPayload=e.formatPayload!==!1;const t=gg(e);return Re({command:"send-transaction",version:D.miniKitCommandVersion["send-transaction"],payload:t}),t},signMessage:e=>typeof window>"u"||!D.isCommandAvailable["sign-message"]?(console.error("'signMessage' command is unavailable. Check MiniKit.install() or update the app version"),null):(Re({command:"sign-message",version:D.miniKitCommandVersion["sign-message"],payload:e}),e),signTypedData:e=>typeof window>"u"||!D.isCommandAvailable["sign-typed-data"]?(console.error("'signTypedData' command is unavailable. Check MiniKit.install() or update the app version"),null):(e.chainId||(e.chainId=480),Re({command:"sign-typed-data",version:D.miniKitCommandVersion["sign-typed-data"],payload:e}),e),shareContacts:e=>typeof window>"u"||!D.isCommandAvailable["share-contacts"]?(console.error("'shareContacts' command is unavailable. Check MiniKit.install() or update the app version"),null):(Re({command:"share-contacts",version:D.miniKitCommandVersion["share-contacts"],payload:e}),e),requestPermission:e=>typeof window>"u"||!D.isCommandAvailable["request-permission"]?(console.error("'requestPermission' command is unavailable. Check MiniKit.install() or update the app version"),null):(Re({command:"request-permission",version:D.miniKitCommandVersion["request-permission"],payload:e}),e),getPermissions:()=>typeof window>"u"||!D.isCommandAvailable["get-permissions"]?(console.error("'getPermissions' command is unavailable. Check MiniKit.install() or update the app version"),null):(Re({command:"get-permissions",version:D.miniKitCommandVersion["get-permissions"],payload:{}}),{status:"sent"}),sendHapticFeedback:e=>typeof window>"u"||!D.isCommandAvailable["send-haptic-feedback"]?(console.error("'sendHapticFeedback' command is unavailable. Check MiniKit.install() or update the app version"),null):(Re({command:"send-haptic-feedback",version:D.miniKitCommandVersion["send-haptic-feedback"],payload:e}),e),share:e=>typeof window>"u"||!D.isCommandAvailable.share?(console.error("'share' command is unavailable. Check MiniKit.install() or update the app version"),null):(D.deviceProperties.deviceOS==="ios"&&typeof navigator<"u"?(Re({command:"share",version:D.miniKitCommandVersion.share,payload:e}),navigator.share(e)):(bg(e).then(t=>{Re({command:"share",version:D.miniKitCommandVersion.share,payload:t})}).catch(t=>{console.error("Failed to format share input",t)}),D.subscribe("miniapp-share",t=>{console.log("Share Response",t)})),e)};D.commandsAsync={verify:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-verify-action","verify",()=>D.commands.verify(e));r.finalPayload.status==="success"&&r.finalPayload.verification_level===er.Orb&&(r.finalPayload.proof=await L0(r.finalPayload.proof)),t(r)}catch(r){n(r)}}),pay:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-payment","pay",()=>D.commands.pay(e));t(r)}catch(r){n(r)}}),walletAuth:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-wallet-auth","wallet-auth",()=>D.commands.walletAuth(e));return t(r)}catch(r){n(r)}}),sendTransaction:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-send-transaction","send-transaction",()=>D.commands.sendTransaction(e));return t(r)}catch(r){n(r)}}),signMessage:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-sign-message","sign-message",()=>D.commands.signMessage(e));return t(r)}catch(r){n(r)}}),signTypedData:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-sign-typed-data","sign-typed-data",()=>D.commands.signTypedData(e));return t(r)}catch(r){n(r)}}),shareContacts:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-share-contacts","share-contacts",()=>D.commands.shareContacts(e));return t(r)}catch(r){n(r)}}),requestPermission:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-request-permission","request-permission",()=>D.commands.requestPermission(e));t(r)}catch(r){n(r)}}),getPermissions:async()=>new Promise(async(e,t)=>{try{const n=await D.awaitCommand("miniapp-get-permissions","get-permissions",()=>D.commands.getPermissions());e(n)}catch(n){t(n)}}),sendHapticFeedback:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-send-haptic-feedback","send-haptic-feedback",()=>D.commands.sendHapticFeedback(e));t(r)}catch(r){n(r)}}),share:async e=>new Promise(async(t,n)=>{try{const r=await D.awaitCommand("miniapp-share","share",()=>D.commands.share(e));t({commandPayload:r.commandPayload,finalPayload:r.finalPayload})}catch(r){n(r)}})};var $t=D;class be{static show(t,n="info"){const r=document.createElement("div");r.className=`toast toast-${n}`,r.textContent=t;const s={success:"#10b981",error:"#ef4444",warning:"#f59e0b",info:"#3b82f6"};r.style.cssText=`
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 1rem 1.5rem;
      background: ${s[n]||s.info};
      color: white;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 10000;
      font-weight: 500;
      max-width: 350px;
      animation: slideIn 0.3s ease;
    `,document.body.appendChild(r),setTimeout(()=>{r.style.animation="slideOut 0.3s ease",setTimeout(()=>r.remove(),300)},3e3)}static success(t){this.show(t,"success")}static error(t){this.show(t,"error")}static info(t){this.show(t,"info")}static warning(t){this.show(t,"warning")}}if(!document.getElementById("toast-animations")){const e=document.createElement("style");e.id="toast-animations",e.textContent=`
    @keyframes slideIn {
      from {
        transform: translateX(400px);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
    
    @keyframes slideOut {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(400px);
        opacity: 0;
      }
    }
  `,document.head.appendChild(e)}const qt="https://elite-connect-backend-ktv9.onrender.com/api";class xg{constructor(){console.log(" Elite Connect initializing..."),this.token=localStorage.getItem("token"),this.user=null,this.currentScreen="auth",console.log(" Token exists:",!!this.token),this.init()}async init(){console.log(" [INIT] Starting app initialization..."),$t.isInstalled()?(console.log(" [INIT] MiniKit is installed"),await $t.install(),console.log(" [INIT] MiniKit installed successfully")):console.warn(" [INIT] MiniKit not installed - running outside World App"),this.setupEventListeners(),console.log(" [INIT] Event listeners set up"),this.token?(console.log(" [INIT] Token exists, loading user..."),await this.loadUser()):(console.log(" [INIT] No token, showing auth screen..."),this.showAuth()),console.log(" [INIT] App initialization complete")}setupEventListeners(){var t,n,r,s,o,i,a,c,l,d,h,b,m;(t=document.getElementById("signInBtn"))==null||t.addEventListener("click",()=>this.verifyWithWorldID()),(n=document.getElementById("profileForm"))==null||n.addEventListener("submit",g=>this.saveProfile(g)),(r=document.getElementById("viewProfileBtn"))==null||r.addEventListener("click",()=>this.showProfile()),(s=document.getElementById("exploreBtn"))==null||s.addEventListener("click",()=>this.showExplore()),(o=document.getElementById("backToHomeBtn"))==null||o.addEventListener("click",()=>this.showHome()),(i=document.getElementById("editProfileBtn"))==null||i.addEventListener("click",()=>this.showProfileSetup()),(a=document.getElementById("logoutBtn"))==null||a.addEventListener("click",()=>this.logout()),(c=document.getElementById("chatBackBtn"))==null||c.addEventListener("click",()=>this.showExplore()),(l=document.getElementById("sendMessageBtn"))==null||l.addEventListener("click",()=>this.sendMessage()),(d=document.getElementById("subscriptionBackBtn"))==null||d.addEventListener("click",()=>this.showProfile()),(h=document.getElementById("subscribeBtn"))==null||h.addEventListener("click",()=>this.subscribe()),(b=document.getElementById("transactionBackBtn"))==null||b.addEventListener("click",()=>this.showProfile()),(m=document.getElementById("messageInput"))==null||m.addEventListener("keypress",g=>{g.key==="Enter"&&this.sendMessage()})}async verifyWithWorldID(){try{if(console.log(""),console.log(""),console.log(" [1] STARTING WORLD ID VERIFICATION"),console.log(""),!$t.isInstalled()){console.error(" [1.1] MiniKit not installed"),be.error("Please open this app in World App");return}console.log(" [1.2] MiniKit is installed"),be.info("Opening World ID verification..."),console.log(" [2] Calling MiniKit.commandsAsync.verify...");const{finalPayload:t}=await $t.commandsAsync.verify({action:"signin",signal:"",verification_level:er.Device});if(console.log(" [3] World ID response:",JSON.stringify(t,null,2)),t.status==="success"){console.log(" [3.1] Verification successful"),be.info("Verifying with backend..."),console.log(" [4] Sending to backend:",qt);const n=await fetch(`${qt}/auth/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});console.log(" [5] Backend response status:",n.status);const r=await n.json();if(console.log(" [6] Backend data:",JSON.stringify(r,null,2)),r.success){console.log(" [6.1] Backend authentication successful!"),this.token=r.token,this.user=r.user,localStorage.setItem("token",this.token),console.log(" [7] Token stored"),console.log(" [8] User:",this.user),be.success("Welcome to Elite Connect!"),console.log(" [9] Attempting to close World ID modal...");try{$t.commandsAsync.closeModal&&(await $t.commandsAsync.closeModal(),console.log(" Modal closed successfully"))}catch(s){console.warn(" Could not close modal:",s)}console.log(""),console.log(""),console.log(" [10] STARTING NAVIGATION"),console.log(""),console.log("Profile completed?",this.user.profile_completed),setTimeout(()=>{console.log(" [11] Executing navigation..."),this.user&&this.user.profile_completed?(console.log(" [12] Navigating to HOME (profile completed)"),this.showHome()):(console.log(" [12] Navigating to PROFILE SETUP (profile incomplete)"),this.showProfileSetup()),console.log(""),console.log(" NAVIGATION COMPLETE"),console.log(""),console.log("")},500)}else console.error(" [6.2] Backend error:",r.error),be.error(r.error||"Verification failed")}else t.status==="error"?(console.error(" [3.2] World ID error:",t),be.error("Verification failed")):(console.log(" [3.3] Verification cancelled"),be.warning("Verification cancelled"))}catch(t){console.error(""),console.error(""),console.error(" CRITICAL ERROR IN VERIFICATION"),console.error(""),console.error("Error:",t),console.error("Message:",t.message),console.error("Stack:",t.stack),console.error(""),console.error(""),be.error("Verification failed. Please try again.")}}async loadUser(){try{const t=await fetch(`${qt}/auth/me`,{headers:{Authorization:`Bearer ${this.token}`}});if(t.ok){const n=await t.json();this.user=n,console.log(" User loaded:",this.user),this.user.profile_completed?this.showHome():this.showProfileSetup()}else console.log(" Invalid token, logging out"),this.logout()}catch(t){console.error("Error loading user:",t),this.logout()}}async saveProfile(t){t.preventDefault();const n=new FormData(t.target),r={name:n.get("name"),age:parseInt(n.get("age")),gender:n.get("gender"),bio:n.get("bio")||"",interests:n.get("interests")?n.get("interests").split(",").map(s=>s.trim()):[]};console.log(" Saving profile:",r);try{const o=await(await fetch(`${qt}/profile/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(r)})).json();console.log(" Profile save response:",o),o.success?(this.user={...this.user,profile_completed:!0,...r},be.success("Profile saved!"),console.log(" Profile saved  Going to HOME"),setTimeout(()=>this.showHome(),500)):be.error(o.error||"Failed to save profile")}catch(s){console.error("Error saving profile:",s),be.error("Failed to save profile")}}async loadExploreProfiles(){try{const n=await(await fetch(`${qt}/explore/profiles`,{headers:{Authorization:`Bearer ${this.token}`}})).json();n.success&&this.displayProfiles(n.profiles)}catch(t){console.error("Error loading profiles:",t)}}displayProfiles(t){const n=document.getElementById("profilesList");if(n){if(t.length===0){n.innerHTML='<p style="text-align: center; color: var(--text-secondary); padding: 2rem;">No profiles found</p>';return}n.innerHTML=t.map(r=>`
      <div class="profile-card" onclick="app.viewProfile('${r.id}')">
        <h3>${r.name}, ${r.age}</h3>
        <p style="color: var(--text-secondary); margin: 0.5rem 0;">${r.bio}</p>
        ${r.interests.length>0?`
          <div style="display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem;">
            ${r.interests.map(s=>`
              <span style="background: var(--bg-tertiary); padding: 0.25rem 0.75rem; border-radius: 12px; font-size: 0.875rem;">
                ${s}
              </span>
            `).join("")}
          </div>
        `:""}
      </div>
    `).join("")}}viewProfile(t){console.log("Viewing profile:",t),be.info("Profile details coming soon!")}sendMessage(){const t=document.getElementById("messageInput");t!=null&&t.value.trim()&&(be.info("Messaging coming soon!"),t&&(t.value=""))}subscribe(){be.info("Subscription coming soon!")}logout(){console.log(" Logging out..."),localStorage.removeItem("token"),this.token=null,this.user=null,this.showAuth(),be.info("Logged out")}hideAllScreens(){console.log(" Hiding all screens"),["auth","profile-setup","home","profile","explore","chat","subscription","transactions"].forEach(n=>{const r=document.getElementById(n);r&&(r.classList.add("hidden"),r.style.display="none",console.log(`   Hidden: ${n}`))})}showScreen(t){console.log(` SHOWING: ${t.toUpperCase()} SCREEN`),this.hideAllScreens();const n=document.getElementById(t);n?(n.classList.remove("hidden"),n.style.display="block",console.log(`   ${t} screen is now visible`)):console.error(`   ERROR: ${t} screen element not found!`),this.currentScreen=t}showAuth(){this.showScreen("auth")}showProfileSetup(){var t;this.showScreen("profile-setup"),this.user&&this.user.name&&(document.getElementById("name").value=this.user.name||"",document.getElementById("age").value=this.user.age||"",document.getElementById("gender").value=this.user.gender||"",document.getElementById("bio").value=this.user.bio||"",document.getElementById("interests").value=((t=this.user.interests)==null?void 0:t.join(", "))||"")}showHome(){this.showScreen("home");const t=document.getElementById("welcomeMessage");t&&this.user&&(t.textContent=`Welcome, ${this.user.name||"User"}!`)}async showProfile(){this.showScreen("profile");try{const n=await(await fetch(`${qt}/profile/me`,{headers:{Authorization:`Bearer ${this.token}`}})).json();if(n.success){const r=n.profile;document.getElementById("profileName").textContent=r.name,document.getElementById("profileAge").textContent=`${r.age} years old`,document.getElementById("profileBio").textContent=r.bio||"No bio",document.getElementById("profileInitial").textContent=r.name.charAt(0).toUpperCase();const s=document.getElementById("profileInterests");s&&r.interests&&(s.innerHTML=r.interests.map(o=>`
            <span style="background: var(--bg-tertiary); padding: 0.5rem 1rem; border-radius: 12px; font-size: 0.875rem;">
              ${o}
            </span>
          `).join(""))}}catch(t){console.error("Error loading profile:",t)}}showExplore(){this.showScreen("explore"),this.loadExploreProfiles()}showChat(){this.showScreen("chat")}showSubscription(){this.showScreen("subscription")}showTransactions(){this.showScreen("transactions")}}const vg=new xg;window.app=vg;export{S as B,En as H,G1 as a,st as b,Jr as c,Jh as d,At as e,tt as f,Do as g,qr as i,es as l,pe as s};
